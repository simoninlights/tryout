!function (t) { var e = {}; function n(r) { if (e[r]) return e[r].exports; var o = e[r] = { i: r, l: !1, exports: {} }; return t[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } n.m = t, n.c = e, n.d = function (t, e, r) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: r }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var o in t) n.d(r, o, function (e) { return t[e] }.bind(null, o)); return r }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 19) }([function (t, e, n) { var r; (function () { var n = this, o = n._, i = Array.prototype, a = Object.prototype, s = Function.prototype, l = i.push, u = i.slice, c = a.toString, p = a.hasOwnProperty, h = Array.isArray, f = Object.keys, d = s.bind, y = Object.create, g = function () { }, m = function (t) { return t instanceof m ? t : this instanceof m ? void (this._wrapped = t) : new m(t) }; t.exports && (e = t.exports = m), e._ = m, m.VERSION = "1.8.3"; var _ = function (t, e, n) { if (void 0 === e) return t; switch (null == n ? 3 : n) { case 1: return function (n) { return t.call(e, n) }; case 2: return function (n, r) { return t.call(e, n, r) }; case 3: return function (n, r, o) { return t.call(e, n, r, o) }; case 4: return function (n, r, o, i) { return t.call(e, n, r, o, i) } }return function () { return t.apply(e, arguments) } }, b = function (t, e, n) { return null == t ? m.identity : m.isFunction(t) ? _(t, e, n) : m.isObject(t) ? m.matcher(t) : m.property(t) }; m.iteratee = function (t, e) { return b(t, e, 1 / 0) }; var v = function (t, e) { return function (n) { var r = arguments.length; if (r < 2 || null == n) return n; for (var o = 1; o < r; o++)for (var i = arguments[o], a = t(i), s = a.length, l = 0; l < s; l++) { var u = a[l]; e && void 0 !== n[u] || (n[u] = i[u]) } return n } }, w = function (t) { if (!m.isObject(t)) return {}; if (y) return y(t); g.prototype = t; var e = new g; return g.prototype = null, e }, C = function (t) { return function (e) { return null == e ? void 0 : e[t] } }, P = Math.pow(2, 53) - 1, S = C("length"), x = function (t) { var e = S(t); return "number" == typeof e && e >= 0 && e <= P }; function O(t) { function e(e, n, r, o, i, a) { for (; i >= 0 && i < a; i += t) { var s = o ? o[i] : i; r = n(r, e[s], s, e) } return r } return function (n, r, o, i) { r = _(r, i, 4); var a = !x(n) && m.keys(n), s = (a || n).length, l = t > 0 ? 0 : s - 1; return arguments.length < 3 && (o = n[a ? a[l] : l], l += t), e(n, r, o, a, l, s) } } m.each = m.forEach = function (t, e, n) { var r, o; if (e = _(e, n), x(t)) for (r = 0, o = t.length; r < o; r++)e(t[r], r, t); else { var i = m.keys(t); for (r = 0, o = i.length; r < o; r++)e(t[i[r]], i[r], t) } return t }, m.map = m.collect = function (t, e, n) { e = b(e, n); for (var r = !x(t) && m.keys(t), o = (r || t).length, i = Array(o), a = 0; a < o; a++) { var s = r ? r[a] : a; i[a] = e(t[s], s, t) } return i }, m.reduce = m.foldl = m.inject = O(1), m.reduceRight = m.foldr = O(-1), m.find = m.detect = function (t, e, n) { var r; if (void 0 !== (r = x(t) ? m.findIndex(t, e, n) : m.findKey(t, e, n)) && -1 !== r) return t[r] }, m.filter = m.select = function (t, e, n) { var r = []; return e = b(e, n), m.each(t, (function (t, n, o) { e(t, n, o) && r.push(t) })), r }, m.reject = function (t, e, n) { return m.filter(t, m.negate(b(e)), n) }, m.every = m.all = function (t, e, n) { e = b(e, n); for (var r = !x(t) && m.keys(t), o = (r || t).length, i = 0; i < o; i++) { var a = r ? r[i] : i; if (!e(t[a], a, t)) return !1 } return !0 }, m.some = m.any = function (t, e, n) { e = b(e, n); for (var r = !x(t) && m.keys(t), o = (r || t).length, i = 0; i < o; i++) { var a = r ? r[i] : i; if (e(t[a], a, t)) return !0 } return !1 }, m.contains = m.includes = m.include = function (t, e, n, r) { return x(t) || (t = m.values(t)), ("number" != typeof n || r) && (n = 0), m.indexOf(t, e, n) >= 0 }, m.invoke = function (t, e) { var n = u.call(arguments, 2), r = m.isFunction(e); return m.map(t, (function (t) { var o = r ? e : t[e]; return null == o ? o : o.apply(t, n) })) }, m.pluck = function (t, e) { return m.map(t, m.property(e)) }, m.where = function (t, e) { return m.filter(t, m.matcher(e)) }, m.findWhere = function (t, e) { return m.find(t, m.matcher(e)) }, m.max = function (t, e, n) { var r, o, i = -1 / 0, a = -1 / 0; if (null == e && null != t) for (var s = 0, l = (t = x(t) ? t : m.values(t)).length; s < l; s++)(r = t[s]) > i && (i = r); else e = b(e, n), m.each(t, (function (t, n, r) { ((o = e(t, n, r)) > a || o === -1 / 0 && i === -1 / 0) && (i = t, a = o) })); return i }, m.min = function (t, e, n) { var r, o, i = 1 / 0, a = 1 / 0; if (null == e && null != t) for (var s = 0, l = (t = x(t) ? t : m.values(t)).length; s < l; s++)(r = t[s]) < i && (i = r); else e = b(e, n), m.each(t, (function (t, n, r) { ((o = e(t, n, r)) < a || o === 1 / 0 && i === 1 / 0) && (i = t, a = o) })); return i }, m.shuffle = function (t) { for (var e, n = x(t) ? t : m.values(t), r = n.length, o = Array(r), i = 0; i < r; i++)(e = m.random(0, i)) !== i && (o[i] = o[e]), o[e] = n[i]; return o }, m.sample = function (t, e, n) { return null == e || n ? (x(t) || (t = m.values(t)), t[m.random(t.length - 1)]) : m.shuffle(t).slice(0, Math.max(0, e)) }, m.sortBy = function (t, e, n) { return e = b(e, n), m.pluck(m.map(t, (function (t, n, r) { return { value: t, index: n, criteria: e(t, n, r) } })).sort((function (t, e) { var n = t.criteria, r = e.criteria; if (n !== r) { if (n > r || void 0 === n) return 1; if (n < r || void 0 === r) return -1 } return t.index - e.index })), "value") }; var I = function (t) { return function (e, n, r) { var o = {}; return n = b(n, r), m.each(e, (function (r, i) { var a = n(r, i, e); t(o, r, a) })), o } }; m.groupBy = I((function (t, e, n) { m.has(t, n) ? t[n].push(e) : t[n] = [e] })), m.indexBy = I((function (t, e, n) { t[n] = e })), m.countBy = I((function (t, e, n) { m.has(t, n) ? t[n]++ : t[n] = 1 })), m.toArray = function (t) { return t ? m.isArray(t) ? u.call(t) : x(t) ? m.map(t, m.identity) : m.values(t) : [] }, m.size = function (t) { return null == t ? 0 : x(t) ? t.length : m.keys(t).length }, m.partition = function (t, e, n) { e = b(e, n); var r = [], o = []; return m.each(t, (function (t, n, i) { (e(t, n, i) ? r : o).push(t) })), [r, o] }, m.first = m.head = m.take = function (t, e, n) { if (null != t) return null == e || n ? t[0] : m.initial(t, t.length - e) }, m.initial = function (t, e, n) { return u.call(t, 0, Math.max(0, t.length - (null == e || n ? 1 : e))) }, m.last = function (t, e, n) { if (null != t) return null == e || n ? t[t.length - 1] : m.rest(t, Math.max(0, t.length - e)) }, m.rest = m.tail = m.drop = function (t, e, n) { return u.call(t, null == e || n ? 1 : e) }, m.compact = function (t) { return m.filter(t, m.identity) }; var j = function (t, e, n, r) { for (var o = [], i = 0, a = r || 0, s = S(t); a < s; a++) { var l = t[a]; if (x(l) && (m.isArray(l) || m.isArguments(l))) { e || (l = j(l, e, n)); var u = 0, c = l.length; for (o.length += c; u < c;)o[i++] = l[u++] } else n || (o[i++] = l) } return o }; function k(t) { return function (e, n, r) { n = b(n, r); for (var o = S(e), i = t > 0 ? 0 : o - 1; i >= 0 && i < o; i += t)if (n(e[i], i, e)) return i; return -1 } } function E(t, e, n) { return function (r, o, i) { var a = 0, s = S(r); if ("number" == typeof i) t > 0 ? a = i >= 0 ? i : Math.max(i + s, a) : s = i >= 0 ? Math.min(i + 1, s) : i + s + 1; else if (n && i && s) return r[i = n(r, o)] === o ? i : -1; if (o != o) return (i = e(u.call(r, a, s), m.isNaN)) >= 0 ? i + a : -1; for (i = t > 0 ? a : s - 1; i >= 0 && i < s; i += t)if (r[i] === o) return i; return -1 } } m.flatten = function (t, e) { return j(t, e, !1) }, m.without = function (t) { return m.difference(t, u.call(arguments, 1)) }, m.uniq = m.unique = function (t, e, n, r) { m.isBoolean(e) || (r = n, n = e, e = !1), null != n && (n = b(n, r)); for (var o = [], i = [], a = 0, s = S(t); a < s; a++) { var l = t[a], u = n ? n(l, a, t) : l; e ? (a && i === u || o.push(l), i = u) : n ? m.contains(i, u) || (i.push(u), o.push(l)) : m.contains(o, l) || o.push(l) } return o }, m.union = function () { return m.uniq(j(arguments, !0, !0)) }, m.intersection = function (t) { for (var e = [], n = arguments.length, r = 0, o = S(t); r < o; r++) { var i = t[r]; if (!m.contains(e, i)) { for (var a = 1; a < n && m.contains(arguments[a], i); a++); a === n && e.push(i) } } return e }, m.difference = function (t) { var e = j(arguments, !0, !0, 1); return m.filter(t, (function (t) { return !m.contains(e, t) })) }, m.zip = function () { return m.unzip(arguments) }, m.unzip = function (t) { for (var e = t && m.max(t, S).length || 0, n = Array(e), r = 0; r < e; r++)n[r] = m.pluck(t, r); return n }, m.object = function (t, e) { for (var n = {}, r = 0, o = S(t); r < o; r++)e ? n[t[r]] = e[r] : n[t[r][0]] = t[r][1]; return n }, m.findIndex = k(1), m.findLastIndex = k(-1), m.sortedIndex = function (t, e, n, r) { for (var o = (n = b(n, r, 1))(e), i = 0, a = S(t); i < a;) { var s = Math.floor((i + a) / 2); n(t[s]) < o ? i = s + 1 : a = s } return i }, m.indexOf = E(1, m.findIndex, m.sortedIndex), m.lastIndexOf = E(-1, m.findLastIndex), m.range = function (t, e, n) { null == e && (e = t || 0, t = 0), n = n || 1; for (var r = Math.max(Math.ceil((e - t) / n), 0), o = Array(r), i = 0; i < r; i++, t += n)o[i] = t; return o }; var T = function (t, e, n, r, o) { if (!(r instanceof e)) return t.apply(n, o); var i = w(t.prototype), a = t.apply(i, o); return m.isObject(a) ? a : i }; m.bind = function (t, e) { if (d && t.bind === d) return d.apply(t, u.call(arguments, 1)); if (!m.isFunction(t)) throw new TypeError("Bind must be called on a function"); var n = u.call(arguments, 2), r = function () { return T(t, r, e, this, n.concat(u.call(arguments))) }; return r }, m.partial = function (t) { var e = u.call(arguments, 1), n = function () { for (var r = 0, o = e.length, i = Array(o), a = 0; a < o; a++)i[a] = e[a] === m ? arguments[r++] : e[a]; for (; r < arguments.length;)i.push(arguments[r++]); return T(t, n, this, this, i) }; return n }, m.bindAll = function (t) { var e, n, r = arguments.length; if (r <= 1) throw new Error("bindAll must be passed function names"); for (e = 1; e < r; e++)t[n = arguments[e]] = m.bind(t[n], t); return t }, m.memoize = function (t, e) { var n = function (r) { var o = n.cache, i = "" + (e ? e.apply(this, arguments) : r); return m.has(o, i) || (o[i] = t.apply(this, arguments)), o[i] }; return n.cache = {}, n }, m.delay = function (t, e) { var n = u.call(arguments, 2); return setTimeout((function () { return t.apply(null, n) }), e) }, m.defer = m.partial(m.delay, m, 1), m.throttle = function (t, e, n) { var r, o, i, a = null, s = 0; n || (n = {}); var l = function () { s = !1 === n.leading ? 0 : m.now(), a = null, i = t.apply(r, o), a || (r = o = null) }; return function () { var u = m.now(); s || !1 !== n.leading || (s = u); var c = e - (u - s); return r = this, o = arguments, c <= 0 || c > e ? (a && (clearTimeout(a), a = null), s = u, i = t.apply(r, o), a || (r = o = null)) : a || !1 === n.trailing || (a = setTimeout(l, c)), i } }, m.debounce = function (t, e, n) { var r, o, i, a, s, l = function () { var u = m.now() - a; u < e && u >= 0 ? r = setTimeout(l, e - u) : (r = null, n || (s = t.apply(i, o), r || (i = o = null))) }; return function () { i = this, o = arguments, a = m.now(); var u = n && !r; return r || (r = setTimeout(l, e)), u && (s = t.apply(i, o), i = o = null), s } }, m.wrap = function (t, e) { return m.partial(e, t) }, m.negate = function (t) { return function () { return !t.apply(this, arguments) } }, m.compose = function () { var t = arguments, e = t.length - 1; return function () { for (var n = e, r = t[e].apply(this, arguments); n--;)r = t[n].call(this, r); return r } }, m.after = function (t, e) { return function () { if (--t < 1) return e.apply(this, arguments) } }, m.before = function (t, e) { var n; return function () { return --t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = null), n } }, m.once = m.partial(m.before, 2); var B = !{ toString: null }.propertyIsEnumerable("toString"), M = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"]; function A(t, e) { var n = M.length, r = t.constructor, o = m.isFunction(r) && r.prototype || a, i = "constructor"; for (m.has(t, i) && !m.contains(e, i) && e.push(i); n--;)(i = M[n]) in t && t[i] !== o[i] && !m.contains(e, i) && e.push(i) } m.keys = function (t) { if (!m.isObject(t)) return []; if (f) return f(t); var e = []; for (var n in t) m.has(t, n) && e.push(n); return B && A(t, e), e }, m.allKeys = function (t) { if (!m.isObject(t)) return []; var e = []; for (var n in t) e.push(n); return B && A(t, e), e }, m.values = function (t) { for (var e = m.keys(t), n = e.length, r = Array(n), o = 0; o < n; o++)r[o] = t[e[o]]; return r }, m.mapObject = function (t, e, n) { e = b(e, n); for (var r, o = m.keys(t), i = o.length, a = {}, s = 0; s < i; s++)a[r = o[s]] = e(t[r], r, t); return a }, m.pairs = function (t) { for (var e = m.keys(t), n = e.length, r = Array(n), o = 0; o < n; o++)r[o] = [e[o], t[e[o]]]; return r }, m.invert = function (t) { for (var e = {}, n = m.keys(t), r = 0, o = n.length; r < o; r++)e[t[n[r]]] = n[r]; return e }, m.functions = m.methods = function (t) { var e = []; for (var n in t) m.isFunction(t[n]) && e.push(n); return e.sort() }, m.extend = v(m.allKeys), m.extendOwn = m.assign = v(m.keys), m.findKey = function (t, e, n) { e = b(e, n); for (var r, o = m.keys(t), i = 0, a = o.length; i < a; i++)if (e(t[r = o[i]], r, t)) return r }, m.pick = function (t, e, n) { var r, o, i = {}, a = t; if (null == a) return i; m.isFunction(e) ? (o = m.allKeys(a), r = _(e, n)) : (o = j(arguments, !1, !1, 1), r = function (t, e, n) { return e in n }, a = Object(a)); for (var s = 0, l = o.length; s < l; s++) { var u = o[s], c = a[u]; r(c, u, a) && (i[u] = c) } return i }, m.omit = function (t, e, n) { if (m.isFunction(e)) e = m.negate(e); else { var r = m.map(j(arguments, !1, !1, 1), String); e = function (t, e) { return !m.contains(r, e) } } return m.pick(t, e, n) }, m.defaults = v(m.allKeys, !0), m.create = function (t, e) { var n = w(t); return e && m.extendOwn(n, e), n }, m.clone = function (t) { return m.isObject(t) ? m.isArray(t) ? t.slice() : m.extend({}, t) : t }, m.tap = function (t, e) { return e(t), t }, m.isMatch = function (t, e) { var n = m.keys(e), r = n.length; if (null == t) return !r; for (var o = Object(t), i = 0; i < r; i++) { var a = n[i]; if (e[a] !== o[a] || !(a in o)) return !1 } return !0 }; var R = function (t, e, n, r) { if (t === e) return 0 !== t || 1 / t == 1 / e; if (null == t || null == e) return t === e; t instanceof m && (t = t._wrapped), e instanceof m && (e = e._wrapped); var o = c.call(t); if (o !== c.call(e)) return !1; switch (o) { case "[object RegExp]": case "[object String]": return "" + t == "" + e; case "[object Number]": return +t != +t ? +e != +e : 0 == +t ? 1 / +t == 1 / e : +t == +e; case "[object Date]": case "[object Boolean]": return +t == +e }var i = "[object Array]" === o; if (!i) { if ("object" != typeof t || "object" != typeof e) return !1; var a = t.constructor, s = e.constructor; if (a !== s && !(m.isFunction(a) && a instanceof a && m.isFunction(s) && s instanceof s) && "constructor" in t && "constructor" in e) return !1 } r = r || []; for (var l = (n = n || []).length; l--;)if (n[l] === t) return r[l] === e; if (n.push(t), r.push(e), i) { if ((l = t.length) !== e.length) return !1; for (; l--;)if (!R(t[l], e[l], n, r)) return !1 } else { var u, p = m.keys(t); if (l = p.length, m.keys(e).length !== l) return !1; for (; l--;)if (u = p[l], !m.has(e, u) || !R(t[u], e[u], n, r)) return !1 } return n.pop(), r.pop(), !0 }; m.isEqual = function (t, e) { return R(t, e) }, m.isEmpty = function (t) { return null == t || (x(t) && (m.isArray(t) || m.isString(t) || m.isArguments(t)) ? 0 === t.length : 0 === m.keys(t).length) }, m.isElement = function (t) { return !(!t || 1 !== t.nodeType) }, m.isArray = h || function (t) { return "[object Array]" === c.call(t) }, m.isObject = function (t) { var e = typeof t; return "function" === e || "object" === e && !!t }, m.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], (function (t) { m["is" + t] = function (e) { return c.call(e) === "[object " + t + "]" } })), m.isArguments(arguments) || (m.isArguments = function (t) { return m.has(t, "callee") }), "object" != typeof Int8Array && (m.isFunction = function (t) { return "function" == typeof t || !1 }), m.isFinite = function (t) { return isFinite(t) && !isNaN(parseFloat(t)) }, m.isNaN = function (t) { return m.isNumber(t) && t !== +t }, m.isBoolean = function (t) { return !0 === t || !1 === t || "[object Boolean]" === c.call(t) }, m.isNull = function (t) { return null === t }, m.isUndefined = function (t) { return void 0 === t }, m.has = function (t, e) { return null != t && p.call(t, e) }, m.noConflict = function () { return n._ = o, this }, m.identity = function (t) { return t }, m.constant = function (t) { return function () { return t } }, m.noop = function () { }, m.property = C, m.propertyOf = function (t) { return null == t ? function () { } : function (e) { return t[e] } }, m.matcher = m.matches = function (t) { return t = m.extendOwn({}, t), function (e) { return m.isMatch(e, t) } }, m.times = function (t, e, n) { var r = Array(Math.max(0, t)); e = _(e, n, 1); for (var o = 0; o < t; o++)r[o] = e(o); return r }, m.random = function (t, e) { return null == e && (e = t, t = 0), t + Math.floor(Math.random() * (e - t + 1)) }, m.now = Date.now || function () { return (new Date).getTime() }; var L = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;" }, N = m.invert(L), F = function (t) { var e = function (e) { return t[e] }, n = "(?:" + m.keys(t).join("|") + ")", r = RegExp(n), o = RegExp(n, "g"); return function (t) { return t = null == t ? "" : "" + t, r.test(t) ? t.replace(o, e) : t } }; m.escape = F(L), m.unescape = F(N), m.result = function (t, e, n) { var r = null == t ? void 0 : t[e]; return void 0 === r && (r = n), m.isFunction(r) ? r.call(t) : r }; var z = 0; m.uniqueId = function (t) { var e = ++z + ""; return t ? t + e : e }, m.templateSettings = { evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g }; var D = /(.)^/, V = { "'": "'", "\\": "\\", "\r": "r", "\n": "n", "\u2028": "u2028", "\u2029": "u2029" }, q = /\\|'|\r|\n|\u2028|\u2029/g, U = function (t) { return "\\" + V[t] }; m.template = function (t, e, n) { !e && n && (e = n), e = m.defaults({}, e, m.templateSettings); var r = RegExp([(e.escape || D).source, (e.interpolate || D).source, (e.evaluate || D).source].join("|") + "|$", "g"), o = 0, i = "__p+='"; t.replace(r, (function (e, n, r, a, s) { return i += t.slice(o, s).replace(q, U), o = s + e.length, n ? i += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? i += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : a && (i += "';\n" + a + "\n__p+='"), e })), i += "';\n", e.variable || (i = "with(obj||{}){\n" + i + "}\n"), i = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + i + "return __p;\n"; try { var a = new Function(e.variable || "obj", "_", i) } catch (t) { throw t.source = i, t } var s = function (t) { return a.call(this, t, m) }, l = e.variable || "obj"; return s.source = "function(" + l + "){\n" + i + "}", s }, m.chain = function (t) { var e = m(t); return e._chain = !0, e }; var W = function (t, e) { return t._chain ? m(e).chain() : e }; m.mixin = function (t) { m.each(m.functions(t), (function (e) { var n = m[e] = t[e]; m.prototype[e] = function () { var t = [this._wrapped]; return l.apply(t, arguments), W(this, n.apply(m, t)) } })) }, m.mixin(m), m.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], (function (t) { var e = i[t]; m.prototype[t] = function () { var n = this._wrapped; return e.apply(n, arguments), "shift" !== t && "splice" !== t || 0 !== n.length || delete n[0], W(this, n) } })), m.each(["concat", "join", "slice"], (function (t) { var e = i[t]; m.prototype[t] = function () { return W(this, e.apply(this._wrapped, arguments)) } })), m.prototype.value = function () { return this._wrapped }, m.prototype.valueOf = m.prototype.toJSON = m.prototype.value, m.prototype.toString = function () { return "" + this._wrapped }, void 0 === (r = function () { return m }.apply(e, [])) || (t.exports = r) }).call(this) }, function (t, e, n) { "use strict"; var r = n(4), o = "object" == typeof self && self && self.Object === Object && self, i = r.a || o || Function("return this")(); e.a = i }, function (t, e, n) { "use strict"; (function (t) { var r = n(4), o = "object" == typeof exports && exports && !exports.nodeType && exports, i = o && "object" == typeof t && t && !t.nodeType && t, a = i && i.exports === o && r.a.process, s = function () { try { var t = i && i.require && i.require("util").types; return t || a && a.binding && a.binding("util") } catch (t) { } }(); e.a = s }).call(this, n(6)(t)) }, function (t, e, n) { var r; !function (o, i) { var a = { Identity: function (t) { return t }, True: function () { return !0 }, Blank: function () { } }, s = "boolean", l = "number", u = "string", c = typeof {}, p = "undefined", h = "function", f = { "": a.Identity }, d = { createLambda: function (t) { if (null == t) return a.Identity; if (typeof t === u) { var e = f[t]; if (null != e) return e; if (-1 === t.indexOf("=>")) { for (var n, r = new RegExp("[$]+", "g"), o = 0; null != (n = r.exec(t));) { var i = n[0].length; i > o && (o = i) } for (var s = [], l = 1; l <= o; l++) { for (var c = "", p = 0; p < l; p++)c += "$"; s.push(c) } var h = Array.prototype.join.call(s, ","); return e = new Function(h, "return " + t), f[t] = e, e } var d = t.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/); return e = new Function(d[1], "return " + d[2]), f[t] = e, e } return t }, isIEnumerable: function (t) { if (typeof Enumerator !== p) try { return new Enumerator(t), !0 } catch (t) { } return !1 }, defineProperty: null != Object.defineProperties ? function (t, e, n) { Object.defineProperty(t, e, { enumerable: !1, configurable: !0, writable: !0, value: n }) } : function (t, e, n) { t[e] = n }, compare: function (t, e) { return t === e ? 0 : t > e ? 1 : -1 }, dispose: function (t) { null != t && t.dispose() }, hasNativeIteratorSupport: function () { return "undefined" != typeof Symbol && void 0 !== Symbol.iterator } }, y = 0, g = 1, m = 2, _ = function (t, e, n) { var r = new b, o = y; this.current = r.current, this.moveNext = function () { try { switch (o) { case y: o = g, t(); case g: return !!e.apply(r) || (this.dispose(), !1); case m: return !1 } } catch (t) { throw this.dispose(), t } }, this.dispose = function () { if (o == g) try { n() } finally { o = m } } }, b = function () { var t = null; this.current = function () { return t }, this.yieldReturn = function (e) { return t = e, !0 }, this.yieldBreak = function () { return !1 } }, v = function (t) { this.getEnumerator = t }; (v.Utils = {}).createLambda = function (t) { return d.createLambda(t) }, v.Utils.createEnumerable = function (t) { return new v(t) }, v.Utils.createEnumerator = function (t, e, n) { return new _(t, e, n) }, v.Utils.extendTo = function (t) { var e, n = t.prototype; for (var r in t === Array ? (e = S.prototype, d.defineProperty(n, "getSource", (function () { return this }))) : (e = v.prototype, d.defineProperty(n, "getEnumerator", (function () { return v.from(this).getEnumerator() }))), e) { var o = e[r]; n[r] != o && (null != n[r] && n[r += "ByLinq"] == o || o instanceof Function && d.defineProperty(n, r, o)) } }, v.choice = function () { var t = arguments; return new v((function () { return new _((function () { t = t[0] instanceof Array ? t[0] : null != t[0].getEnumerator ? t[0].toArray() : t }), (function () { return this.yieldReturn(t[Math.floor(Math.random() * t.length)]) }), a.Blank) })) }, v.cycle = function () { var t = arguments; return new v((function () { var e = 0; return new _((function () { t = t[0] instanceof Array ? t[0] : null != t[0].getEnumerator ? t[0].toArray() : t }), (function () { return e >= t.length && (e = 0), this.yieldReturn(t[e++]) }), a.Blank) })) }, v.empty = function () { return new v((function () { return new _(a.Blank, (function () { return !1 }), a.Blank) })) }, v.from = function (t) { if (null == t) return v.empty(); if (t instanceof v) return t; if (typeof t == l || typeof t == s) return v.repeat(t, 1); if (typeof t == u) return new v((function () { var e = 0; return new _(a.Blank, (function () { return e < t.length && this.yieldReturn(t.charAt(e++)) }), a.Blank) })); if (typeof t != h) { if (typeof t.length == l) return new S(t); if ("undefined" != typeof Symbol && void 0 !== t[Symbol.iterator]) return new v((function () { return new _(a.Blank, (function () { var e = t.next(); return !e.done && this.yieldReturn(e.value) }), a.Blank) })); if (!(t instanceof Object) && d.isIEnumerable(t)) return new v((function () { var e, n = !0; return new _((function () { e = new Enumerator(t) }), (function () { return n ? n = !1 : e.moveNext(), !e.atEnd() && this.yieldReturn(e.item()) }), a.Blank) })); if (typeof Windows === c && typeof t.first === h) return new v((function () { var e, n = !0; return new _((function () { e = t.first() }), (function () { return n ? n = !1 : e.moveNext(), e.hasCurrent ? this.yieldReturn(e.current) : this.yieldBreak() }), a.Blank) })) } return new v((function () { var e = [], n = 0; return new _((function () { for (var n in t) { var r = t[n]; r instanceof Function || !Object.prototype.hasOwnProperty.call(t, n) || e.push({ key: n, value: r }) } }), (function () { return n < e.length && this.yieldReturn(e[n++]) }), a.Blank) })) }, v.make = function (t) { return v.repeat(t, 1) }, v.matches = function (t, e, n) { return null == n && (n = ""), e instanceof RegExp && (n += e.ignoreCase ? "i" : "", n += e.multiline ? "m" : "", e = e.source), -1 === n.indexOf("g") && (n += "g"), new v((function () { var r; return new _((function () { r = new RegExp(e, n) }), (function () { var e = r.exec(t); return !!e && this.yieldReturn(e) }), a.Blank) })) }, v.range = function (t, e, n) { return null == n && (n = 1), new v((function () { var r, o = 0; return new _((function () { r = t - n }), (function () { return o++ < e ? this.yieldReturn(r += n) : this.yieldBreak() }), a.Blank) })) }, v.rangeDown = function (t, e, n) { return null == n && (n = 1), new v((function () { var r, o = 0; return new _((function () { r = t + n }), (function () { return o++ < e ? this.yieldReturn(r -= n) : this.yieldBreak() }), a.Blank) })) }, v.rangeTo = function (t, e, n) { return null == n && (n = 1), new v(t < e ? function () { var r; return new _((function () { r = t - n }), (function () { var t = r += n; return t <= e ? this.yieldReturn(t) : this.yieldBreak() }), a.Blank) } : function () { var r; return new _((function () { r = t + n }), (function () { var t = r -= n; return t >= e ? this.yieldReturn(t) : this.yieldBreak() }), a.Blank) }) }, v.repeat = function (t, e) { return null != e ? v.repeat(t).take(e) : new v((function () { return new _(a.Blank, (function () { return this.yieldReturn(t) }), a.Blank) })) }, v.repeatWithFinalize = function (t, e) { return t = d.createLambda(t), e = d.createLambda(e), new v((function () { var n; return new _((function () { n = t() }), (function () { return this.yieldReturn(n) }), (function () { null != n && (e(n), n = null) })) })) }, v.generate = function (t, e) { return null != e ? v.generate(t).take(e) : (t = d.createLambda(t), new v((function () { return new _(a.Blank, (function () { return this.yieldReturn(t()) }), a.Blank) }))) }, v.toInfinity = function (t, e) { return null == t && (t = 0), null == e && (e = 1), new v((function () { var n; return new _((function () { n = t - e }), (function () { return this.yieldReturn(n += e) }), a.Blank) })) }, v.toNegativeInfinity = function (t, e) { return null == t && (t = 0), null == e && (e = 1), new v((function () { var n; return new _((function () { n = t + e }), (function () { return this.yieldReturn(n -= e) }), a.Blank) })) }, v.unfold = function (t, e) { return e = d.createLambda(e), new v((function () { var n, r = !0; return new _(a.Blank, (function () { return r ? (r = !1, n = t, this.yieldReturn(n)) : (n = e(n), this.yieldReturn(n)) }), a.Blank) })) }, v.defer = function (t) { return new v((function () { var e; return new _((function () { e = v.from(t()).getEnumerator() }), (function () { return e.moveNext() ? this.yieldReturn(e.current()) : this.yieldBreak() }), (function () { d.dispose(e) })) })) }, v.prototype.traverseBreadthFirst = function (t, e) { var n = this; return t = d.createLambda(t), e = d.createLambda(e), new v((function () { var r, o = 0, i = []; return new _((function () { r = n.getEnumerator() }), (function () { for (; ;) { if (r.moveNext()) return i.push(r.current()), this.yieldReturn(e(r.current(), o)); var n = v.from(i).selectMany((function (e) { return t(e) })); if (!n.any()) return !1; o++, i = [], d.dispose(r), r = n.getEnumerator() } }), (function () { d.dispose(r) })) })) }, v.prototype.traverseDepthFirst = function (t, e) { var n = this; return t = d.createLambda(t), e = d.createLambda(e), new v((function () { var r, o = []; return new _((function () { r = n.getEnumerator() }), (function () { for (; ;) { if (r.moveNext()) { var n = e(r.current(), o.length); return o.push(r), r = v.from(t(r.current())).getEnumerator(), this.yieldReturn(n) } if (o.length <= 0) return !1; d.dispose(r), r = o.pop() } }), (function () { try { d.dispose(r) } finally { v.from(o).forEach((function (t) { t.dispose() })) } })) })) }, v.prototype.flatten = function () { var t = this; return new v((function () { var e, n = null; return new _((function () { e = t.getEnumerator() }), (function () { for (; ;) { if (null != n) { if (n.moveNext()) return this.yieldReturn(n.current()); n = null } if (e.moveNext()) { if (e.current() instanceof Array) { d.dispose(n), n = v.from(e.current()).selectMany(a.Identity).flatten().getEnumerator(); continue } return this.yieldReturn(e.current()) } return !1 } }), (function () { try { d.dispose(e) } finally { d.dispose(n) } })) })) }, v.prototype.pairwise = function (t) { var e = this; return t = d.createLambda(t), new v((function () { var n; return new _((function () { (n = e.getEnumerator()).moveNext() }), (function () { var e = n.current(); return !!n.moveNext() && this.yieldReturn(t(e, n.current())) }), (function () { d.dispose(n) })) })) }, v.prototype.scan = function (t, e) { var n; null == e ? (e = d.createLambda(t), n = !1) : (e = d.createLambda(e), n = !0); var r = this; return new v((function () { var o, i, a = !0; return new _((function () { o = r.getEnumerator() }), (function () { if (a) { if (a = !1, n) return this.yieldReturn(i = t); if (o.moveNext()) return this.yieldReturn(i = o.current()) } return !!o.moveNext() && this.yieldReturn(i = e(i, o.current())) }), (function () { d.dispose(o) })) })) }, v.prototype.select = function (t) { if ((t = d.createLambda(t)).length <= 1) return new O(this, null, t); var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { return !!n.moveNext() && this.yieldReturn(t(n.current(), r++)) }), (function () { d.dispose(n) })) })) }, v.prototype.selectMany = function (t, e) { var n = this; return t = d.createLambda(t), null == e && (e = function (t, e) { return e }), e = d.createLambda(e), new v((function () { var r, o = void 0, i = 0; return new _((function () { r = n.getEnumerator() }), (function () { if (void 0 === o && !r.moveNext()) return !1; do { if (null == o) { var n = t(r.current(), i++); o = v.from(n).getEnumerator() } if (o.moveNext()) return this.yieldReturn(e(r.current(), o.current())); d.dispose(o), o = null } while (r.moveNext()); return !1 }), (function () { try { d.dispose(r) } finally { d.dispose(o) } })) })) }, v.prototype.where = function (t) { if ((t = d.createLambda(t)).length <= 1) return new x(this, t); var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { for (; n.moveNext();)if (t(n.current(), r++)) return this.yieldReturn(n.current()); return !1 }), (function () { d.dispose(n) })) })) }, v.prototype.choose = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { for (; n.moveNext();) { var e = t(n.current(), r++); if (null != e) return this.yieldReturn(e) } return this.yieldBreak() }), (function () { d.dispose(n) })) })) }, v.prototype.ofType = function (t) { var e; switch (t) { case Number: e = l; break; case String: e = u; break; case Boolean: e = s; break; case Function: e = h; break; default: e = null }return null === e ? this.where((function (e) { return e instanceof t })) : this.where((function (t) { return typeof t === e })) }, v.prototype.zip = function () { var t = arguments, e = d.createLambda(arguments[arguments.length - 1]), n = this; if (2 == arguments.length) { var r = arguments[0]; return new v((function () { var t, o, i = 0; return new _((function () { t = n.getEnumerator(), o = v.from(r).getEnumerator() }), (function () { return !(!t.moveNext() || !o.moveNext()) && this.yieldReturn(e(t.current(), o.current(), i++)) }), (function () { try { d.dispose(t) } finally { d.dispose(o) } })) })) } return new v((function () { var r, o = 0; return new _((function () { var e = v.make(n).concat(v.from(t).takeExceptLast().select(v.from)).select((function (t) { return t.getEnumerator() })).toArray(); r = v.from(e) }), (function () { if (r.all((function (t) { return t.moveNext() }))) { var t = r.select((function (t) { return t.current() })).toArray(); return t.push(o++), this.yieldReturn(e.apply(null, t)) } return this.yieldBreak() }), (function () { v.from(r).forEach(d.dispose) })) })) }, v.prototype.merge = function () { var t = arguments, e = this; return new v((function () { var n, r = -1; return new _((function () { n = v.make(e).concat(v.from(t).select(v.from)).select((function (t) { return t.getEnumerator() })).toArray() }), (function () { for (; n.length > 0;) { r = r >= n.length - 1 ? 0 : r + 1; var t = n[r]; if (t.moveNext()) return this.yieldReturn(t.current()); t.dispose(), n.splice(r--, 1) } return this.yieldBreak() }), (function () { v.from(n).forEach(d.dispose) })) })) }, v.prototype.join = function (t, e, n, r, o) { e = d.createLambda(e), n = d.createLambda(n), r = d.createLambda(r), o = d.createLambda(o); var i = this; return new v((function () { var s, l, u = null, c = 0; return new _((function () { s = i.getEnumerator(), l = v.from(t).toLookup(n, a.Identity, o) }), (function () { for (; ;) { if (null != u) { var t = u[c++]; if (void 0 !== t) return this.yieldReturn(r(s.current(), t)); t = null, c = 0 } if (!s.moveNext()) return !1; var n = e(s.current()); u = l.get(n).toArray() } }), (function () { d.dispose(s) })) })) }, v.prototype.groupJoin = function (t, e, n, r, o) { e = d.createLambda(e), n = d.createLambda(n), r = d.createLambda(r), o = d.createLambda(o); var i = this; return new v((function () { var s = i.getEnumerator(), l = null; return new _((function () { s = i.getEnumerator(), l = v.from(t).toLookup(n, a.Identity, o) }), (function () { if (s.moveNext()) { var t = l.get(e(s.current())); return this.yieldReturn(r(s.current(), t)) } return !1 }), (function () { d.dispose(s) })) })) }, v.prototype.all = function (t) { t = d.createLambda(t); var e = !0; return this.forEach((function (n) { if (!t(n)) return e = !1, !1 })), e }, v.prototype.any = function (t) { t = d.createLambda(t); var e = this.getEnumerator(); try { if (0 == arguments.length) return e.moveNext(); for (; e.moveNext();)if (t(e.current())) return !0; return !1 } finally { d.dispose(e) } }, v.prototype.isEmpty = function () { return !this.any() }, v.prototype.concat = function () { var t = this; if (1 == arguments.length) { var e = arguments[0]; return new v((function () { var n, r; return new _((function () { n = t.getEnumerator() }), (function () { if (null == r) { if (n.moveNext()) return this.yieldReturn(n.current()); r = v.from(e).getEnumerator() } return !!r.moveNext() && this.yieldReturn(r.current()) }), (function () { try { d.dispose(n) } finally { d.dispose(r) } })) })) } var n = arguments; return new v((function () { var e; return new _((function () { e = v.make(t).concat(v.from(n).select(v.from)).select((function (t) { return t.getEnumerator() })).toArray() }), (function () { for (; e.length > 0;) { var t = e[0]; if (t.moveNext()) return this.yieldReturn(t.current()); t.dispose(), e.splice(0, 1) } return this.yieldBreak() }), (function () { v.from(e).forEach(d.dispose) })) })) }, v.prototype.insert = function (t, e) { var n = this; return new v((function () { var r, o, i = 0, a = !1; return new _((function () { r = n.getEnumerator(), o = v.from(e).getEnumerator() }), (function () { return i == t && o.moveNext() ? (a = !0, this.yieldReturn(o.current())) : r.moveNext() ? (i++, this.yieldReturn(r.current())) : !(a || !o.moveNext()) && this.yieldReturn(o.current()) }), (function () { try { d.dispose(r) } finally { d.dispose(o) } })) })) }, v.prototype.alternate = function (t) { var e = this; return new v((function () { var n, r, o, i; return new _((function () { o = t instanceof Array || null != t.getEnumerator ? v.from(v.from(t).toArray()) : v.make(t), (r = e.getEnumerator()).moveNext() && (n = r.current()) }), (function () { for (; ;) { if (null != i) { if (i.moveNext()) return this.yieldReturn(i.current()); i = null } if (null != n || !r.moveNext()) { if (null != n) { var t = n; return n = null, this.yieldReturn(t) } return this.yieldBreak() } n = r.current(), i = o.getEnumerator() } }), (function () { try { d.dispose(r) } finally { d.dispose(i) } })) })) }, v.prototype.contains = function (t, e) { e = d.createLambda(e); var n = this.getEnumerator(); try { for (; n.moveNext();)if (e(n.current()) === t) return !0; return !1 } finally { d.dispose(n) } }, v.prototype.defaultIfEmpty = function (t) { var e = this; return void 0 === t && (t = null), new v((function () { var n, r = !0; return new _((function () { n = e.getEnumerator() }), (function () { return n.moveNext() ? (r = !1, this.yieldReturn(n.current())) : !!r && (r = !1, this.yieldReturn(t)) }), (function () { d.dispose(n) })) })) }, v.prototype.distinct = function (t) { return this.except(v.empty(), t) }, v.prototype.distinctUntilChanged = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n, r, o; return new _((function () { n = e.getEnumerator() }), (function () { for (; n.moveNext();) { var e = t(n.current()); if (o) return o = !1, r = e, this.yieldReturn(n.current()); if (r !== e) return r = e, this.yieldReturn(n.current()) } return this.yieldBreak() }), (function () { d.dispose(n) })) })) }, v.prototype.except = function (t, e) { e = d.createLambda(e); var n = this; return new v((function () { var r, o; return new _((function () { r = n.getEnumerator(), o = new I(e), v.from(t).forEach((function (t) { o.add(t) })) }), (function () { for (; r.moveNext();) { var t = r.current(); if (!o.contains(t)) return o.add(t), this.yieldReturn(t) } return !1 }), (function () { d.dispose(r) })) })) }, v.prototype.intersect = function (t, e) { e = d.createLambda(e); var n = this; return new v((function () { var r, o, i; return new _((function () { r = n.getEnumerator(), o = new I(e), v.from(t).forEach((function (t) { o.add(t) })), i = new I(e) }), (function () { for (; r.moveNext();) { var t = r.current(); if (!i.contains(t) && o.contains(t)) return i.add(t), this.yieldReturn(t) } return !1 }), (function () { d.dispose(r) })) })) }, v.prototype.sequenceEqual = function (t, e) { e = d.createLambda(e); var n = this.getEnumerator(); try { var r = v.from(t).getEnumerator(); try { for (; n.moveNext();)if (!r.moveNext() || e(n.current()) !== e(r.current())) return !1; return !r.moveNext() } finally { d.dispose(r) } } finally { d.dispose(n) } }, v.prototype.union = function (t, e) { e = d.createLambda(e); var n = this; return new v((function () { var r, o, i; return new _((function () { r = n.getEnumerator(), i = new I(e) }), (function () { var e; if (void 0 === o) { for (; r.moveNext();)if (e = r.current(), !i.contains(e)) return i.add(e), this.yieldReturn(e); o = v.from(t).getEnumerator() } for (; o.moveNext();)if (e = o.current(), !i.contains(e)) return i.add(e), this.yieldReturn(e); return !1 }), (function () { try { d.dispose(r) } finally { d.dispose(o) } })) })) }, v.prototype.orderBy = function (t) { return new w(this, t, !1) }, v.prototype.orderByDescending = function (t) { return new w(this, t, !0) }, v.prototype.reverse = function () { var t = this; return new v((function () { var e, n; return new _((function () { e = t.toArray(), n = e.length }), (function () { return n > 0 && this.yieldReturn(e[--n]) }), a.Blank) })) }, v.prototype.shuffle = function () { var t = this; return new v((function () { var e; return new _((function () { e = t.toArray() }), (function () { if (e.length > 0) { var t = Math.floor(Math.random() * e.length); return this.yieldReturn(e.splice(t, 1)[0]) } return !1 }), a.Blank) })) }, v.prototype.weightedSample = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.choose((function (e) { var n = t(e); return n <= 0 ? null : { value: e, bound: r += n } })).toArray() }), (function () { if (n.length > 0) { for (var t = Math.floor(Math.random() * r) + 1, e = -1, o = n.length; o - e > 1;) { var i = Math.floor((e + o) / 2); n[i].bound >= t ? o = i : e = i } return this.yieldReturn(n[o].value) } return this.yieldBreak() }), a.Blank) })) }, v.prototype.groupBy = function (t, e, n, r) { var o = this; return t = d.createLambda(t), e = d.createLambda(e), null != n && (n = d.createLambda(n)), r = d.createLambda(r), new v((function () { var i; return new _((function () { i = o.toLookup(t, e, r).toEnumerable().getEnumerator() }), (function () { for (; i.moveNext();)return null == n ? this.yieldReturn(i.current()) : this.yieldReturn(n(i.current().key(), i.current())); return !1 }), (function () { d.dispose(i) })) })) }, v.prototype.partitionBy = function (t, e, n, r) { var o, i = this; return t = d.createLambda(t), e = d.createLambda(e), r = d.createLambda(r), null == n ? (o = !1, n = function (t, e) { return new k(t, e) }) : (o = !0, n = d.createLambda(n)), new v((function () { var a, s, l, u = []; return new _((function () { (a = i.getEnumerator()).moveNext() && (s = t(a.current()), l = r(s), u.push(e(a.current()))) }), (function () { for (var i; 1 == (i = a.moveNext()) && l === r(t(a.current()));)u.push(e(a.current())); if (u.length > 0) { var c = n(s, o ? v.from(u) : u); return i ? (s = t(a.current()), l = r(s), u = [e(a.current())]) : u = [], this.yieldReturn(c) } return !1 }), (function () { d.dispose(a) })) })) }, v.prototype.buffer = function (t) { var e = this; return new v((function () { var n; return new _((function () { n = e.getEnumerator() }), (function () { for (var e = [], r = 0; n.moveNext();)if (e.push(n.current()), ++r >= t) return this.yieldReturn(e); return e.length > 0 && this.yieldReturn(e) }), (function () { d.dispose(n) })) })) }, v.prototype.aggregate = function (t, e, n) { return (n = d.createLambda(n))(this.scan(t, e, n).last()) }, v.prototype.average = function (t) { t = d.createLambda(t); var e = 0, n = 0; return this.forEach((function (r) { e += t(r), ++n })), e / n }, v.prototype.count = function (t) { t = null == t ? a.True : d.createLambda(t); var e = 0; return this.forEach((function (n, r) { t(n, r) && ++e })), e }, v.prototype.max = function (t) { return null == t && (t = a.Identity), this.select(t).aggregate((function (t, e) { return t > e ? t : e })) }, v.prototype.min = function (t) { return null == t && (t = a.Identity), this.select(t).aggregate((function (t, e) { return t < e ? t : e })) }, v.prototype.maxBy = function (t) { return t = d.createLambda(t), this.aggregate((function (e, n) { return t(e) > t(n) ? e : n })) }, v.prototype.minBy = function (t) { return t = d.createLambda(t), this.aggregate((function (e, n) { return t(e) < t(n) ? e : n })) }, v.prototype.sum = function (t) { return null == t && (t = a.Identity), this.select(t).aggregate(0, (function (t, e) { return t + e })) }, v.prototype.elementAt = function (t) { var e, n = !1; if (this.forEach((function (r, o) { if (o == t) return e = r, n = !0, !1 })), !n) throw new Error("index is less than 0 or greater than or equal to the number of elements in source."); return e }, v.prototype.elementAtOrDefault = function (t, e) { var n; void 0 === e && (e = null); var r = !1; return this.forEach((function (e, o) { if (o == t) return n = e, r = !0, !1 })), r ? n : e }, v.prototype.first = function (t) { if (null != t) return this.where(t).first(); var e, n = !1; if (this.forEach((function (t) { return e = t, n = !0, !1 })), !n) throw new Error("first:No element satisfies the condition."); return e }, v.prototype.firstOrDefault = function (t, e) { if (void 0 !== t) { if (typeof t === h || typeof d.createLambda(t) === h) return this.where(t).firstOrDefault(void 0, e); e = t } var n, r = !1; return this.forEach((function (t) { return n = t, r = !0, !1 })), r ? n : e }, v.prototype.last = function (t) { if (null != t) return this.where(t).last(); var e, n = !1; if (this.forEach((function (t) { n = !0, e = t })), !n) throw new Error("last:No element satisfies the condition."); return e }, v.prototype.lastOrDefault = function (t, e) { if (void 0 !== t) { if (typeof t === h || typeof d.createLambda(t) === h) return this.where(t).lastOrDefault(void 0, e); e = t } var n, r = !1; return this.forEach((function (t) { r = !0, n = t })), r ? n : e }, v.prototype.single = function (t) { if (null != t) return this.where(t).single(); var e, n = !1; if (this.forEach((function (t) { if (n) throw new Error("single:sequence contains more than one element."); n = !0, e = t })), !n) throw new Error("single:No element satisfies the condition."); return e }, v.prototype.singleOrDefault = function (t, e) { if (void 0 === e && (e = null), null != t) return this.where(t).singleOrDefault(null, e); var n, r = !1; return this.forEach((function (t) { if (r) throw new Error("single:sequence contains more than one element."); r = !0, n = t })), r ? n : e }, v.prototype.skip = function (t) { var e = this; return new v((function () { var n, r = 0; return new _((function () { for (n = e.getEnumerator(); r++ < t && n.moveNext();); }), (function () { return !!n.moveNext() && this.yieldReturn(n.current()) }), (function () { d.dispose(n) })) })) }, v.prototype.skipWhile = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n, r = 0, o = !1; return new _((function () { n = e.getEnumerator() }), (function () { for (; !o;) { if (!n.moveNext()) return !1; if (!t(n.current(), r++)) return o = !0, this.yieldReturn(n.current()) } return !!n.moveNext() && this.yieldReturn(n.current()) }), (function () { d.dispose(n) })) })) }, v.prototype.take = function (t) { var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { return !!(r++ < t && n.moveNext()) && this.yieldReturn(n.current()) }), (function () { d.dispose(n) })) })) }, v.prototype.takeWhile = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { return !(!n.moveNext() || !t(n.current(), r++)) && this.yieldReturn(n.current()) }), (function () { d.dispose(n) })) })) }, v.prototype.takeExceptLast = function (t) { null == t && (t = 1); var e = this; return new v((function () { if (t <= 0) return e.getEnumerator(); var n, r = []; return new _((function () { n = e.getEnumerator() }), (function () { for (; n.moveNext();) { if (r.length == t) return r.push(n.current()), this.yieldReturn(r.shift()); r.push(n.current()) } return !1 }), (function () { d.dispose(n) })) })) }, v.prototype.takeFromLast = function (t) { if (t <= 0 || null == t) return v.empty(); var e = this; return new v((function () { var n, r, o = []; return new _((function () { n = e.getEnumerator() }), (function () { for (; n.moveNext();)o.length == t && o.shift(), o.push(n.current()); return null == r && (r = v.from(o).getEnumerator()), !!r.moveNext() && this.yieldReturn(r.current()) }), (function () { d.dispose(r) })) })) }, v.prototype.indexOf = function (t) { var e = null; return typeof t === h ? this.forEach((function (n, r) { if (t(n, r)) return e = r, !1 })) : this.forEach((function (n, r) { if (n === t) return e = r, !1 })), null !== e ? e : -1 }, v.prototype.lastIndexOf = function (t) { var e = -1; return typeof t === h ? this.forEach((function (n, r) { t(n, r) && (e = r) })) : this.forEach((function (n, r) { n === t && (e = r) })), e }, v.prototype.cast = function () { return this }, v.prototype.asEnumerable = function () { return v.from(this) }, v.prototype.toArray = function () { var t = []; return this.forEach((function (e) { t.push(e) })), t }, v.prototype.toLookup = function (t, e, n) { t = d.createLambda(t), e = d.createLambda(e), n = d.createLambda(n); var r = new I(n); return this.forEach((function (n) { var o = t(n), i = e(n), a = r.get(o); void 0 !== a ? a.push(i) : r.add(o, [i]) })), new j(r) }, v.prototype.toObject = function (t, e) { t = d.createLambda(t), e = d.createLambda(e); var n = {}; return this.forEach((function (r) { n[t(r)] = e(r) })), n }, v.prototype.toDictionary = function (t, e, n) { t = d.createLambda(t), e = d.createLambda(e), n = d.createLambda(n); var r = new I(n); return this.forEach((function (n) { r.add(t(n), e(n)) })), r }, v.prototype.toJSONString = function (t, e) { if (typeof JSON === p || null == JSON.stringify) throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js"); return JSON.stringify(this.toArray(), t, e) }, v.prototype.toJoinedString = function (t, e) { return null == t && (t = ""), null == e && (e = a.Identity), this.select(e).toArray().join(t) }, v.prototype.doAction = function (t) { var e = this; return t = d.createLambda(t), new v((function () { var n, r = 0; return new _((function () { n = e.getEnumerator() }), (function () { return !!n.moveNext() && (t(n.current(), r++), this.yieldReturn(n.current())) }), (function () { d.dispose(n) })) })) }, v.prototype.forEach = function (t) { t = d.createLambda(t); var e = 0, n = this.getEnumerator(); try { for (; n.moveNext() && !1 !== t(n.current(), e++);); } finally { d.dispose(n) } }, v.prototype.write = function (t, e) { null == t && (t = ""), e = d.createLambda(e); var n = !0; this.forEach((function (r) { n ? n = !1 : document.write(t), document.write(e(r)) })) }, v.prototype.writeLine = function (t) { t = d.createLambda(t), this.forEach((function (e) { document.writeln(t(e) + "<br />") })) }, v.prototype.force = function () { var t = this.getEnumerator(); try { for (; t.moveNext();); } finally { d.dispose(t) } }, v.prototype.letBind = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n; return new _((function () { n = v.from(t(e)).getEnumerator() }), (function () { return !!n.moveNext() && this.yieldReturn(n.current()) }), (function () { d.dispose(n) })) })) }, v.prototype.share = function () { var t, e = this, n = !1; return new P((function () { return new _((function () { null == t && (t = e.getEnumerator()) }), (function () { if (n) throw new Error("enumerator is disposed"); return !!t.moveNext() && this.yieldReturn(t.current()) }), a.Blank) }), (function () { n = !0, d.dispose(t) })) }, v.prototype.memoize = function () { var t, e, n = this, r = !1; return new P((function () { var o = -1; return new _((function () { null == e && (e = n.getEnumerator(), t = []) }), (function () { if (r) throw new Error("enumerator is disposed"); return o++, t.length <= o ? !!e.moveNext() && this.yieldReturn(t[o] = e.current()) : this.yieldReturn(t[o]) }), a.Blank) }), (function () { r = !0, d.dispose(e), t = null })) }, d.hasNativeIteratorSupport() && (v.prototype[Symbol.iterator] = function () { return { enumerator: this.getEnumerator(), next: function () { return this.enumerator.moveNext() ? { done: !1, value: this.enumerator.current() } : { done: !0 } } } }), v.prototype.catchError = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n; return new _((function () { n = e.getEnumerator() }), (function () { try { return !!n.moveNext() && this.yieldReturn(n.current()) } catch (e) { return t(e), !1 } }), (function () { d.dispose(n) })) })) }, v.prototype.finallyAction = function (t) { t = d.createLambda(t); var e = this; return new v((function () { var n; return new _((function () { n = e.getEnumerator() }), (function () { return !!n.moveNext() && this.yieldReturn(n.current()) }), (function () { try { d.dispose(n) } finally { t() } })) })) }, v.prototype.log = function (t) { return t = d.createLambda(t), this.doAction((function (e) { typeof console !== p && console.log(t(e)) })) }, v.prototype.trace = function (t, e) { return null == t && (t = "Trace"), e = d.createLambda(e), this.doAction((function (n) { typeof console !== p && console.log(t, e(n)) })) }; var w = function (t, e, n, r) { this.source = t, this.keySelector = d.createLambda(e), this.descending = n, this.parent = r }; w.prototype = new v, w.prototype.createOrderedEnumerable = function (t, e) { return new w(this.source, t, e, this) }, w.prototype.thenBy = function (t) { return this.createOrderedEnumerable(t, !1) }, w.prototype.thenByDescending = function (t) { return this.createOrderedEnumerable(t, !0) }, w.prototype.getEnumerator = function () { var t, e, n = this, r = 0; return new _((function () { t = [], e = [], n.source.forEach((function (n, r) { t.push(n), e.push(r) })); var r = C.create(n, null); r.GenerateKeys(t), e.sort((function (t, e) { return r.compare(t, e) })) }), (function () { return r < e.length && this.yieldReturn(t[e[r++]]) }), a.Blank) }; var C = function (t, e, n) { this.keySelector = t, this.descending = e, this.child = n, this.keys = null }; C.create = function (t, e) { var n = new C(t.keySelector, t.descending, e); return null != t.parent ? C.create(t.parent, n) : n }, C.prototype.GenerateKeys = function (t) { for (var e = t.length, n = this.keySelector, r = new Array(e), o = 0; o < e; o++)r[o] = n(t[o]); this.keys = r, null != this.child && this.child.GenerateKeys(t) }, C.prototype.compare = function (t, e) { var n = d.compare(this.keys[t], this.keys[e]); return 0 == n ? null != this.child ? this.child.compare(t, e) : d.compare(t, e) : this.descending ? -n : n }; var P = function (t, e) { this.dispose = e, v.call(this, t) }; P.prototype = new v; var S = function (t) { this.getSource = function () { return t } }; S.prototype = new v, S.prototype.any = function (t) { return null == t ? this.getSource().length > 0 : v.prototype.any.apply(this, arguments) }, S.prototype.count = function (t) { return null == t ? this.getSource().length : v.prototype.count.apply(this, arguments) }, S.prototype.elementAt = function (t) { var e = this.getSource(); return 0 <= t && t < e.length ? e[t] : v.prototype.elementAt.apply(this, arguments) }, S.prototype.elementAtOrDefault = function (t, e) { void 0 === e && (e = null); var n = this.getSource(); return 0 <= t && t < n.length ? n[t] : e }, S.prototype.first = function (t) { var e = this.getSource(); return null == t && e.length > 0 ? e[0] : v.prototype.first.apply(this, arguments) }, S.prototype.firstOrDefault = function (t, e) { if (void 0 !== t) return v.prototype.firstOrDefault.apply(this, arguments); e = t; var n = this.getSource(); return n.length > 0 ? n[0] : e }, S.prototype.last = function (t) { var e = this.getSource(); return null == t && e.length > 0 ? e[e.length - 1] : v.prototype.last.apply(this, arguments) }, S.prototype.lastOrDefault = function (t, e) { if (void 0 !== t) return v.prototype.lastOrDefault.apply(this, arguments); e = t; var n = this.getSource(); return n.length > 0 ? n[n.length - 1] : e }, S.prototype.skip = function (t) { var e = this.getSource(); return new v((function () { var n; return new _((function () { n = t < 0 ? 0 : t }), (function () { return n < e.length && this.yieldReturn(e[n++]) }), a.Blank) })) }, S.prototype.takeExceptLast = function (t) { return null == t && (t = 1), this.take(this.getSource().length - t) }, S.prototype.takeFromLast = function (t) { return this.skip(this.getSource().length - t) }, S.prototype.reverse = function () { var t = this.getSource(); return new v((function () { var e; return new _((function () { e = t.length }), (function () { return e > 0 && this.yieldReturn(t[--e]) }), a.Blank) })) }, S.prototype.sequenceEqual = function (t, e) { return (!(t instanceof S || t instanceof Array) || null != e || v.from(t).count() == this.count()) && v.prototype.sequenceEqual.apply(this, arguments) }, S.prototype.toJoinedString = function (t, e) { var n = this.getSource(); return null == e && n instanceof Array ? (null == t && (t = ""), n.join(t)) : v.prototype.toJoinedString.apply(this, arguments) }, S.prototype.getEnumerator = function () { var t = this.getSource(), e = -1; return { current: function () { return t[e] }, moveNext: function () { return ++e < t.length }, dispose: a.Blank } }; var x = function (t, e) { this.prevSource = t, this.prevPredicate = e }; x.prototype = new v, x.prototype.where = function (t) { if ((t = d.createLambda(t)).length <= 1) { var e = this.prevPredicate; return new x(this.prevSource, (function (n) { return e(n) && t(n) })) } return v.prototype.where.call(this, t) }, x.prototype.select = function (t) { return (t = d.createLambda(t)).length <= 1 ? new O(this.prevSource, this.prevPredicate, t) : v.prototype.select.call(this, t) }, x.prototype.getEnumerator = function () { var t, e = this.prevPredicate, n = this.prevSource; return new _((function () { t = n.getEnumerator() }), (function () { for (; t.moveNext();)if (e(t.current())) return this.yieldReturn(t.current()); return !1 }), (function () { d.dispose(t) })) }; var O = function (t, e, n) { this.prevSource = t, this.prevPredicate = e, this.prevSelector = n }; O.prototype = new v, O.prototype.where = function (t) { return (t = d.createLambda(t)).length <= 1 ? new x(this, t) : v.prototype.where.call(this, t) }, O.prototype.select = function (t) { if ((t = d.createLambda(t)).length <= 1) { var e = this.prevSelector; return new O(this.prevSource, this.prevPredicate, (function (n) { return t(e(n)) })) } return v.prototype.select.call(this, t) }, O.prototype.getEnumerator = function () { var t, e = this.prevPredicate, n = this.prevSelector, r = this.prevSource; return new _((function () { t = r.getEnumerator() }), (function () { for (; t.moveNext();)if (null == e || e(t.current())) return this.yieldReturn(n(t.current())); return !1 }), (function () { d.dispose(t) })) }; var I = function () { var t = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, e = function (t) { return null === t ? "null" : void 0 === t ? "undefined" : typeof t.toString === h ? t.toString() : Object.prototype.toString.call(t) }, n = function (t, e) { this.key = t, this.value = e, this.prev = null, this.next = null }, r = function () { this.first = null, this.last = null }; r.prototype = { addLast: function (t) { null != this.last ? (this.last.next = t, t.prev = this.last, this.last = t) : this.first = this.last = t }, replace: function (t, e) { null != t.prev ? (t.prev.next = e, e.prev = t.prev) : this.first = e, null != t.next ? (t.next.prev = e, e.next = t.next) : this.last = e }, remove: function (t) { null != t.prev ? t.prev.next = t.next : this.first = t.next, null != t.next ? t.next.prev = t.prev : this.last = t.prev } }; var o = function (t) { this.countField = 0, this.entryList = new r, this.buckets = {}, this.compareSelector = null == t ? a.Identity : t }; return o.prototype = { add: function (r, o) { var i = this.compareSelector(r), a = e(i), s = new n(r, o); if (t(this.buckets, a)) { for (var l = this.buckets[a], u = 0; u < l.length; u++)if (this.compareSelector(l[u].key) === i) return this.entryList.replace(l[u], s), void (l[u] = s); l.push(s) } else this.buckets[a] = [s]; this.countField++, this.entryList.addLast(s) }, get: function (n) { var r = this.compareSelector(n), o = e(r); if (t(this.buckets, o)) for (var i = this.buckets[o], a = 0; a < i.length; a++) { var s = i[a]; if (this.compareSelector(s.key) === r) return s.value } }, set: function (r, o) { var i = this.compareSelector(r), a = e(i); if (t(this.buckets, a)) for (var s = this.buckets[a], l = 0; l < s.length; l++)if (this.compareSelector(s[l].key) === i) { var u = new n(r, o); return this.entryList.replace(s[l], u), s[l] = u, !0 } return !1 }, contains: function (n) { var r = this.compareSelector(n), o = e(r); if (!t(this.buckets, o)) return !1; for (var i = this.buckets[o], a = 0; a < i.length; a++)if (this.compareSelector(i[a].key) === r) return !0; return !1 }, clear: function () { this.countField = 0, this.buckets = {}, this.entryList = new r }, remove: function (n) { var r = this.compareSelector(n), o = e(r); if (t(this.buckets, o)) for (var i = this.buckets[o], a = 0; a < i.length; a++)if (this.compareSelector(i[a].key) === r) return this.entryList.remove(i[a]), i.splice(a, 1), 0 == i.length && delete this.buckets[o], void this.countField-- }, count: function () { return this.countField }, toEnumerable: function () { var t = this; return new v((function () { var e; return new _((function () { e = t.entryList.first }), (function () { if (null != e) { var t = { key: e.key, value: e.value }; return e = e.next, this.yieldReturn(t) } return !1 }), a.Blank) })) } }, o }(), j = function (t) { this.count = function () { return t.count() }, this.get = function (e) { return v.from(t.get(e)) }, this.contains = function (e) { return t.contains(e) }, this.toEnumerable = function () { return t.toEnumerable().select((function (t) { return new k(t.key, t.value) })) } }, k = function (t, e) { this.key = function () { return t }, S.call(this, e) }; k.prototype = new S, "function" === h && n(12) ? void 0 === (r = function () { return v }.apply(e, [])) || (t.exports = r) : typeof t !== p && t.exports ? t.exports = v : o.Enumerable = v }(this) }, function (t, e, n) { "use strict"; (function (t) { var n = "object" == typeof t && t && t.Object === Object && t; e.a = n }).call(this, n(11)) }, function (t, e, n) { "use strict"; (function (t) { var r = n(1), o = n(9), i = "object" == typeof exports && exports && !exports.nodeType && exports, a = i && "object" == typeof t && t && !t.nodeType && t, s = a && a.exports === i ? r.a.Buffer : void 0, l = (s ? s.isBuffer : void 0) || o.a; e.a = l }).call(this, n(6)(t)) }, function (t, e) { t.exports = function (t) { if (!t.webpackPolyfill) { var e = Object.create(t); e.children || (e.children = []), Object.defineProperty(e, "loaded", { enumerable: !0, get: function () { return e.l } }), Object.defineProperty(e, "id", { enumerable: !0, get: function () { return e.i } }), Object.defineProperty(e, "exports", { enumerable: !0 }), e.webpackPolyfill = 1 } return e } }, function (module, exports, __webpack_require__) { "use strict"; function decycle(t) { var e = [], n = []; return function t(r, o) { var i, a, s, l = r && r.toJSON instanceof Function ? r.toJSON() : r; if ("object" == typeof l && null !== l) { for (i = 0; i < e.length; i += 1)if (e[i] === l) return { $ref: n[i] }; if (e.push(l), n.push(o), "[object Array]" === Object.prototype.toString.apply(l)) for (s = [], i = 0; i < l.length; i += 1)s[i] = t(l[i], o + "[" + i + "]"); else for (a in s = {}, l) Object.prototype.hasOwnProperty.call(l, a) && (s[a] = t(l[a], o + "[" + JSON.stringify(a) + "]")); return s } return l }(t, "$") } function retrocycle($) { var px = /^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/; return function rez(value) { var i, item, name, path; if (value && "object" == typeof value) if ("[object Array]" === Object.prototype.toString.apply(value)) for (i = 0; i < value.length; i += 1)item = value[i], item && "object" == typeof item && (path = item.$ref, "string" == typeof path && px.test(path) ? value[i] = eval(path) : rez(item)); else for (name in value) "object" == typeof value[name] && (item = value[name], item && (path = item.$ref, "string" == typeof path && px.test(path) ? value[name] = eval(path) : rez(item))) }($), $ } module.exports = { stringify: function (t, e, n) { return JSON.stringify(decycle(t), e, n) }, parse: function (t, e) { return retrocycle(JSON.parse(t, e)) }, decycle: decycle, retrocycle: retrocycle } }, function (t, e) { var n = /[^\\];|^;/, r = /[^\\],|^,/; function o(t) { return t.match(n) ? i(t = t.replace(/\\,/g, ","), ";") : t.match(r) ? i(t = t.replace(/\\;/g, ";"), ",") : t.replace(/\\,/g, ",").replace(/\\;/g, ";") } function i(t, e) { var n = new RegExp(e), r = new RegExp("\\\\" + e, "g"); return t = (t = t.replace(r, "ΩΩΩ")).match(n) ? (t = t.split(e)).map((function (t) { return t.replace(/ΩΩΩ/g, e) })) : t.replace(/ΩΩΩ/g, e) } var a = function () { function t() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } return function () { return t() + t() + "-" + t() + "-" + t() + "-" + t() + "-" + t() + t() + t() } }(), s = ["nickname", "related", "categories", "pid"], l = ["fn"]; t.exports = { parse: function (t) { for (var e, n, r, i, a, s = {}, l = t.split(/\r\n|\r|\n/), u = l.length, c = 0; c < u; c++)if ("" !== l[c] && "BEGIN:VCARD" !== l[c].toUpperCase() && "END:VCARD" !== l[c].toUpperCase()) { var p = l[c], h = function (t) { return t + 1 < u && (" " === l[t + 1][0] || "\t" === l[t + 1][0]) }; if (h(c)) for (; h(c);)p += l[c + 1].trim(), c++; if (n = (e = p.split(":")).shift(), r = e.join(":"), a = !1, i = {}, n.match(/;/)) { var f = (n = n.replace(/\\;/g, "ΩΩΩ").replace(/\\,/, ",")).split(";").map((function (t) { return t.replace(/ΩΩΩ/g, ";") })); n = f.shift(), f.forEach((function (t) { var e = t.split("="); e[0] = e[0].toLowerCase(), 0 !== e[0].length && (i[e[0]] ? i[e[0]].push(e[1]) : i[e[0]] = [e[1]]) })) } if (r = o(r = r.replace(/\\n/g, "\n")), n.match(/\./)) { var d = n.split("."); n = d[1], a = d[0] } var y = { value: r }; Object.keys(i).length && (y.meta = i), a && (y.namespace = a), 0 !== n.indexOf("X-") && (n = n.toLowerCase()), void 0 === s[n] ? s[n] = [y] : s[n].push(y) } return s }, generate: function (t, e) { var n = ["BEGIN:VCARD"], r = ""; e && !t.version && (t.version = [{ value: "3.0" }]), e && !t.uid && (t.uid = [{ value: a() }]); var o = function (t) { return void 0 === t ? "" : t.replace(/\n/g, "\\n").replace(/;/g, "\\;").replace(/,/g, "\\,") }; return Object.keys(t).forEach((function (e) { t[e] && "function" == typeof t[e].forEach && t[e].forEach((function (t) { if (void 0 !== t.value && ("" !== t.value || -1 !== l.indexOf(e))) { if (t.value instanceof Array) { for (var i = !0, a = 0; a < t.value.length; a++)if (void 0 !== t.value[a] && "" !== t.value[a]) { i = !1; break } if (i) return } if (r = "", t.namespace && (r += t.namespace + "."), r += 0 === e.indexOf("X-") ? e : e.toUpperCase(), "object" == typeof t.meta && Object.keys(t.meta).forEach((function (e) { "function" == typeof t.meta[e].forEach && t.meta[e].forEach((function (t) { var n; e.length > 0 && ("TYPE" === e.toUpperCase() ? r += ";" + o(e.toUpperCase()) + "=" + (void 0 === (n = t) ? "" : n.replace(/\n/g, "\\n").replace(/;/g, "\\;")) : r += ";" + o(e.toUpperCase()) + "=" + o(t)) })) })), r += ":", "string" == typeof t.value) r += o(t.value); else { var u = -1 !== s.indexOf(e) ? "," : ";"; r += t.value.map((function (t) { return o(t) })).join(u) } if (r.length > 75) { var c = r.substr(0, 75), p = r.substr(75).match(/.{1,74}/g); n.push(c), p.forEach((function (t) { n.push(" " + t) })) } else n.push(r) } })) })), n.push("END:VCARD"), n.join("\r\n") } } }, function (t, e, n) { "use strict"; e.a = function () { return !1 } }, function (t, e, n) { "use strict"; (function (t) { var r = n(1), o = "object" == typeof exports && exports && !exports.nodeType && exports, i = o && "object" == typeof t && t && !t.nodeType && t, a = i && i.exports === o ? r.a.Buffer : void 0, s = a ? a.allocUnsafe : void 0; e.a = function (t, e) { if (e) return t.slice(); var n = t.length, r = s ? s(n) : new t.constructor(n); return t.copy(r), r } }).call(this, n(6)(t)) }, function (t, e) { var n; n = function () { return this }(); try { n = n || new Function("return this")() } catch (t) { "object" == typeof window && (n = window) } t.exports = n }, function (t, e) { (function (e) { t.exports = e }).call(this, {}) }, function (t, e, n) { var r = n(3); r.prototype[Symbol.iterator] || (r.prototype[Symbol.iterator] = function () { var t = this.getEnumerator(); return { next: function () { return t.moveNext() ? { done: !1, value: t.current() } : { done: !0 } } } }); var o = !0; r.extendArray = function () { o && (o = !1, Object.keys(r.prototype).forEach((function (t) { Array.prototype[t] || (Array.prototype[t] = function () { var e = r.from(this); return e[t].apply(e, arguments) }) }))) }, t.exports = r }, function (t, e, n) { var r = n(15); "string" == typeof r && (r = [[t.i, r, ""]]); var o = { hmr: !0, transform: void 0, insertInto: void 0 }; n(17)(r, o); r.locals && (t.exports = r.locals) }, function (t, e, n) { (t.exports = n(16)(!1)).push([t.i, "html {\n  --de-brand-primary: #0090FF;\n  --de-brand-primary-fade-80: rgba(0, 144, 255, 0.2);\n}\n.masked-element {\n  position: relative !important;\n}\n.masked-element .mask {\n  color: #666666;\n  background: rgba(255, 255, 255, 0.7);\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n.masked-element .mask .loader-wraper {\n  font-size: 14px;\n  position: relative;\n}\n.masked-element .mask .loader-wraper .logo {\n  position: absolute;\n  display: block;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  -moz-transform: translate(-50%, -50%);\n  -ms-transform: translate(-50%, -50%);\n  -o-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  width: 32px;\n  height: 32px;\n}\n.masked-element .mask .loader-wraper .loader {\n  font-size: inherit;\n  border-left: 0.25em solid var(--de-brand-primary);\n  border-top: 0.25em solid var(--de-brand-primary-fade-80);\n  border-right: 0.25em solid var(--de-brand-primary-fade-80);\n  border-bottom: 0.25em solid var(--de-brand-primary-fade-80);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  animation: spin 1.1s infinite linear;\n  border-radius: 50%;\n  padding: 2em;\n}\n.masked-element .mask .masked-element-message {\n  margin: 5px;\n  text-align: center;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 16px;\n  font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n}\n.masked-element .mask.warning {\n  color: red;\n}\n.masked-element .mask.warning .loader-wraper {\n  color: red;\n}\n.masked-element .mask.warning .loader-wraper .logo {\n  color: red !important;\n}\n.masked-element .mask.warning .loader-wraper .loader {\n  border-left: 0.25em solid red !important;\n  border-top: 0.25em solid rgba(255, 0, 0, 0.2);\n  border-right: 0.25em solid rgba(255, 0, 0, 0.2);\n  border-bottom: 0.25em solid rgba(255, 0, 0, 0.2);\n}\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n", ""]) }, function (t, e, n) { "use strict"; t.exports = function (t) { var e = []; return e.toString = function () { return this.map((function (e) { var n = function (t, e) { var n = t[1] || "", r = t[3]; if (!r) return n; if (e && "function" == typeof btoa) { var o = (a = r, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(a)))) + " */"), i = r.sources.map((function (t) { return "/*# sourceURL=" + r.sourceRoot + t + " */" })); return [n].concat(i).concat([o]).join("\n") } var a; return [n].join("\n") }(e, t); return e[2] ? "@media " + e[2] + "{" + n + "}" : n })).join("") }, e.i = function (t, n) { "string" == typeof t && (t = [[null, t, ""]]); for (var r = {}, o = 0; o < this.length; o++) { var i = this[o][0]; null != i && (r[i] = !0) } for (o = 0; o < t.length; o++) { var a = t[o]; null != a[0] && r[a[0]] || (n && !a[2] ? a[2] = n : n && (a[2] = "(" + a[2] + ") and (" + n + ")"), e.push(a)) } }, e } }, function (t, e, n) { var r, o, i = {}, a = (r = function () { return window && document && document.all && !window.atob }, function () { return void 0 === o && (o = r.apply(this, arguments)), o }), s = function (t, e) { return e ? e.querySelector(t) : document.querySelector(t) }, l = function (t) { var e = {}; return function (t, n) { if ("function" == typeof t) return t(); if (void 0 === e[t]) { var r = s.call(this, t, n); if (window.HTMLIFrameElement && r instanceof window.HTMLIFrameElement) try { r = r.contentDocument.head } catch (t) { r = null } e[t] = r } return e[t] } }(), u = null, c = 0, p = [], h = n(18); function f(t, e) { for (var n = 0; n < t.length; n++) { var r = t[n], o = i[r.id]; if (o) { o.refs++; for (var a = 0; a < o.parts.length; a++)o.parts[a](r.parts[a]); for (; a < r.parts.length; a++)o.parts.push(b(r.parts[a], e)) } else { var s = []; for (a = 0; a < r.parts.length; a++)s.push(b(r.parts[a], e)); i[r.id] = { id: r.id, refs: 1, parts: s } } } } function d(t, e) { for (var n = [], r = {}, o = 0; o < t.length; o++) { var i = t[o], a = e.base ? i[0] + e.base : i[0], s = { css: i[1], media: i[2], sourceMap: i[3] }; r[a] ? r[a].parts.push(s) : n.push(r[a] = { id: a, parts: [s] }) } return n } function y(t, e) { var n = l(t.insertInto); if (!n) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid."); var r = p[p.length - 1]; if ("top" === t.insertAt) r ? r.nextSibling ? n.insertBefore(e, r.nextSibling) : n.appendChild(e) : n.insertBefore(e, n.firstChild), p.push(e); else if ("bottom" === t.insertAt) n.appendChild(e); else { if ("object" != typeof t.insertAt || !t.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n"); var o = l(t.insertAt.before, n); n.insertBefore(e, o) } } function g(t) { if (null === t.parentNode) return !1; t.parentNode.removeChild(t); var e = p.indexOf(t); e >= 0 && p.splice(e, 1) } function m(t) { var e = document.createElement("style"); if (void 0 === t.attrs.type && (t.attrs.type = "text/css"), void 0 === t.attrs.nonce) { var r = function () { 0; return n.nc }(); r && (t.attrs.nonce = r) } return _(e, t.attrs), y(t, e), e } function _(t, e) { Object.keys(e).forEach((function (n) { t.setAttribute(n, e[n]) })) } function b(t, e) { var n, r, o, i; if (e.transform && t.css) { if (!(i = "function" == typeof e.transform ? e.transform(t.css) : e.transform.default(t.css))) return function () { }; t.css = i } if (e.singleton) { var a = c++; n = u || (u = m(e)), r = C.bind(null, n, a, !1), o = C.bind(null, n, a, !0) } else t.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (n = function (t) { var e = document.createElement("link"); return void 0 === t.attrs.type && (t.attrs.type = "text/css"), t.attrs.rel = "stylesheet", _(e, t.attrs), y(t, e), e }(e), r = S.bind(null, n, e), o = function () { g(n), n.href && URL.revokeObjectURL(n.href) }) : (n = m(e), r = P.bind(null, n), o = function () { g(n) }); return r(t), function (e) { if (e) { if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return; r(t = e) } else o() } } t.exports = function (t, e) { if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment"); (e = e || {}).attrs = "object" == typeof e.attrs ? e.attrs : {}, e.singleton || "boolean" == typeof e.singleton || (e.singleton = a()), e.insertInto || (e.insertInto = "head"), e.insertAt || (e.insertAt = "bottom"); var n = d(t, e); return f(n, e), function (t) { for (var r = [], o = 0; o < n.length; o++) { var a = n[o]; (s = i[a.id]).refs--, r.push(s) } t && f(d(t, e), e); for (o = 0; o < r.length; o++) { var s; if (0 === (s = r[o]).refs) { for (var l = 0; l < s.parts.length; l++)s.parts[l](); delete i[s.id] } } } }; var v, w = (v = [], function (t, e) { return v[t] = e, v.filter(Boolean).join("\n") }); function C(t, e, n, r) { var o = n ? "" : r.css; if (t.styleSheet) t.styleSheet.cssText = w(e, o); else { var i = document.createTextNode(o), a = t.childNodes; a[e] && t.removeChild(a[e]), a.length ? t.insertBefore(i, a[e]) : t.appendChild(i) } } function P(t, e) { var n = e.css, r = e.media; if (r && t.setAttribute("media", r), t.styleSheet) t.styleSheet.cssText = n; else { for (; t.firstChild;)t.removeChild(t.firstChild); t.appendChild(document.createTextNode(n)) } } function S(t, e, n) { var r = n.css, o = n.sourceMap, i = void 0 === e.convertToAbsoluteUrls && o; (e.convertToAbsoluteUrls || i) && (r = h(r)), o && (r += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(o)))) + " */"); var a = new Blob([r], { type: "text/css" }), s = t.href; t.href = URL.createObjectURL(a), s && URL.revokeObjectURL(s) } }, function (t, e) { t.exports = function (t) { var e = "undefined" != typeof window && window.location; if (!e) throw new Error("fixUrls requires window.location"); if (!t || "string" != typeof t) return t; var n = e.protocol + "//" + e.host, r = n + e.pathname.replace(/\/[^\/]*$/, "/"); return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, (function (t, e) { var o, i = e.trim().replace(/^"(.*)"$/, (function (t, e) { return e })).replace(/^'(.*)'$/, (function (t, e) { return e })); return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? t : (o = 0 === i.indexOf("//") ? i : 0 === i.indexOf("/") ? n + i : r + i.replace(/^\.\//, ""), "url(" + JSON.stringify(o) + ")") })) } }, function (t, e, n) {
  "use strict"; n.r(e), n.d(e, "CustomersCanvas", (function () { return ka })); var r = {}; n.r(r), n.d(r, "RuntimeConfiguration", (function () { return s })); var o, i = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, a = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, s = function () { function t(t) { this._postMessageClient = t } return t.prototype.getPdfMetadata = function () { return this._postMessageClient.callProcedure("getPdfMetadata") }, t.prototype.setPdfMetadata = function (t) { return this._postMessageClient.callProcedure("setPdfMetadata", t) }, t.prototype.getUserId = function () { return this._postMessageClient.callProcedure("getUserId") }, t.prototype.getImageMetadata = function (t, e) { return i(this, void 0, Promise, (function () { return a(this, (function (n) { switch (n.label) { case 0: return [4, this._postMessageClient.callProcedure("getImageMetadata", t, e)]; case 1: return [2, n.sent()] } })) })) }, t.prototype.setUserId = function (t) { return this._postMessageClient.callProcedure("setUserId", t) }, t }(); !function (t) { t[t.ModalOpen = 0] = "ModalOpen", t[t.ModalClose = 1] = "ModalClose", t[t.FullScreen = 2] = "FullScreen", t[t.FullWindow = 3] = "FullWindow", t[t.OriginalSize = 4] = "OriginalSize", t[t.AssetManagerOpened = 5] = "AssetManagerOpened", t[t.AssetManagerClosed = 6] = "AssetManagerClosed", t[t.RevertProduct = 7] = "RevertProduct", t[t.ObjectInspectorVisibilityChange = 8] = "ObjectInspectorVisibilityChange", t[t.OnSurfaceChanged = 9] = "OnSurfaceChanged", t[t.CanRedoChanged = 10] = "CanRedoChanged", t[t.CanUndoChanged = 11] = "CanUndoChanged", t[t.OnImageDpiChanged = 12] = "OnImageDpiChanged", t[t.PopupOpen = 13] = "PopupOpen", t[t.PrintAreaBoundsChanged = 14] = "PrintAreaBoundsChanged", t[t.UndoProduct = 15] = "UndoProduct", t[t.RedoProduct = 16] = "RedoProduct", t[t.UIElementStateChange = 17] = "UIElementStateChange" }(o || (o = {})); var l; !function (t) { t[t.FullScreen = 0] = "FullScreen", t[t.FullWindow = 1] = "FullWindow", t[t.OriginalSize = 2] = "OriginalSize" }(l || (l = {})); var u, c = function () { function t() { } return t.ModalOpen = o[o.ModalOpen], t.ModalClose = o[o.ModalClose], t.FullWindow = o[o.FullWindow], t.FullScreen = o[o.FullScreen], t.OriginalSize = o[o.OriginalSize], t.AssetManagerOpened = o[o.AssetManagerOpened], t.AssetManagerClosed = o[o.AssetManagerClosed], t.RevertProduct = o[o.RevertProduct], t.OnSurfaceChanged = o[o.OnSurfaceChanged], t.CanUndoChanged = o[o.CanUndoChanged], t.CanRedoChanged = o[o.CanRedoChanged], t.OnImageDpiChanged = o[o.OnImageDpiChanged], t.PopupOpen = o[o.PopupOpen], t.PrintAreaBoundsChanged = o[o.PrintAreaBoundsChanged], t.UndoProduct = o[o.UndoProduct], t.RedoProduct = o[o.RedoProduct], t.BoundsNotification = "BoundsNotification", t.ItemChanged = "ItemChanged", t.ItemAdded = "ItemAdded", t.ItemRemoved = "ItemRemoved", t.SelectedItemsChanged = "SelectedItemsChanged", t.UIElementStateChange = o[o.UIElementStateChange], t }(); !function (t) { t[t.Event = 0] = "Event", t[t.ProcedureResponse = 1] = "ProcedureResponse" }(u || (u = {})); var p, h, f = function () { function t(t, e) { var n = this; this._iframe = e, this._updateFullWindowStylesheet = function () { var t = "ccFullWindowIframeStylesheet"; document.getElementById(t) && (document.getElementById(t).remove ? document.getElementById(t).remove() : document.getElementById(t).removeNode && document.getElementById(t).removeNode()); var e = document.createElement("style"); e.type = "text/css", e.id = t; var r = window.innerHeight, o = window.innerWidth; e.innerHTML = ".ccFullWindowIframe{position: fixed !important;top: 0!important;left: 0!important;bottom:0!important;right: 0!important;margin: 0!important;width: " + o + "px !important;height: " + r + "px !important;background-color: white!important;z-index: " + n._getMaxZIndex() + " !important;}", document.getElementsByTagName("head")[0].appendChild(e) }, t.subscribe(c.FullWindow, (function () { return n._setFullWindow() })), t.subscribe(c.OriginalSize, (function () { return n._setOriginalSize() })) } return t.prototype._setOriginalSize = function () { this._iframe.classList.remove("ccFullWindowIframe"), window.removeEventListener("resize", this._updateFullWindowStylesheet) }, t.prototype._setFullWindow = function () { this._updateFullWindowStylesheet(), this._iframe.classList.add("ccFullWindowIframe"), window.addEventListener("resize", this._updateFullWindowStylesheet) }, t.prototype._getMaxZIndex = function () { var t = 0, e = document.getElementsByTagName("*"); if (0 === e.length) return 0; for (var n = 0; n < e.length; n++) { var r = parseInt(window.getComputedStyle(e[n]).zIndex); r > t && (t = r) } return t }, t }(), d = n(7); (h = p || (p = {})).stringify = function (t, e, n) { return d.stringify(t, e, n) }, h.parse = function (t, e) { return d.parse(t, e) }; var y = function () { function t() { var t = this; this._promise = new Promise((function (e, n) { t._resolve = e, t._reject = n })) } return Object.defineProperty(t.prototype, "promise", { get: function () { return this._promise }, enumerable: !0, configurable: !0 }), t.prototype.resolve = function (t) { this._resolve(t) }, t.prototype.reject = function (t) { this._reject(t) }, t }(), g = function (t, e) { return (g = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]) })(t, e) };
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function m(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null"); function n() { this.constructor = t } g(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) } function _(t, e, n, r) { var o, i = arguments.length, a = i < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, n) : r; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, r); else for (var s = t.length - 1; s >= 0; s--)(o = t[s]) && (a = (i < 3 ? o(a) : i > 3 ? o(e, n, a) : o(e, n)) || a); return i > 3 && a && Object.defineProperty(e, n, a), a } function b(t, e) { if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(t, e) } Object.create; Object.create; var v = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "CustomersCanvasException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e.prototype.toString = function () { return this.name + ": " + this.message }, e.prototype.toJSON = function () { return { name: this.name, innerException: this.innerException, message: this.message } }, e }(Error), w = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "NotImplementedException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e }(v), C = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "ArgumentException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e }(v), P = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "ArgumentNullException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e }(C), S = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "OutOfRangeException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e }(v), x = function (t) { function e(n) { var r = t.call(this, n) || this; return r.name = "InvalidOperationException", Object.setPrototypeOf(r, e.prototype), r } return m(e, t), e }(v), O = function () { function t(t) { this._value = "00000000-0000-0000-0000-000000000000", null != t ? this.set(t) : this.generateNewGuid() } return t.prototype.set = function (t) { if (!this.isValid(t)) throw new v(t + "is incorrect uuid!"); this._value = t }, Object.defineProperty(t.prototype, "value", { get: function () { return this._value }, enumerable: !0, configurable: !0 }), t.prototype.isValid = function (t) { return t = t.toUpperCase(), null != new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b").exec(t) }, t.prototype.generateNewGuid = function () { var t = (new Date).getTime(), e = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function (e) { var n = (t + 16 * Math.random()) % 16 | 0; return t = Math.floor(t / 16), ("x" == e ? n : 7 & n | 8).toString(16) })); this.set(e) }, t.prototype.toString = function () { return this._value }, t.prototype.equals = function (t) { return t._value === this._value }, t }(), I = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, j = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, k = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(j(arguments[e])); return t }, E = function () { function t() { this._listeners = [] } return t.prototype.add = function (t) { this._listeners.includes(t) || this._listeners.push(t) }, t.prototype.remove = function (t) { this._listeners = this._listeners.filter((function (e) { return e !== t })) }, t.prototype.listenersCount = function () { return this._listeners.length }, t.prototype.notify = function () { for (var t, e, n = [], r = 0; r < arguments.length; r++)n[r] = arguments[r]; try { for (var o = I(this._listeners), i = o.next(); !i.done; i = o.next()) { var a = i.value; a.apply(void 0, k(n)) } } catch (e) { t = { error: e } } finally { try { i && !i.done && (e = o.return) && e.call(o) } finally { if (t) throw t.error } } }, t }(), T = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return m(e, t), e.prototype.add = function (e) { t.prototype.add.call(this, e) }, e.prototype.remove = function (e) { t.prototype.remove.call(this, e) }, e.prototype.notify = function (e) { t.prototype.notify.call(this, e) }, e.prototype.fire = function (t) { this.notify(t) }, e }(E), B = function (t) { function e(e) { var n = t.call(this) || this; return n._sender = e, n } return m(e, t), e.prototype.add = function (e) { t.prototype.add.call(this, e) }, e.prototype.remove = function (e) { t.prototype.remove.call(this, e) }, e.prototype.notify = function (e) { t.prototype.notify.call(this, this._sender, e) }, e.prototype.fire = function (t) { this.notify(t) }, e }(E), M = function (t) { function e(e) { void 0 === e && (e = null); var n = t.call(this) || this; return n._sender = e, n } return m(e, t), e.prototype.add = function (e) { t.prototype.add.call(this, e) }, e.prototype.remove = function (e) { t.prototype.remove.call(this, e) }, e.prototype.notify = function (e, n) { t.prototype.notify.call(this, e, n) }, e }(E), A = n(0); var R = function () { this.__data__ = [], this.size = 0 }; var L = function (t, e) { return t === e || t != t && e != e }; var N = function (t, e) { for (var n = t.length; n--;)if (L(t[n][0], e)) return n; return -1 }, F = Array.prototype.splice; var z = function (t) { var e = this.__data__, n = N(e, t); return !(n < 0) && (n == e.length - 1 ? e.pop() : F.call(e, n, 1), --this.size, !0) }; var D = function (t) { var e = this.__data__, n = N(e, t); return n < 0 ? void 0 : e[n][1] }; var V = function (t) { return N(this.__data__, t) > -1 }; var q = function (t, e) { var n = this.__data__, r = N(n, t); return r < 0 ? (++this.size, n.push([t, e])) : n[r][1] = e, this }; function U(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var r = t[e]; this.set(r[0], r[1]) } } U.prototype.clear = R, U.prototype.delete = z, U.prototype.get = D, U.prototype.has = V, U.prototype.set = q; var W = U; var G = function () { this.__data__ = new W, this.size = 0 }; var H = function (t) { var e = this.__data__, n = e.delete(t); return this.size = e.size, n }; var J = function (t) { return this.__data__.get(t) }; var X = function (t) { return this.__data__.has(t) }, Y = n(1), $ = Y.a.Symbol, K = Object.prototype, Q = K.hasOwnProperty, Z = K.toString, tt = $ ? $.toStringTag : void 0; var et = function (t) { var e = Q.call(t, tt), n = t[tt]; try { t[tt] = void 0; var r = !0 } catch (t) { } var o = Z.call(t); return r && (e ? t[tt] = n : delete t[tt]), o }, nt = Object.prototype.toString; var rt = function (t) { return nt.call(t) }, ot = $ ? $.toStringTag : void 0; var it = function (t) { return null == t ? void 0 === t ? "[object Undefined]" : "[object Null]" : ot && ot in Object(t) ? et(t) : rt(t) }; var at = function (t) { var e = typeof t; return null != t && ("object" == e || "function" == e) }; var st = function (t) { if (!at(t)) return !1; var e = it(t); return "[object Function]" == e || "[object GeneratorFunction]" == e || "[object AsyncFunction]" == e || "[object Proxy]" == e }, lt = Y.a["__core-js_shared__"], ut = function () { var t = /[^.]+$/.exec(lt && lt.keys && lt.keys.IE_PROTO || ""); return t ? "Symbol(src)_1." + t : "" }(); var ct = function (t) { return !!ut && ut in t }, pt = Function.prototype.toString; var ht = function (t) { if (null != t) { try { return pt.call(t) } catch (t) { } try { return t + "" } catch (t) { } } return "" }, ft = /[\\^$.*+?()[\]{}|]/g, dt = /^\[object .+?Constructor\]$/, yt = Function.prototype, gt = Object.prototype, mt = yt.toString, _t = gt.hasOwnProperty, bt = RegExp("^" + mt.call(_t).replace(ft, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"); var vt = function (t) { return !(!at(t) || ct(t)) && (st(t) ? bt : dt).test(ht(t)) }; var wt = function (t, e) { return null == t ? void 0 : t[e] }; var Ct = function (t, e) { var n = wt(t, e); return vt(n) ? n : void 0 }, Pt = Ct(Y.a, "Map"), St = Ct(Object, "create"); var xt = function () { this.__data__ = St ? St(null) : {}, this.size = 0 }; var Ot = function (t) { var e = this.has(t) && delete this.__data__[t]; return this.size -= e ? 1 : 0, e }, It = Object.prototype.hasOwnProperty; var jt = function (t) { var e = this.__data__; if (St) { var n = e[t]; return "__lodash_hash_undefined__" === n ? void 0 : n } return It.call(e, t) ? e[t] : void 0 }, kt = Object.prototype.hasOwnProperty; var Et = function (t) { var e = this.__data__; return St ? void 0 !== e[t] : kt.call(e, t) }; var Tt = function (t, e) { var n = this.__data__; return this.size += this.has(t) ? 0 : 1, n[t] = St && void 0 === e ? "__lodash_hash_undefined__" : e, this }; function Bt(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var r = t[e]; this.set(r[0], r[1]) } } Bt.prototype.clear = xt, Bt.prototype.delete = Ot, Bt.prototype.get = jt, Bt.prototype.has = Et, Bt.prototype.set = Tt; var Mt = Bt; var At = function () { this.size = 0, this.__data__ = { hash: new Mt, map: new (Pt || W), string: new Mt } }; var Rt = function (t) { var e = typeof t; return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t }; var Lt = function (t, e) { var n = t.__data__; return Rt(e) ? n["string" == typeof e ? "string" : "hash"] : n.map }; var Nt = function (t) { var e = Lt(this, t).delete(t); return this.size -= e ? 1 : 0, e }; var Ft = function (t) { return Lt(this, t).get(t) }; var zt = function (t) { return Lt(this, t).has(t) }; var Dt = function (t, e) { var n = Lt(this, t), r = n.size; return n.set(t, e), this.size += n.size == r ? 0 : 1, this }; function Vt(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var r = t[e]; this.set(r[0], r[1]) } } Vt.prototype.clear = At, Vt.prototype.delete = Nt, Vt.prototype.get = Ft, Vt.prototype.has = zt, Vt.prototype.set = Dt; var qt = Vt; var Ut = function (t, e) { var n = this.__data__; if (n instanceof W) { var r = n.__data__; if (!Pt || r.length < 199) return r.push([t, e]), this.size = ++n.size, this; n = this.__data__ = new qt(r) } return n.set(t, e), this.size = n.size, this }; function Wt(t) { var e = this.__data__ = new W(t); this.size = e.size } Wt.prototype.clear = G, Wt.prototype.delete = H, Wt.prototype.get = J, Wt.prototype.has = X, Wt.prototype.set = Ut; Object.prototype.hasOwnProperty; var Gt = Object.prototype; Gt.hasOwnProperty, Gt.propertyIsEnumerable, Array.isArray, n(5); var Ht = {}; Ht["[object Float32Array]"] = Ht["[object Float64Array]"] = Ht["[object Int8Array]"] = Ht["[object Int16Array]"] = Ht["[object Int32Array]"] = Ht["[object Uint8Array]"] = Ht["[object Uint8ClampedArray]"] = Ht["[object Uint16Array]"] = Ht["[object Uint32Array]"] = !0, Ht["[object Arguments]"] = Ht["[object Array]"] = Ht["[object ArrayBuffer]"] = Ht["[object Boolean]"] = Ht["[object DataView]"] = Ht["[object Date]"] = Ht["[object Error]"] = Ht["[object Function]"] = Ht["[object Map]"] = Ht["[object Number]"] = Ht["[object Object]"] = Ht["[object RegExp]"] = Ht["[object Set]"] = Ht["[object String]"] = Ht["[object WeakMap]"] = !1; var Jt = n(2); Jt.a && Jt.a.isTypedArray, Object.prototype.hasOwnProperty; Object.prototype; var Xt = function (t, e) { return function (n) { return t(e(n)) } }; Object.keys, Object.prototype.hasOwnProperty; Object.prototype.hasOwnProperty; n(10); var Yt = function (t, e) { for (var n = -1, r = null == t ? 0 : t.length, o = 0, i = []; ++n < r;) { var a = t[n]; e(a, n, t) && (i[o++] = a) } return i }; var $t = function () { return [] }, Kt = Object.prototype.propertyIsEnumerable, Qt = Object.getOwnPropertySymbols, Zt = Qt ? function (t) { return null == t ? [] : (t = Object(t), Yt(Qt(t), (function (e) { return Kt.call(t, e) }))) } : $t; var te = function (t, e) { for (var n = -1, r = e.length, o = t.length; ++n < r;)t[o + n] = e[n]; return t }, ee = Xt(Object.getPrototypeOf, Object); Object.getOwnPropertySymbols; var ne = Ct(Y.a, "DataView"), re = Ct(Y.a, "Promise"), oe = Ct(Y.a, "Set"), ie = Ct(Y.a, "WeakMap"), ae = ht(ne), se = ht(Pt), le = ht(re), ue = ht(oe), ce = ht(ie), pe = it; (ne && "[object DataView]" != pe(new ne(new ArrayBuffer(1))) || Pt && "[object Map]" != pe(new Pt) || re && "[object Promise]" != pe(re.resolve()) || oe && "[object Set]" != pe(new oe) || ie && "[object WeakMap]" != pe(new ie)) && (pe = function (t) { var e = it(t), n = "[object Object]" == e ? t.constructor : void 0, r = n ? ht(n) : ""; if (r) switch (r) { case ae: return "[object DataView]"; case se: return "[object Map]"; case le: return "[object Promise]"; case ue: return "[object Set]"; case ce: return "[object WeakMap]" }return e }); Object.prototype.hasOwnProperty; Y.a.Uint8Array; var he = $ ? $.prototype : void 0; he && he.valueOf; Object.create; Jt.a && Jt.a.isMap; Jt.a && Jt.a.isSet; var fe = {}; fe["[object Arguments]"] = fe["[object Array]"] = fe["[object ArrayBuffer]"] = fe["[object DataView]"] = fe["[object Boolean]"] = fe["[object Date]"] = fe["[object Float32Array]"] = fe["[object Float64Array]"] = fe["[object Int8Array]"] = fe["[object Int16Array]"] = fe["[object Int32Array]"] = fe["[object Map]"] = fe["[object Number]"] = fe["[object Object]"] = fe["[object RegExp]"] = fe["[object Set]"] = fe["[object String]"] = fe["[object Symbol]"] = fe["[object Uint8Array]"] = fe["[object Uint8ClampedArray]"] = fe["[object Uint16Array]"] = fe["[object Uint32Array]"] = !0, fe["[object Error]"] = fe["[object Function]"] = fe["[object WeakMap]"] = !1; var de = function () { function t(t, e) { this.x = 0, this.y = 0, this.x = t || 0, this.y = e || 0 } return t.prototype.rotate = function (e) { return this.rotateAt(e, new t(0, 0)) }, t.prototype.rotateAt = function (e, n) { n || (n = new t(0, 0)); var r = me(e), o = Math.cos(r) * (this.x - n.x) - Math.sin(r) * (this.y - n.y) + n.x, i = Math.sin(r) * (this.x - n.x) + Math.cos(r) * (this.y - n.y) + n.y; return this.x = o, this.y = i, this }, t.prototype.translate = function (t, e) { return this.x = this.x + t, this.y = this.y + e, this }, t.prototype.scale = function (t, e) { return this.x = this.x * t, this.y = this.y * e, this }, t.prototype.clone = function () { return new t(this.x, this.y) }, t.prototype.equals = function (t, e) { return null != t && ve(this.x, t.x, e) && ve(this.y, t.y, e) }, t.isEqual = function (t, e, n) { return void 0 === n && (n = 1e-4), null == t && null == e || null != t && null != e && t.equals(e) }, t.prototype.distance = function (t) { return Math.sqrt((this.x - t.x) * (this.x - t.x) + (this.y - t.y) * (this.y - t.y)) }, t.prototype.transform = function (e, n) { return null == n && (n = new t), this.translate(-n.x, -n.y), this.scale(e.scaleX, e.scaleY), this.rotate(e.angle), this.translate(e.translateX, e.translateY), this.translate(n.x, n.y), this }, t.prototype.toString = function () { return [this.x, this.y].join(",") }, t.prototype.toIPoint = function () { return { x: this.x, y: this.y } }, t.fromIPoint = function (e) { return new t(e.x, e.y) }, t.prototype.round = function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this }, t.prototype.isOrigin = function () { return 0 === this.x && 0 === this.y }, t }(), ye = function () { function t(t, e, n, r, o, i) { if (6 == arguments.length) this.setTransform(t, e, n, r, o, i); else { if (0 != arguments.length) throw new Error("Arguments error"); this.setTransform(1, 0, 0, 1, 0, 0) } } return t.prototype.setTransform = function (t, e, n, r, o, i) { this.m00 = t, this.m10 = e, this.m01 = n, this.m11 = r, this.m02 = o, this.m12 = i }, t.prototype.transformPoint = function (t, e) { void 0 === e && (e = !1); var n = e ? new de : t, r = t.x, o = t.y; return n.x = r * this.m00 + o * this.m01 + this.m02, n.y = r * this.m10 + o * this.m11 + this.m12, n }, t.prototype.concatenate = function (t) { var e = this.m00, n = this.m01; return this.m00 = t.m00 * e + t.m10 * n, this.m01 = t.m01 * e + t.m11 * n, this.m02 += t.m02 * e + t.m12 * n, e = this.m10, n = this.m11, this.m10 = t.m00 * e + t.m10 * n, this.m11 = t.m01 * e + t.m11 * n, this.m12 += t.m02 * e + t.m12 * n, this }, t.prototype.rotate = function (e) { e = me(e); var n = Math.cos(e), r = Math.sin(e); return this.concatenate(new t(n, r, -r, n, 0, 0)) }, t.prototype.rotateAt = function (t, e, n) { return this.translate(e, n), this.rotate(t), this.translate(-e, -n), this }, t.prototype.scale = function (e, n) { return this.concatenate(new t(e, 0, 0, n, 0, 0)) }, t.prototype.scaleRelativeToPoint = function (e, n, r) { return this.concatenate(new t(e, 0, 0, n, r.x * (1 - e), r.y * (1 - n))) }, t.prototype.translate = function (e, n) { return this.concatenate(new t(1, 0, 0, 1, e, n)) }, Object.defineProperty(t.prototype, "angle", { get: function () { return _e(Math.atan(-this.m01 / this.m00)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "scaleX", { get: function () { return Math.sqrt(this.m00 * this.m00 + this.m10 * this.m10) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "scaleY", { get: function () { return Math.sqrt(this.m01 * this.m01 + this.m11 * this.m11) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { return new t(this.m00, this.m10, this.m01, this.m11, this.m02, this.m12) }, t.prototype.updateObjectByMatrix = function (t, e, n) { if (null == t) throw new C("object cannot be null"); if (!A.isNumber(t[e]) || !A.isNumber(t[e])) throw new C("object members by given keys nust be a numbers!"); var r = this.transformPoint(new de(t[e], t[n])); return t[e] = r.x, t[n] = r.y, t }, t }(), ge = function () { function t(t, e, n, r) { this._propertyChanged = new M, this._left = "number" == typeof t ? t : 0, this._top = "number" == typeof e ? e : 0, this._width = "number" == typeof n ? n : 2, this._height = "number" == typeof r ? r : 2, this._id = Math.random().toString() } return t.prototype.toJSON = function () { return { left: this.left, top: this.top, width: this.width, height: this.height, id: this._id } }, Object.defineProperty(t.prototype, "left", { get: function () { return this._left }, set: function (e) { ve(e, this._left, t._tolerance) || (this._left = e, this._propertyChanged.notify(this, "left")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "top", { get: function () { return this._top }, set: function (e) { ve(e, this._top, t._tolerance) || (this._top = e, this._propertyChanged.notify(this, "top")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "width", { get: function () { return this._width }, set: function (e) { ve(e, this._width, t._tolerance) || (this._width = e, this._propertyChanged.notify(this, "width")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "height", { get: function () { return this._height }, set: function (e) { ve(e, this._height, t._tolerance) || (this._height = e, this._propertyChanged.notify(this, "height")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "id", { get: function () { return this._id }, enumerable: !0, configurable: !0 }), t.FromLTRB = function (e, n, r, o) { return new t(e, n, r - e, o - n) }, t.FromObject = function (e) { return new t(e.left, e.top, e.width, e.height) }, t.intersect = function (e, n) { var r = Math.max(e.left, n.left), o = Math.min(e.right, n.right), i = Math.max(e.top, n.top), a = Math.min(e.bottom, n.bottom); return o >= r && a >= i ? new t(r, i, o - r, a - i) : t.empty }, t.union = function (e, n) { var r = Math.min(e.left, n.left), o = Math.max(e.left + e.width, n.left + n.width), i = Math.min(e.top, n.top); return new t(r, i, o - r, Math.max(e.top + e.height, n.top + n.height) - i) }, Object.defineProperty(t, "empty", { get: function () { return new t(0, 0, -1, -1) }, enumerable: !0, configurable: !0 }), t.prototype.equals = function (e) { return t.isEqual(this, e) }, t.isEqual = function (t, e, n) { return void 0 === n && (n = 1e-4), null == t && null == e || null != t && null != e && (ve(t.left, e.left, n) && ve(t.top, e.top, n) && ve(t.width, e.width, n) && ve(t.height, e.height, n)) }, t.prototype.contains = function (t, e, n) { if (null == e && (e = !1), e) { "number" != typeof n && (n = 1e-4); var r = this.left, o = this.top, i = this.left + this.width, a = this.top + this.height; return (t.x > r || ve(t.x, r, n)) && (t.y > o || ve(t.y, o, n)) && (t.x < i || ve(t.x, i, n)) && (t.y < a || ve(t.y, a, n)) } return t.x > this.left && t.y > this.top && t.x < this.left + this.width && t.y < this.top + this.height }, t.prototype.containsRectangle = function (t) { var e = new de(t.left, t.top), n = new de(t.right, t.bottom); return this.contains(e, !0) && this.contains(n, !0) }, t.prototype.clone = function () { return new t(this.left, this.top, this.width, this.height) }, t.prototype.isEmpty = function () { return this.width <= 0 || this.height <= 0 }, t.prototype.inflate = function (t) { this.left -= t, this.top -= t, this.width += 2 * t, this.height += 2 * t }, t.prototype.intersectsWith = function (t) { return t.left < this.right && this.left < t.right && t.top < this.bottom && this.top < t.bottom }, t.prototype.updateByMatrix = function (t) { if (0 !== t.angle) throw new C("RectangleF cannot be transformed by angle!"); var e = new de(this.left, this.top), n = new de(this.right, this.bottom), r = t.transformPoint(e), o = t.transformPoint(n), i = this.clone(); return this._left = r.x, this._top = r.y, this._width = o.x - this._left, this._height = o.y - this._top, i.equals(this) || this._propertyChanged.notify(this), this }, t.prototype.getExpanded = function (e) { return t.FromLTRB(this.left - e.left, this.top - e.top, this.right + e.right, this.bottom + e.bottom) }, t.prototype.toString = function () { return [this.left, this.top, this.width, this.height].join(",") }, t.fromString = function (e) { var n = e.replace(", ", ",").split(","); return new t(parseFloat(n[0]), parseFloat(n[1]), parseFloat(n[2]), parseFloat(n[3])) }, t.getMatrix = function (t, e) { var n = new ye, r = t.center, o = e.center; return n.scaleRelativeToPoint(e.width / t.width, e.height / t.height, r), n.translate((o.x - r.x) / n.scaleX, (o.y - r.y) / n.scaleY), n }, t.getOverallBounds = function (e) { return A.isEmpty(e) ? t.empty : e.reduce((function (e, n) { return null == e ? n.clone() : t.union(e, n) })) }, Object.defineProperty(t.prototype, "right", { get: function () { return this.left + this.width }, set: function (t) { this.width = t - this.left }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "bottom", { get: function () { return this.top + this.height }, set: function (t) { this.height = t - this.top }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "center", { get: function () { return new de(this.left + this.width / 2, this.top + this.height / 2) }, enumerable: !0, configurable: !0 }), t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t._tolerance = 1e-6, t }(), me = function (t) { return Math.PI * t / 180 }, _e = function (t) { return 180 * t / Math.PI }, be = function (t, e, n) { return Math.max(t, Math.min(n, e)) }, ve = function (t, e, n) { return "number" == typeof t && "number" == typeof e && ("number" != typeof n && (n = 1e-4), 0 != n ? Math.abs(t - e) <= n : t == e) }, we = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, Ce = function () { function t(t, e) { this._name = "", this._points = [], this._name = t ? t.toUpperCase() : "", this._points = e || [] } return Object.defineProperty(t.prototype, "name", { get: function () { return this._name }, enumerable: !0, configurable: !0 }), t.prototype.getPoint = function (t) { return this._points[t] }, Object.defineProperty(t.prototype, "length", { get: function () { return this._points.length }, enumerable: !0, configurable: !0 }), t.prototype.transform = function (t, e) { for (var n = 0; n < this.length; n++)this.getPoint(n).transform(t, e) }, t.prototype.rotateAt = function (t, e) { for (var n = 0; n < this.length; n++)this.getPoint(n).rotateAt(t, e) }, t.prototype.translate = function (t, e) { for (var n = 0; n < this.length; n++)this.getPoint(n).translate(t, e) }, t.prototype.draw = function (t) { switch (this.name) { case "Z": t.closePath(); break; case "M": t.moveTo(this.getPoint(0).x, this.getPoint(0).y); break; case "L": t.lineTo(this.getPoint(0).x, this.getPoint(0).y); break; case "Q": t.quadraticCurveTo(this.getPoint(0).x, this.getPoint(0).y, this.getPoint(1).x, this.getPoint(1).y); break; case "C": t.bezierCurveTo(this.getPoint(0).x, this.getPoint(0).y, this.getPoint(1).x, this.getPoint(1).y, this.getPoint(2).x, this.getPoint(2).y) } }, t.prototype.toString = function () { for (var t = this.name, e = 0; e < this.length; e++)t += " " + this.getPoint(e).x + " " + this.getPoint(e).y; return t }, t.prototype.clone = function () { return new t(this.name, this._points.map((function (t) { return t.clone() }))) }, t }(), Pe = function () { function t(t) { this._pathChangedEvent = new T, this._segments = [], null != t && this._fromString(t) } return Object.defineProperty(t.prototype, "length", { get: function () { return this._segments.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "segments", { get: function () { return this._segments }, enumerable: !0, configurable: !0 }), t.prototype.addPathChanged = function (t) { this._pathChangedEvent.add(t) }, t.prototype.removePathChanged = function (t) { this._pathChangedEvent.remove(t) }, t.prototype.moveTo = function (t, e) { this._segments.push(new Ce("M", [new de(t, e)])), this._onPathChanged() }, t.prototype.lineTo = function (t, e) { this._segments.push(new Ce("L", [new de(t, e)])), this._onPathChanged() }, t.prototype.quadraticTo = function (t, e, n, r) { this._segments.push(new Ce("Q", [new de(t, e), new de(n, r)])), this._onPathChanged() }, t.prototype.cubicTo = function (t, e, n, r, o, i) { this._segments.push(new Ce("C", [new de(t, e), new de(n, r), new de(o, i)])), this._onPathChanged() }, t.prototype.close = function () { this._segments.push(new Ce("Z")), this._onPathChanged() }, t.prototype._onPathChanged = function () { this._pathChangedEvent.notify() }, t.prototype.transform = function (t, e) { for (var n = 0; n < this.length; n++)this._segments[n].transform(t, e) }, t.prototype.rotateAt = function (t, e) { for (var n = 0; n < this.length; n++)this._segments[n].rotateAt(t, e) }, t.prototype.translate = function (t, e) { for (var n = 0; n < this.length; n++)this._segments[n].translate(t, e) }, t.prototype.draw = function (t) { if (t) { t.beginPath(); for (var e = 0; e < this.length; e++)this._segments[e].draw(t) } }, t.prototype.toString = function () { for (var t = "", e = 0; e < this.length; e++)t += this._segments[e].toString(), e < this._segments.length - 1 && (t += " "); return t }, t.prototype.clone = function () { return new t(this.toString()) }, t.prototype.equals = function (t) { return this.isEqual(t) }, t.prototype.isEqual = function (t) { return null != t && this.toString() === t.toString() }, t.prototype.addPath = function (t) { var e, n; try { for (var r = we(t._segments), o = r.next(); !o.done; o = r.next()) { var i = o.value; this._segments.push(i.clone()) } } catch (t) { e = { error: t } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (e) throw e.error } } }, t.prototype._fromString = function (t) { for (var e = t.split(" "), n = 0; n < e.length;) { for (var r = e[n], o = n + 1, i = []; o < e.length;) { var a = parseFloat(e[o]); if (isNaN(a) || !isFinite(a)) break; i.push(a), o++ } for (var s = 0, l = []; s < i.length;)l.push(new de(i[s], i[s + 1])), s += 2; var u = new Ce(r, l); this._segments.push(u), n = o } }, t.rectangle = function (e, n, r, o) { var i = new t; return i.moveTo(e, n), i.lineTo(e + r, n), i.lineTo(e + r, n + o), i.lineTo(e, n + o), i.lineTo(e, n), i.close(), i }, t.ellipse = function (e, n, r, o) { var i = r / 2, a = o / 2, s = new t; return s.moveTo(e, n + a), s.cubicTo(e, n + a - .5517 * a, e + i - .5517 * i, n, e + i, n), s.cubicTo(e + i + .5517 * i, n, e + r, n + a - .5517 * a, e + r, n + a), s.cubicTo(e + r, n + a + .5517 * a, e + i + .5517 * i, n + o, e + i, n + o), s.cubicTo(e + i - .5517 * i, n + o, e, n + a + .5517 * a, e, n + a), s.close(), s }, t.roundedRectangle = function (e, n, r, o, i) { if (null == i) return t.rectangle(e, n, r, o); var a = new t, s = e, l = n, u = i[0].width, c = i[0].height, p = i[1].width, h = i[1].height, f = i[2].width, d = i[2].height, y = i[3].width, g = i[3].height; return (ve(u, 0) || ve(c, 0)) && (u = c = 0), (ve(p, 0) || ve(h, 0)) && (p = h = 0), (ve(f, 0) || ve(d, 0)) && (f = d = 0), (ve(y, 0) || ve(g, 0)) && (y = g = 0), a.moveTo(s + u, l), ve(u + p, r) || a.lineTo(s + r - p, l), ve(p, 0) || ve(h, 0) || a.cubicTo(s + r - p * (1 - .5517), l, s + r, l + h * (1 - .5517), s + r, l + h), ve(h + d, o) || a.lineTo(s + r, l + o - d), ve(f, 0) || ve(d, 0) || a.cubicTo(s + r, l + o - d * (1 - .5517), s + r - f * (1 - .5517), l + o, s + r - f, l + o), ve(f + y, r) || a.lineTo(s + y, l + o), ve(y, 0) || ve(g, 0) || a.cubicTo(s + y * (1 - .5517), l + o, s, l + o - g * (1 - .5517), s, l + o - g), ve(g + c, o) || a.lineTo(s, l + c), ve(u, 0) || ve(c, 0) || a.cubicTo(s, l + c * (1 - .5517), s + u * (1 - .5517), l, s + u, l), a.close(), a }, t.rotatedRectangle = function (e) { var n = e.getUpperLeftCorner(), r = e.getUpperRightCorner(), o = e.getBottomRightCorner(), i = e.getBottomLeftCorner(), a = new t; return a.moveTo(n.x, n.y), a.lineTo(r.x, r.y), a.lineTo(o.x, o.y), a.lineTo(i.x, i.y), a.lineTo(n.x, n.y), a.close(), a }, t }(), Se = function () { function t(t, e, n, r, o) { this._angle = 0, this._scaleX = 0, this._scaleY = 0, this._translateX = 0, this._translateY = 0, this._transformChangedEvent = new T, this._angle = o || 0, this._scaleX = t || 0 === t ? t : 1, this._scaleY = e || 0 === t ? e : 1, this._translateX = n || 0, this._translateY = r || 0 } return t.prototype.addTransformChanged = function (t) { this._transformChangedEvent.add(t) }, t.prototype.removeTransformChanged = function (t) { this._transformChangedEvent.remove(t) }, t.prototype._setProperty = function (t, e, n) { void 0 === n && (n = !1); var r = "_" + t; this[r] !== e && (this[r] = e, n || this._transformChangedEvent.notify()) }, Object.defineProperty(t.prototype, "angle", { get: function () { return this._angle }, enumerable: !0, configurable: !0 }), t.prototype.setAngle = function (t, e) { this._setProperty("angle", t, e) }, Object.defineProperty(t.prototype, "scaleX", { get: function () { return this._scaleX }, enumerable: !0, configurable: !0 }), t.prototype.setScaleX = function (t, e) { this._setProperty("scaleX", t, e) }, Object.defineProperty(t.prototype, "scaleY", { get: function () { return this._scaleY }, enumerable: !0, configurable: !0 }), t.prototype.setScaleY = function (t, e) { this._setProperty("scaleY", t, e) }, Object.defineProperty(t.prototype, "translateX", { get: function () { return this._translateX }, enumerable: !0, configurable: !0 }), t.prototype.setTranslateX = function (t, e) { this._setProperty("translateX", t, e) }, Object.defineProperty(t.prototype, "translateY", { get: function () { return this._translateY }, enumerable: !0, configurable: !0 }), t.prototype.setTranslateY = function (t, e) { this._setProperty("translateY", t, e) }, t.prototype.move = function (t, e) { var n = this.clone(); null != t && this.setTranslateX(this._translateX + t, !0), null != e && this.setTranslateY(this._translateY + e, !0), n.equals(this) || this._transformChangedEvent.notify() }, t.prototype.rotate = function (t) { null == t || ve(t, 0) || (this._angle += t, this._transformChangedEvent.notify()) }, t.prototype.clone = function () { return new t(this._scaleX, this._scaleY, this._translateX, this._translateY, this._angle) }, t.prototype.equals = function (t, e) { return null != t && ve(this._scaleX, t._scaleX, e) && ve(this._scaleY, t._scaleY, e) && ve(this._translateX, t._translateX, e) && ve(this._translateY, t._translateY, e) && ve(this._angle, t._angle, e) }, t.isEqual = function (t, e, n) { return void 0 === n && (n = 1e-4), null == t && null == e || null != t && null != e && t.equals(e, n) }, t.prototype.toMatrix = function () { var t = this._angle, e = Math.sin(me(t)), n = Math.cos(me(t)); return new ye(n * this._scaleX, e * this._scaleX, -e * this._scaleY, n * this._scaleY, this._translateX, this._translateY) }, t.prototype.clear = function (t) { var e = void 0 === t ? {} : t, n = e.keepAngle, r = void 0 !== n && n, o = e.supressOnChanged, i = void 0 !== o && o; this._scaleX = 1, this._scaleY = 1, this._translateX = 0, this._translateY = 0, r || (this._angle = 0), i || this._transformChangedEvent.notify() }, Object.defineProperty(t.prototype, "isEmpty", { get: function () { return ve(this._scaleX, 1) && ve(this._scaleY, 1) && ve(this._translateX, 0) && ve(this._translateY, 0) && ve(this._angle, 0) }, enumerable: !0, configurable: !0 }), t }(), xe = function () { function t(t, e, n, r, o) { this.centerX = t || 0, this.centerY = e || 0, this.width = n || 0 === n ? n : 2, this.height = r || 0 === r ? r : 2, this.angle = o || 0 } return t.prototype.getSimplifiedObject = function () { return { centerX: this.centerX, centerY: this.centerY, width: this.width, height: this.height, angle: this.angle } }, t.prototype.clone = function () { return new t(this.centerX, this.centerY, this.width, this.height, this.angle) }, Object.defineProperty(t.prototype, "bounds", { get: function () { for (var t = new de(this.centerX, this.centerY), e = this.width, n = this.height, r = [new de(-e / 2, -n / 2), new de(-e / 2, n / 2), new de(e / 2, -n / 2), new de(e / 2, n / 2)], o = 0, i = 0, a = 0, s = 0, l = 0; l < 4; l++)r[l].rotate(this.angle), (r[l].x < o || 0 === l) && (o = r[l].x), (r[l].y < i || 0 === l) && (i = r[l].y), (r[l].x > a || 0 === l) && (a = r[l].x), (r[l].y > s || 0 === l) && (s = r[l].y); return new ge(o + t.x, i + t.y, a - o, s - i) }, enumerable: !0, configurable: !0 }), t.prototype.equals = function (t, e) { return null != t && ve(this.centerX, t.centerX, e) && ve(this.centerY, t.centerY, e) && ve(this.width, t.width, e) && ve(this.height, t.height, e) && ve(this.angle, t.angle, e) }, t.prototype.getUpperLeftCorner = function () { var t = new de(-this.width / 2, -this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getUpperCenterPoint = function () { var t = new de(0, -this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getLeftCenterPoint = function () { var t = new de(-this.width / 2, 0); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getRightCenterPoint = function () { var t = new de(this.width / 2, 0); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getUpperRightCorner = function () { var t = new de(this.width / 2, -this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getBottomRightCorner = function () { var t = new de(this.width / 2, this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getBottomLeftCorner = function () { var t = new de(-this.width / 2, this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype.getBottomCenterPoint = function () { var t = new de(0, this.height / 2); return t = (t = t.rotate(this.angle)).translate(this.centerX, this.centerY) }, t.prototype._checkProjectionIntersection = function (t, e) { var n = this._getProjections(t), r = this._getProjections(e); return n.left <= r.right && n.right >= r.left && n.top <= r.bottom && n.bottom >= r.top }, t.prototype._getProjections = function (t) { var e, n, r, o; e = n = t[0].x, r = o = t[0].y; for (var i = 1; i < t.length; i++)e = Math.min(e, t[i].x), n = Math.max(n, t[i].x), r = Math.min(r, t[i].y), o = Math.max(o, t[i].y); return { left: e, right: n, top: r, bottom: o } }, t.prototype.intersectsWith = function (t) { var e = this.clone(), n = t.clone(); if (!ve(this.angle, 0)) { var r = e.angle; e.angle = 0, (l = n.center).rotateAt(-r, e.center), n.center = l, n.angle -= r } var o = [e.getUpperLeftCorner(), e.getUpperRightCorner(), e.getBottomRightCorner(), e.getBottomLeftCorner()], i = [n.getUpperLeftCorner(), n.getUpperRightCorner(), n.getBottomRightCorner(), n.getBottomLeftCorner()], a = this._checkProjectionIntersection(o, i), s = !0; if (a && !ve(this.angle, t.angle)) { e = this.clone(); var l; r = (n = t.clone()).angle; n.angle = 0, (l = e.center).rotateAt(-r, n.center), e.center = l, e.angle -= r, o = [e.getUpperLeftCorner(), e.getUpperRightCorner(), e.getBottomRightCorner(), e.getBottomLeftCorner()], i = [n.getUpperLeftCorner(), n.getUpperRightCorner(), n.getBottomRightCorner(), n.getBottomLeftCorner()], s = this._checkProjectionIntersection(o, i) } return a && s }, Object.defineProperty(t.prototype, "location", { get: function () { return this.getUpperLeftCorner() }, set: function (t) { var e = this.getUpperLeftCorner(); this.centerX = this.centerX + (t.x - e.x), this.centerY = this.centerY + (t.y - e.y) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "center", { get: function () { return new de(this.centerX, this.centerY) }, set: function (t) { this.centerX = t.x, this.centerY = t.y }, enumerable: !0, configurable: !0 }), t.prototype.rotateAt = function (t, e) { var n = this.center; return n.rotateAt(t, e), this.center = n, this.angle += t, this }, t.prototype.translate = function (t, e) { this.centerX += t, this.centerY += e }, t.prototype.setTransform = function (t) { null == t || t.equals(new Se) || (this.width *= t.scaleX, this.height *= t.scaleY, this.angle += t.angle, this.centerX += t.translateX, this.centerY += t.translateY) }, t.prototype.getTransform = function (t) { if (null == t || this.equals(t)) return new Se; var e = 0 === t.width ? 0 : this.width / t.width, n = 0 === t.height ? 0 : this.height / t.height, r = this.angle - t.angle, o = t.center, i = this.centerX - o.x, a = this.centerY - o.y; return new Se(e, n, i, a, r) }, t.prototype.transform = function (t, e) { this.rotateAt(t.angle, e), t.setAngle(0), this.setTransform(t) }, t.prototype.toString = function () { return [this.centerX, this.centerY, this.width, this.height, this.angle].join(",") }, t.prototype.toRectangleF = function () { return new ge(this.centerX - this.width / 2, this.centerY - this.height / 2, this.width, this.height) }, t.prototype.contains = function (t) { var e = this.clone(); e.angle = 0; var n = t.clone(); return n.rotateAt(-this.angle, this.center), e.bounds.contains(n) }, t.prototype.getCornerByIndex = function (t) { switch (t) { case 0: return this.getUpperLeftCorner(); case 1: return this.getUpperRightCorner(); case 2: return this.getBottomRightCorner(); case 3: return this.getBottomLeftCorner(); default: return null } }, t.prototype.transformByMatrix = function (t) { var e = this.clone(); return e.center = t.transformPoint(e.center), e.width *= t.scaleX, e.height *= t.scaleY, e.angle += t.angle, e }, t.union = function (e, n) { var r = e.clone(), o = n.clone(), i = r.angle, a = r.center; r.angle = 0, o.rotateAt(-i, a); var s = ge.union(r.bounds, o.bounds), l = new de(s.left + s.width / 2, s.top + s.height / 2), u = new t; u.center = l; var c = -1 === Math.sign(e.width) || -1 === Math.sign(e.width) ? -1 : 1, p = -1 === Math.sign(e.height) || -1 === Math.sign(n.height) ? -1 : 1; return u.width = s.width * c, u.height = s.height * p, u.rotateAt(i, a), u }, t.fromRectangleF = function (e, n) { return new t(e.left + e.width / 2, e.top + e.height / 2, e.width, e.height, "number" == typeof n ? n : 0) }, t.FromLTRB = function (e, n, r, o) { return t.fromRectangleF(ge.FromLTRB(e, n, r, o)) }, t.getRectWithOffset = function (t, e) { if (null == t) throw new C("RotatedRectangleF.getRectWithOffset: rectangle cannot be null!"); return null == e || e.isOrigin() ? t.clone() : t.transformByMatrix((new ye).translate(e.x, e.y)) }, t }(), Oe = function () { function t(t, e) { this.width = 0, this.height = 0, this.width = t, this.height = e } return t.prototype.clone = function () { return new t(this.width, this.height) }, t.prototype.toString = function () { return [this.width, this.height].join(",") }, t.prototype.updateByMatrix = function (t) { return t.updateObjectByMatrix(this, "width", "height"), this }, t }(), Ie = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }; function je(t, e) { if (null == t && null == e) return !0; if (null == t && null != e || null != t && null == e) return !1; var n = typeof t; if (n !== typeof e) return !1; if ("string" === n || "boolean" === n) return t === e; if ("number" === n) return ve(t, e); if (Array.isArray(t) && Array.isArray(e)) return t.length === e.length && ke(t, e); var r = e; return ("function" == typeof t.equals && "function" == typeof r.equals ? function (t, e) { return t.equals(e) } : function (t, e) { return t == e })(t, e) } function ke(t, e) { return null == t && null == e || null != t && null != e && (t.length === e.length && t.reduce((function (t, n, r) { return t && je(n, e[r]) }), !0)) } function Ee(t, e) { return (null == t ? void 0 : t.length) === (null == e ? void 0 : e.length) && t.reduce((function (t, n, r) { return t && n == e[r] }), !0) } function Te(t) { return null == t || "" === t.trim() } function Be(t) { return !(Te(t) || !t.startsWith("<")) && null == (new DOMParser).parseFromString("<root>" + t + "</root>", "application/xml").querySelector("parsererror") } function Me(t, e) { var n, r, o, i; void 0 === e && (e = " "); var a = (new DOMParser).parseFromString("<root>" + t + "</root>", "application/xml"); if (null == a.querySelector("parsererror")) { try { for (var s = Ie(Array.from(a.querySelectorAll("br"))), l = s.next(); !l.done; l = s.next()) { l.value.textContent = e } } catch (t) { n = { error: t } } finally { try { l && !l.done && (r = s.return) && r.call(s) } finally { if (n) throw n.error } } var u = Array.from(a.querySelectorAll("p, li")); if (u.length > 1) { var c = A.without(u, u[u.length - 1]); try { for (var p = Ie(c), h = p.next(); !h.done; h = p.next()) { var f = h.value, d = document.createElementNS("application/xml", "span"); d.textContent = e, f.appendChild(d) } } catch (t) { o = { error: t } } finally { try { h && !h.done && (i = p.return) && i.call(p) } finally { if (o) throw o.error } } } return a.querySelector("root").textContent } return console.warn("Bad value", a), function (t) { var e = (new DOMParser).parseFromString("<span></span>", "application/xml"); e.querySelector("span").textContent = t; var n = (new XMLSerializer).serializeToString(e); return n = n.replace("<span>", "").replace("</span>", "").replace("<span/>", "").replace("<span />", "") }(t) } new Map; var Ae = function () { function t(t, e) { void 0 === e && (e = ""), this._name = "", this._propertyChanged = new M, this.id = null != t ? t : (new O).toString(), this.name = e, null == this._tags && (this._tags = {}) } return Object.defineProperty(t.prototype, "version", { get: function () { return "6.5.22" }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "name", { get: function () { return this._name }, set: function (t) { this._name !== t && (this._name = t, this._propertyChanged.notify(this, "name")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "tags", { get: function () { return this._tags }, set: function (t) { if (null == t) throw new C("value is null!"); this._tags = t }, enumerable: !0, configurable: !0 }), t.prototype._copy = function (t, e, n, r) { if (void 0 === n && (n = !1), void 0 === r && (r = !1), e.name = t.name, n ? e.generateNewIds() : e.id = t.id, null != t.tags) for (var o in e.tags = {}, t.tags) e.tags[o] = A.clone(t.tags[o]) }, t.prototype.getSimplifiedObject = function (t) { var e = function (t, e) { null == e ? e = [] : "string" == typeof e && (e = [e]); var n = []; for (var r in t) n.push(r); return n.filter((function (n) { var r, o; try { for (var i = Ie(["_", "$$"]), a = i.next(); !a.done; a = i.next()) { var s = a.value; if (n.startsWith(s)) return !1 } } catch (t) { r = { error: t } } finally { try { a && !a.done && (o = i.return) && o.call(i) } finally { if (r) throw r.error } } return !e.some((function (t) { return t === n })) && "function" != typeof t[n] })).reduce((function (e, n) { return e[n] = t[n], e }), {}) }(this, t); return e.tags = this.tags, e.id = this.id.toString(), e }, t.prototype.generateNewIds = function () { this._generateNewId() }, t.prototype._generateNewId = function () { this.id = (new O).toString() }, t.prototype.toString = function () { return this.name }, t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t.prototype.equals = function (t) { return this.name === t.name && this.version === t.version }, t }(), Re = function () { function t(t) { this._previewFromServer = !1, this.preview = null, this.profileId = null, null != t && (Te(t.preview) || (this._previewFromServer = !0), "string" != typeof t && this._init(t)) } return Object.defineProperty(t.prototype, "previewFromServer", { get: function () { return this._previewFromServer }, enumerable: !0, configurable: !0 }), t.prototype.needUpdate = function (t) { var e = "RgbColor" === this.type, n = e && null != this.profileId && this.profileId !== t; return (!e || n) && !this.previewFromServer }, t.prototype.equals = function (t, e) { return void 0 === e && (e = !1), t.profileId === this.profileId && (e || t.preview === this.preview) }, t.prototype.getData = function () { return { preview: this.preview, profileId: this.profileId, type: this.type } }, t.prototype._init = function (t) { Te(t.preview) || (this.preview = t.preview), Te(t.profileId) || (this.profileId = t.profileId) }, t.prototype._validateString = function (t) { if (Te(t)) throw new C("Value must be a non-empty string") }, t.prototype._validateNumber = function (t, e, n) { if (void 0 === e && (e = 0), void 0 === n && (n = 255), "number" != typeof t) throw new C("Value must be a number"); if (t < e || t > n) throw new C("Value must be in range [" + e + ", " + n + "]") }, t.equals = function (t, e) { return null == t && null == e || null != t && t.equals(e) }, t }(), Le = function (t) { function e(e) { var n = t.call(this, e) || this; if (n._r = 0, n._g = 0, n._b = 0, n._a = 0, null == e) return n; var r = "Incorrect RgbColor format: " + JSON.stringify(e); if ("string" == typeof e) { var o = e; if (0 !== e.indexOf("#") && 0 !== e.indexOf("rgb") && null == (o = n._parseNamedColor(e)) && console.warn("Unknown rgb color name: " + e), n._tryInitFromRgba(o)) return n; if (n._tryInitFromRgb(o)) return n; n._tryInitFromHex(o) || console.warn(r) } else try { n._init(e) } catch (t) { console.warn(r) } return n } return m(e, t), e.prototype._parseNamedColor = function (t) { if (window.getComputedStyle) { var e = document.createElement("div"); e.style.color = t, document.body.appendChild(e); var n = window.getComputedStyle(e).color; return document.body.removeChild(e), n } return console.warn("Unable to parse rgb color string " + t), null }, e.prototype._tryInitFromRgba = function (t) { var n = e.matchRgba(t); if (null != n && 6 === n.length) { var r = parseInt((255 * parseFloat(n[4])).toFixed(0)); return r = Math.max(r, 0), r = Math.min(r, 255), this._init({ r: +n[1], g: +n[2], b: +n[3], a: r }), !0 } return !1 }, e.prototype._tryInitFromRgb = function (t) { var n = e.matchRgb(t); return null != n && 4 === n.length && (this._init({ r: +n[1], g: +n[2], b: +n[3], a: 255 }), !0) }, e.prototype._tryInitFromHex = function (t) { t = t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, (function (t, e, n, r) { return e + e + n + n + r + r })); var e = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t); return null != e && 4 === e.length && (this._init({ r: parseInt(e[1], 16), g: parseInt(e[2], 16), b: parseInt(e[3], 16), a: 255 }), !0) }, Object.defineProperty(e.prototype, "type", { get: function () { return "RgbColor" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "r", { get: function () { return this._r }, set: function (t) { this._r = t, this._updatePreview() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "g", { get: function () { return this._g }, set: function (t) { this._g = t, this._updatePreview() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "b", { get: function () { return this._b }, set: function (t) { this._b = t, this._updatePreview() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "a", { get: function () { return this._a }, set: function (t) { this._a = t, this._updatePreview() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alpha", { get: function () { return this.a }, enumerable: !0, configurable: !0 }), e.matchRgba = function (t) { return e._rgba.lastIndex = 0, e._rgba.exec(t) }, e.matchRgb = function (t) { return e._rgb.lastIndex = 0, e._rgb.exec(t) }, e.prototype.getData = function () { var e = t.prototype.getData.call(this); return e.r = this.r, e.g = this.g, e.b = this.b, e.a = this.a, e }, e.prototype.clone = function () { return new e(this) }, e.prototype.toString = function () { return this._getPreview() }, e.prototype.equals = function (n) { return n instanceof e && t.prototype.equals.call(this, n) }, e.prototype._getPreview = function () { if (255 === this.a) return "rgb(" + this.r + "," + this.g + "," + this.b + ")"; var t = (this.a / 255).toFixed(7); return "rgba(" + this.r + "," + this.g + "," + this.b + "," + t + ")" }, e.prototype._init = function (e) { t.prototype._init.call(this, e), e.a = null != e.a ? e.a : 255, this._validateNumber(e.r), this._validateNumber(e.g), this._validateNumber(e.b), this._validateNumber(e.a), this.r = e.r, this.g = e.g, this.b = e.b, this.a = e.a, this._updatePreview() }, e.prototype._updatePreview = function () { this.preview = this._getPreview() }, e._rgba = /^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,}(\.\d{1,})?)\s*\)\s*;{0,1}\s*$/g, e._rgb = /^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*;{0,1}\s*$/g, e }(Re), Ne = function () { function t() { } return t.isValidRgbColor = function (t) { return !Te(t) && (null != Le.matchRgb(t) || null != Le.matchRgba(t)) }, t.convertPercentToByte = function (t) { return be(0, parseInt((255 * parseFloat(t) / 100).toFixed(0)), 255) }, t.convertByteToPercent = function (t) { return (t / 255 * 100).toFixed(0) + "%" }, t }(), Fe = function () { function t(t, e, n) { this._sourceString = t, this._regexArray = e, this._maxValue = n } return t.prototype.validate = function () { var t = function (t, e) { return "ComponentName - " + t + ", Value - " + e + "; " }, e = ""; if (this._validate(this._regexArray[1]) || (e = e.concat(t("C", this._regexArray[1]))), this._validate(this._regexArray[2]) || (e = e.concat(t("M", this._regexArray[2]))), this._validate(this._regexArray[3]) || (e = e.concat(t("Y", this._regexArray[3]))), this._validate(this._regexArray[4]) || (e = e.concat(t("K", this._regexArray[4]))), null == this._regexArray[5] || this._validate(this._regexArray[5]) || (e = e.concat(t("A", this._regexArray[5]))), e.length > 0) { var n = e.length - 2; e = e.substring(0, n), console.warn("Invalid value of CMYK components. SourceString: " + this._sourceString + "; InvalidComponents: " + e + ".") } }, t.prototype._validate = function (t) { var e = parseFloat(t); return e >= 0 && e <= this._maxValue }, t }(), ze = function (t) { function e(e) { var n = t.call(this, e) || this; if (n.c = 255, n.m = 255, n.y = 255, n.k = 255, n.a = 255, null == e) return n; var r = "Incorrect CmykColor format: " + JSON.stringify(e); if ("string" == typeof e) n._tryInitFromPercentCmyk(e) || n._tryInitFromRelativeCmyk(e) || n._tryInitFromDeviceCmyk(e) ? n._previewFromServer = Ne.isValidRgbColor(n.preview) : console.warn(r); else try { n._init(e) } catch (t) { console.warn(r) } return n } return m(e, t), Object.defineProperty(e.prototype, "type", { get: function () { return "CmykColor" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alpha", { get: function () { return this.a }, enumerable: !0, configurable: !0 }), e.prototype._tryInitFromDeviceCmyk = function (t) { var e = /^\s*device-cmyk\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,3})\s*(\,\s*(\d{1,}(\.\d{1,})?))?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g.exec(t); if (null != e && 10 === e.length) { var n = { c: +e[1], m: +e[2], y: +e[3], k: +e[4], preview: e[9] }; return null != e[6] && (n.a = this._convertRelativeToByte(e[6])), this._init(n), !0 } return !1 }, e.prototype._tryInitFromPercentCmyk = function (t) { var e = /^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?)%)?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(t); if (null != e && 7 === e.length) { new Fe(t, e, 100).validate(); var n = { c: Ne.convertPercentToByte(e[1]), m: Ne.convertPercentToByte(e[2]), y: Ne.convertPercentToByte(e[3]), k: Ne.convertPercentToByte(e[4]), preview: e[6] }; return null != e[5] && (n.a = Ne.convertPercentToByte(e[5])), this._init(n), !0 } return !1 }, e.prototype._tryInitFromRelativeCmyk = function (t) { var e = /^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?))?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(t); if (null != e && 7 === e.length) { new Fe(t, e, 1).validate(); var n = { c: this._convertRelativeToByte(e[1]), m: this._convertRelativeToByte(e[2]), y: this._convertRelativeToByte(e[3]), k: this._convertRelativeToByte(e[4]), preview: e[6] }; return null != e[5] && (n.a = this._convertAlpha(e[5])), this._init(n), !0 } return !1 }, e.prototype._convertRelativeToByte = function (t) { return be(0, parseInt((255 * parseFloat(t)).toFixed(0)), 255) }, e.prototype._convertAlpha = function (t) { return be(parseInt((255 * parseFloat(t)).toFixed(0)), 0, 255) }, e.prototype.clone = function () { return new e(this) }, e.prototype.getData = function () { var e = t.prototype.getData.call(this); return e.c = this.c, e.m = this.m, e.y = this.y, e.k = this.k, e.a = this.a, e }, e.prototype.equals = function (n, r) { return void 0 === r && (r = !1), n instanceof e && (t.prototype.equals.call(this, n, r) && n instanceof e && this.c === n.c && this.m === n.m && this.y === n.y && this.k === n.k && this.a === n.a) }, e.prototype.toString = function () { var t = "cmyk(" + this._toRelative(this.c) + "," + this._toRelative(this.m) + "," + this._toRelative(this.y) + "," + this._toRelative(this.k) + "," + this._toRelative(this.a); return null != this.preview && (t += "," + this.preview), t += ")" }, e.prototype._toRelative = function (t) { return (t / 255).toFixed(7) }, e.prototype._getPreview = function () { return this.preview }, e.prototype._init = function (e) { t.prototype._init.call(this, e), e.a = null != e.a ? e.a : 255, this._validateNumber(e.c), this._validateNumber(e.m), this._validateNumber(e.y), this._validateNumber(e.k), this._validateNumber(e.a), this.c = e.c, this.m = e.m, this.y = e.y, this.k = e.k, this.a = e.a }, e }(Re), De = function (t) { function e(e) { var n = t.call(this, e) || this; if (n.l = 0, n.a = 255, null == e) return n; try { n._init(e) } catch (t) { console.warn("Incorrect GrayscaleColor format: " + JSON.stringify(e)) } return n } return m(e, t), Object.defineProperty(e.prototype, "type", { get: function () { return "GrayscaleColor" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alpha", { get: function () { return this.a }, enumerable: !0, configurable: !0 }), e.prototype.clone = function () { return new e(this) }, e.prototype.equals = function (n) { return n instanceof e && (t.prototype.equals.call(this, n) && n instanceof e && this.l === n.l && this.a === n.a) }, e.prototype.toString = function () { return this._getPreview() }, e.prototype.getData = function () { var e = t.prototype.getData.call(this); return e.l = this.l, e.a = this.a, e }, e.prototype._getPreview = function () { if (255 === this.a) return "rgb(" + this.l + "," + this.l + "," + this.l + ")"; var t = (this.a / 255).toFixed(7); return "rgba(" + this.l + "," + this.l + "," + this.l + "," + t + ")" }, e.prototype._init = function (e) { t.prototype._init.call(this, e), e.a = null != e.a ? e.a : 255, this._validateNumber(e.l), this._validateNumber(e.a), this.l = e.l, this.a = e.a, null == this.preview && (this.preview = this._getPreview()) }, e }(Re), Ve = function (t) { function e(e) { var n = t.call(this, e) || this; if (n.l = 0, n.a = -128, n.b = -128, n.alpha = 0, null == e) return n; var r = "Incorrect LabColor format: " + JSON.stringify(e); if ("string" == typeof e) n._tryInitFromString(e) ? n._previewFromServer = Ne.isValidRgbColor(n.preview) : console.warn(r); else try { n._init(e) } catch (t) { console.warn(r) } return n } return m(e, t), Object.defineProperty(e.prototype, "type", { get: function () { return "LabColor" }, enumerable: !0, configurable: !0 }), e.prototype._tryInitFromString = function (t) { e._lab.lastIndex = 0; var n = e._lab.exec(t); return null != n && 8 === n.length && (this._init({ l: +n[1], a: +n[2], b: +n[3], alpha: null != n[5] ? Ne.convertPercentToByte(n[5]) : 255, preview: null != n[7] ? n[7] : null }), !0) }, e.prototype.clone = function () { return new e(this) }, e.prototype.equals = function (n) { return n instanceof e && (t.prototype.equals.call(this, n) && n instanceof e && this.l === n.l && this.a === n.a && this.b === n.b && this.alpha === n.alpha) }, e.prototype.toString = function () { var t = "lab(" + this.l + "," + this.a + "," + this.b + "," + Ne.convertByteToPercent(this.alpha); return null != this.preview && (t += "," + this.preview), t += ")" }, e.prototype.getData = function () { var e = t.prototype.getData.call(this); return e.l = this.l, e.a = this.a, e.b = this.b, e.alpha = this.alpha, e }, e.prototype._getPreview = function () { return this.preview }, e.prototype._init = function (e) { t.prototype._init.call(this, e), e.alpha = null != e.alpha ? e.alpha : 255, this._validateNumber(e.l), this._validateNumber(e.a, -128, 127), this._validateNumber(e.b, -128, 127), this._validateNumber(e.alpha), this.l = e.l, this.a = e.a, this.b = e.b, this.alpha = e.alpha }, e._lab = /^\s*lab\(\s*(\d{1,3})\s*,\s*(-*\d{1,3})\s*,\s*(-*\d{1,3})\s*(,\s*(\d{1,3})%)?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g, e }(Re), qe = function () { function t() { } return t.registerColor = function (e, n, r) { e && (t._createFunctionByType[e] = r), n && (t._createFunctionByName[n] = r) }, Object.defineProperty(t, "rgbColorProfileId", { set: function (e) { t._rgbColorProfileId = e }, enumerable: !0, configurable: !0 }), t._updateRgbColor = function (e) { return A.isEmpty(null == e ? void 0 : e.profileId) && (e.profileId = t._rgbColorProfileId), e }, t.createColor = function (e, n, r) { void 0 === n && (n = !1), void 0 === r && (r = !1); try { return e instanceof Re ? e : "string" == typeof e ? 0 === e.indexOf("device-cmyk") || 0 === e.indexOf("cmyk") ? new ze(e) : 0 === e.indexOf("lab") ? new Ve(e) : 0 === e.indexOf("spot") ? t._createColorByName("spot", e) : r ? t._updateRgbColor(new Le(e)) : new Le(e) : t._fromData(e, r) } catch (t) { if (!1 !== n) throw t; return console.warn("Unable to create color from value " + JSON.stringify(e) + ". Error: " + t), new Le("rgba(0,0,0,1)") } }, t._createColorByName = function (e, n) { if (!t._createFunctionByName[e]) throw "Color with name '" + e + "' was not registered in ColorFactory"; return new (0, t._createFunctionByName[e])(n) }, t._createColorByType = function (e, n) { if (!t._createFunctionByType[e]) throw "Color with type name '" + e + "' was not registered in ColorFactory"; return new (0, t._createFunctionByType[e])(n) }, t._fromData = function (e, n) { if (void 0 === n && (n = !1), null == e) throw "Value cannot be null"; var r = e.type; if ("RgbColor" === r) return n ? t._updateRgbColor(new Le(e)) : new Le(e); if ("CmykColor" === r) return new ze(e); if ("GrayscaleColor" === r) return new De(e); if ("LabColor" === r) return new Ve(e); if ("SpotColor" === r) return t._createColorByType("SpotColor", e); throw "Unsupported color type " + r }, t._createFunctionByType = {}, t._createFunctionByName = {}, t }(), Ue = function (t) { function e(e) { var n = t.call(this, e) || this; if (null == e) return n; var r = "Incorrect SpotColor format: " + JSON.stringify(e); if ("string" == typeof e) n._tryInitFromString(e) ? n._previewFromServer = Ne.isValidRgbColor(n.preview) : console.warn(r); else try { n._init(e) } catch (t) { console.warn(r) } return n } return m(e, t), Object.defineProperty(e.prototype, "type", { get: function () { return "SpotColor" }, enumerable: !0, configurable: !0 }), e.prototype._tryInitFromString = function (t) { e._spot.lastIndex = 0; var n = e._spot.exec(t); return null != n && 10 === n.length && (this._init({ inkName: n[1].replace(/'/g, "").replace(/\"/g, ""), inkColor: qe.createColor(n[2]), inkSolidity: null != n[4] ? +n[4] : 1, tint: null != n[7] ? Ne.convertPercentToByte(n[7]) : 255, preview: null != n[9] ? n[9] : null }), !0) }, e.prototype.toString = function () { var t = this.inkColor.clone(); return t.preview = null, "spot('" + this.inkName + "'," + t.toString() + "," + this.inkSolidity + "," + Ne.convertByteToPercent(this.tint) + "," + this.preview + ")" }, e.prototype.clone = function () { return new e(this) }, e.prototype.equals = function (n) { return n instanceof e && (t.prototype.equals.call(this, n) && n instanceof e && this.inkName === n.inkName && this.inkColor.equals(n.inkColor) && this.inkSolidity === n.inkSolidity && this.alpha === n.alpha && this.tint === n.tint) }, e.prototype.getData = function () { var e = t.prototype.getData.call(this); return e.inkName = this.inkName, e.inkColor = this.inkColor.getData(), e.inkSolidity = this.inkSolidity, e.alpha = this.alpha, e.tint = this.tint, e }, e.prototype._getPreview = function () { return this.preview }, e.prototype._init = function (e) { t.prototype._init.call(this, e), e.alpha = null != e.alpha ? e.alpha : 255, e.tint = null != e.tint ? e.tint : 255; var n = qe.createColor(e.inkColor, !0); this._validateString(e.inkName), this._validateNumber(e.inkSolidity, 0, 1), this._validateNumber(e.alpha), this._validateNumber(e.tint), this.inkName = e.inkName, this.inkColor = n, this.inkSolidity = e.inkSolidity, this.alpha = e.alpha, this.tint = e.tint }, e._spot = /^\s*spot\(\s*([^()]*)\s*,\s*(.{3,4}\([^()]*\))\s*(,\s*(\d{1}(\.\d{1,})?))?\s*(,\s*(\d{1,3})%)?\s*(,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g, e }(Re); function We(t, e) { return t / e * 72 } qe.registerColor("SpotColor", "spot", Ue); var Ge, He = function (t) { return t[t.Point = 0] = "Point", t[t.Percent = 1] = "Percent", t[t.Pixel = 2] = "Pixel", t }({}), Je = function () { function t(t, e) { this._rectangle = t, this._dpi = e } return t.prototype.convert = function (t) { if (-1 === t.indexOf("/")) return this._normalize(this._combineRadiuses(this._getRadiuses(t, !0), this._getRadiuses(t, !1))); var e = t.split("/"); return this._normalize(this._combineRadiuses(this._getRadiuses(e[0].trim(), !0), this._getRadiuses(e[1].trim(), !1))) }, t.prototype._normalize = function (t) { if (null == t) return t; var e = t, n = (e[0].width + e[1].width) / this._rectangle.width, r = (e[2].width + e[3].width) / this._rectangle.width, o = (e[0].height + e[3].height) / this._rectangle.height, i = (e[1].height + e[2].height) / this._rectangle.height; return n > 1 && (e[0].width = e[0].width / n, e[1].width = e[1].width / n), r > 1 && (e[2].width = e[2].width / r, e[3].width = e[3].width / r), i > 1 && (e[1].height = e[1].height / i, e[2].height = e[2].height / i), o > 1 && (e[3].height = e[3].height / o, e[0].height = e[0].height / o), t }, t.prototype._combineRadiuses = function (t, e) { return null == t || 4 !== t.length || null == e || 4 !== e.length ? null : [new Oe(t[0], e[0]), new Oe(t[1], e[1]), new Oe(t[2], e[2]), new Oe(t[3], e[3])] }, t.prototype._getRadiuses = function (t, e) { if (null == t) return null; var n = t.split(" ").filter((function (t) { return null != t && t.length > 0 })); if (n.length < 1) return null; if (n.length > 4) return null; for (var r = [], o = 0; o < n.length; o++) { var i = this._tryParseNumberPart(n[o]); if (null == i) return null; r.push(this._toPoints(i, e)) } switch (r.length) { case 1: return [r[0], r[0], r[0], r[0]]; case 2: return [r[0], r[1], r[0], r[1]]; case 3: return [r[0], r[1], r[2], r[1]]; default: return r } }, t.prototype._tryParseNumberPart = function (t) { if (t.endsWith("%")) { var e = parseFloat(t); return NaN !== e ? { value: e, measureType: He.Percent } : null } if (t.toLowerCase().endsWith("px")) { var n = parseFloat(t); return NaN !== n ? { value: n, measureType: He.Pixel } : null } var r = parseFloat(t); return isNaN(r) ? null : { value: r, measureType: He.Point } }, t.prototype._toPoints = function (t, e) { switch (t.measureType) { case He.Percent: return (e ? this._rectangle.width : this._rectangle.height) * t.value / 100; case He.Pixel: return We(t.value, this._dpi); default: return t.value } }, t }(), Xe = function (t) { function e(e) { var n, r, o, i, a, s, l, u, c, p, h, f, d = t.call(this) || this; d._propertyChanged = new M; var y = e; return d._left = null !== (o = null !== (r = null !== (n = null == y ? void 0 : y.left) && void 0 !== n ? n : null == y ? void 0 : y.horizontal) && void 0 !== r ? r : y) && void 0 !== o ? o : 0, d._top = null !== (s = null !== (a = null !== (i = null == y ? void 0 : y.top) && void 0 !== i ? i : null == y ? void 0 : y.vertical) && void 0 !== a ? a : y) && void 0 !== s ? s : 0, d._right = null !== (c = null !== (u = null !== (l = null == y ? void 0 : y.right) && void 0 !== l ? l : null == y ? void 0 : y.horizontal) && void 0 !== u ? u : y) && void 0 !== c ? c : 0, d._bottom = null !== (f = null !== (h = null !== (p = null == y ? void 0 : y.bottom) && void 0 !== p ? p : null == y ? void 0 : y.vertical) && void 0 !== h ? h : y) && void 0 !== f ? f : 0, d } return m(e, t), Object.defineProperty(e.prototype, "left", { get: function () { return this._left }, set: function (t) { ve(t, this._left) || (this._left = t, this._propertyChanged.notify(this, "left")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this._top }, set: function (t) { ve(t, this._top) || (this._top = t, this._propertyChanged.notify(this, "top")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this._right }, set: function (t) { ve(t, this._right) || (this._right = t, this._propertyChanged.notify(this, "right")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this._bottom }, set: function (t) { ve(t, this._bottom) || (this._bottom = t, this._propertyChanged.notify(this, "bottom")) }, enumerable: !0, configurable: !0 }), e.prototype.clone = function () { return new e({ left: this.left, top: this.top, right: this.right, bottom: this.bottom }) }, Object.defineProperty(e.prototype, "isEmpty", { get: function () { return 0 === this._left && 0 === this._top && 0 === this._right && 0 === this._bottom }, enumerable: !0, configurable: !0 }), e.prototype.equals = function (t) { return this.left === t.left && this.top === t.top && this.right === t.right && this.bottom === t.bottom }, e.prototype.getSimplifiedObject = function () { return { left: this.left, top: this.top, right: this.right, bottom: this.bottom } }, e.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, e.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, e }(Ae); !function (t) { t.Crop = "Crop", t.Trim = "Trim", t.Bleed = "Bleed" }(Ge || (Ge = {})); var Ye, $e = function () { function t(t) { this._propertyChanged = new M, this._name = "bleed", this._widthPx = 1, this._color = new Le({ r: 255, g: 255, b: 255, a: 255 }), this._altColor = new Le({ r: 0, g: 0, b: 0, a: 255 }), this._stepPx = 10, this._margin = new Xe(10), this._borderRadius = null, this._pdfBox = null, null != t && Object.assign(this, t) } return Object.defineProperty(t.prototype, "name", { get: function () { return this._name }, set: function (t) { this._name !== t && (this._name = t, this._propertyChanged.notify(this, "name")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "widthPx", { get: function () { return this._widthPx }, set: function (t) { ve(this._widthPx, t) || (this._widthPx = t, this._propertyChanged.notify(this, "widthPx")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "altColor", { get: function () { return this._altColor }, set: function (t) { Re.equals(this._altColor, t) || (this._altColor = t, this._propertyChanged.notify(this, "altColor")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "margin", { get: function () { return this._margin }, set: function (t) { "number" == typeof t && (t = new Xe(t)), this._margin = t, this._propertyChanged.notify(this, "margin") }, enumerable: !0, configurable: !0 }), t.prototype.getMargin = function () { return this._margin }, Object.defineProperty(t.prototype, "stepPx", { get: function () { return this._stepPx }, set: function (t) { ve(this._stepPx, t) || (this._stepPx = t, this._propertyChanged.notify(this, "stepPx")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "borderRadius", { get: function () { return this._borderRadius }, set: function (t) { this._borderRadius !== t && (this._borderRadius = t, this._propertyChanged.notify(this, "borderRadius")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pdfBox", { get: function () { return this._pdfBox }, set: function (t) { this._pdfBox !== t && (this._pdfBox = t, this._propertyChanged.notify(this, "pdfBox")) }, enumerable: !0, configurable: !0 }), t.prototype.getRectangle = function (t) { var e = this.getMargin(); return ge.FromLTRB(t.left + e.left, t.top + e.top, t.right - e.right, t.bottom - e.bottom) }, t.prototype.getCornerRadiuses = function (t) { return null == this.borderRadius ? null : new Je(this.getRectangle(t), 72).convert(this.borderRadius) }, t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t.prototype.clone = function () { var e, n = new t; return n.name = this.name, n.widthPx = this.widthPx, n.color = this.color.clone(), n.altColor = this.altColor.clone(), n.stepPx = this.stepPx, n.borderRadius = this.borderRadius, n.pdfBox = this.pdfBox, n.margin = null === (e = this._margin) || void 0 === e ? void 0 : e.clone(), n }, t.voPrefix = "$SAFETY_LINE", t }(), Ke = n(3); n(13); !function (t) { t.Move = "Move", t.Add = "Add", t.Remove = "Remove" }(Ye || (Ye = {})); var Qe, Ze, tn = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, en = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, nn = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(en(arguments[e])); return t }; Ze = (Qe = Ke).from, Qe.from = function (t) { return t instanceof rn ? t : Ze(t) }; var rn = function () { function t() { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this._collection = [], this.constructor = function (t) { throw new w }, this._itemAddedEvent = new T, this._itemRemovedEvent = new T, this._itemMovedEvent = new T, this._enumerable = Ke.from(this._collection), 0 !== t.length && this.setRange(t) } return t.prototype.setRange = function (t) { this.clear(), this.addRange(t) }, t.prototype.addRange = function (e) { var n; e instanceof t && (e = e._collection), "getEnumerator" in (n = e) && "toArray" in n && (e = e.toArray()); for (var r = 0; r < e.length; r++)this.add(e[r]) }, t.prototype.add = function () { for (var t, e, n = [], r = 0; r < arguments.length; r++)n[r] = arguments[r]; try { for (var o = tn(n), i = o.next(); !i.done; i = o.next()) { var a = i.value; this.insertAt(this._collection.length, a) } } catch (e) { t = { error: e } } finally { try { i && !i.done && (e = o.return) && e.call(o) } finally { if (t) throw t.error } } }, t.prototype.push = function (t) { return this.add(t), this.length }, t.prototype.insertAt = function (t, e) { var n, r, o; Array.isArray(e) || (e = [e]); try { for (var i = tn(e), a = i.next(); !a.done; a = i.next()) { var s = a.value; this._checkIfItemExists(s) } } catch (t) { n = { error: t } } finally { try { a && !a.done && (r = i.return) && r.call(i) } finally { if (n) throw n.error } } if (t < 0 || t > this._collection.length) throw new S; (o = this._collection).splice.apply(o, nn([t, 0], e)); for (var l = 0; l < e.length; l++) { s = e[l]; this._onItemAdded(this._collection.indexOf(s), s) } }, t.prototype.remove = function (t) { if (!this.contains(t)) throw new C("The item was not found in this collection."); return this.removeAt(this.indexOf(t)) }, t.prototype.removeAt = function (t) { if (t < 0 || t > this._collection.length - 1) throw new S; var e = this._collection[t]; return this._collection.splice(t, 1), this._onItemRemoved(t, e), e }, t.prototype.removeRange = function (t, e) { for (var n = this._collection.slice(), r = this._collection.splice(t, e - t + 1), o = 0; o < r.length; o++) { var i = r[o]; this._onItemRemoved(n.indexOf(i), i) } return r }, t.prototype.move = function (t, e, n) { "boolean" != typeof n && (n = !1); var r = this._collection[t]; return r && t >= 0 && e >= 0 && t != e && (this._collection.splice(t, 1), this._collection.splice(e, 0, r), n || this._onItemMoved(t, e)), r }, t.prototype.clear = function () { for (var t = this.length - 1; t >= 0; t--)this.removeAt(t) }, t.prototype.replaceAt = function (t, e) { if (e < 0 || e > this._collection.length - 1) throw new S; this._onItemRemoved(e, this._collection[e]), this._collection[e] = t, this._onItemAdded(e, this._collection[e]) }, Object.defineProperty(t.prototype, "length", { get: function () { return this._collection.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "empty", { get: function () { return 0 === this.length }, enumerable: !0, configurable: !0 }), t.prototype.get = function (t) { return this.getItem(t) }, t.prototype.set = function (t, e) { throw new w }, t.prototype.getItem = function (t) { return this._collection[t] }, t.prototype._checkIfItemExists = function (t) { if (this.contains(t)) throw new C("The item already belongs to this collection, or to another collection.") }, t.prototype._onItemAdded = function (t, e) { this._itemAddedEvent.notify({ item: e, index: t, type: Ye.Add }) }, t.prototype.add_itemAdded = function (t) { this._itemAddedEvent.add(t) }, t.prototype.remove_itemAdded = function (t) { this._itemAddedEvent.remove(t) }, t.prototype._onItemRemoved = function (t, e) { this._itemRemovedEvent.notify({ item: e, index: t, type: Ye.Remove }) }, t.prototype.add_itemRemoved = function (t) { this._itemRemovedEvent.add(t) }, t.prototype.remove_itemRemoved = function (t) { this._itemRemovedEvent.remove(t) }, t.prototype._onItemMoved = function (t, e) { this._itemMovedEvent.notify({ oldIndex: t, newIndex: e, type: Ye.Move }) }, t.prototype.add_itemMoved = function (t) { this._itemMovedEvent.add(t) }, t.prototype.remove_itemMoved = function (t) { this._itemMovedEvent.remove(t) }, t.prototype.add_collectionChanged = function (t) { this.add_itemMoved(t), this.add_itemRemoved(t), this.add_itemAdded(t) }, t.prototype.remove_collectionChanged = function (t) { this.remove_itemMoved(t), this.remove_itemRemoved(t), this.remove_itemAdded(t) }, t.prototype[Symbol.iterator] = function () { return this._collection.values() }, t.prototype.toArray = function () { return this._collection.slice() }, t.prototype.getEnumerator = function () { return this._enumerable.getEnumerator() }, t.prototype.traverseBreadthFirst = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).traverseBreadthFirst.apply(t, nn(e)) }, t.prototype.traverseDepthFirst = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).traverseDepthFirst.apply(t, nn(e)) }, t.prototype.flatten = function () { return this._enumerable.flatten() }, t.prototype.pairwise = function (t) { return this._enumerable.pairwise(t) }, t.prototype.scan = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).scan.apply(t, nn(e)) }, t.prototype.select = function (t) { return this._enumerable.select(t) }, t.prototype.selectMany = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).selectMany.apply(t, nn(e)) }, t.prototype.where = function (t) { return this._enumerable.where(t) }, t.prototype.choose = function (t) { return this._enumerable.choose(t) }, t.prototype.ofType = function (t) { return this._enumerable.ofType(t) }, t.prototype.zip = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).zip.apply(t, nn(e)) }, t.prototype.merge = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).merge.apply(t, nn(e)) }, t.prototype.join = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).join.apply(t, nn(e)) }, t.prototype.groupJoin = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).groupJoin.apply(t, nn(e)) }, t.prototype.all = function (t) { return this._enumerable.all(t) }, t.prototype.any = function (t) { return this._enumerable.any(t) }, t.prototype.isEmpty = function () { return this._enumerable.isEmpty() }, t.prototype.concat = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).concat.apply(t, nn(e)) }, t.prototype.alternate = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).alternate.apply(t, nn(e)) }, t.prototype.defaultIfEmpty = function (t) { return this._enumerable.defaultIfEmpty(t) }, t.prototype.distinct = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).distinct.apply(t, nn(e)) }, t.prototype.distinctUntilChanged = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).distinctUntilChanged.apply(t, nn(e)) }, t.prototype.except = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).except.apply(t, nn(e)) }, t.prototype.intersect = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).intersect.apply(t, nn(e)) }, t.prototype.union = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).union.apply(t, nn(e)) }, t.prototype.sequenceEqual = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).sequenceEqual.apply(t, nn(e)) }, t.prototype.orderBy = function (t) { return this._enumerable.orderBy(t) }, t.prototype.orderByDescending = function (t) { return this._enumerable.orderByDescending(t) }, t.prototype.reverse = function () { return this._enumerable.reverse() }, t.prototype.shuffle = function () { return this._enumerable.shuffle() }, t.prototype.weightedSample = function (t) { return this._enumerable.weightedSample(t) }, t.prototype.groupBy = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).groupBy.apply(t, nn(e)) }, t.prototype.partitionBy = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).partitionBy.apply(t, nn(e)) }, t.prototype.buffer = function (t) { return this._enumerable.buffer(t) }, t.prototype.aggregate = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).aggregate.apply(t, nn(e)) }, t.prototype.average = function (t) { return this._enumerable.average(t) }, t.prototype.count = function (t) { return this._enumerable.count(t) }, t.prototype.max = function (t) { return this._enumerable.max(t) }, t.prototype.min = function (t) { return this._enumerable.min(t) }, t.prototype.maxBy = function (t) { return this._enumerable.maxBy(t) }, t.prototype.minBy = function (t) { return this._enumerable.minBy(t) }, t.prototype.sum = function (t) { return this._enumerable.sum(t) }, t.prototype.elementAt = function (t) { return this._enumerable.elementAt(t) }, t.prototype.elementAtOrDefault = function (t, e) { return this._enumerable.elementAtOrDefault(t, e) }, t.prototype.first = function (t) { return this._enumerable.first(t) }, t.prototype.firstOrDefault = function (t, e) { return "function" == typeof t ? this._enumerable.firstOrDefault(t, e) : this._enumerable.firstOrDefault(e) }, t.prototype.last = function (t) { return this._enumerable.last(t) }, t.prototype.lastOrDefault = function (t, e) { return "function" == typeof t ? this._enumerable.lastOrDefault(t, e) : this._enumerable.lastOrDefault(e) }, t.prototype.single = function (t) { return this._enumerable.single(t) }, t.prototype.singleOrDefault = function (t, e) { return this._enumerable.singleOrDefault(t, e) }, t.prototype.skip = function (t) { return this._enumerable.skip(t) }, t.prototype.skipWhile = function (t) { return this._enumerable.skipWhile(t) }, t.prototype.take = function (t) { return this._enumerable.take(t) }, t.prototype.takeWhile = function (t) { return this._enumerable.takeWhile(t) }, t.prototype.takeExceptLast = function (t) { return this._enumerable.takeExceptLast(t) }, t.prototype.takeFromLast = function (t) { return this._enumerable.takeFromLast(t) }, t.prototype.indexOf = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).indexOf.apply(t, nn(e)) }, t.prototype.lastIndexOf = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).lastIndexOf.apply(t, nn(e)) }, t.prototype.asEnumerable = function () { return this._enumerable }, t.prototype.cast = function () { return this._enumerable.cast() }, t.prototype.toLookup = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).toLookup.apply(t, nn(e)) }, t.prototype.toObject = function (t, e) { return this._enumerable.toObject(t, e) }, t.prototype.toDictionary = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).toDictionary.apply(t, nn(e)) }, t.prototype.toJSONString = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).toJSONString.apply(t, nn(e)) }, t.prototype.toJoinedString = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).toJoinedString.apply(t, nn(e)) }, t.prototype.doAction = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).doAction.apply(t, nn(e)) }, t.prototype.forEach = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).forEach.apply(t, nn(e)) }, t.prototype.write = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).write.apply(t, nn(e)) }, t.prototype.writeLine = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).writeLine.apply(t, nn(e)) }, t.prototype.force = function () { return this._enumerable.force() }, t.prototype.letBind = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).letBind.apply(t, nn(e)) }, t.prototype.share = function () { return this._enumerable.share() }, t.prototype.memoize = function () { return this._enumerable.memoize() }, t.prototype.catchError = function (t) { return this._enumerable.catchError(t) }, t.prototype.finallyAction = function (t) { return this._enumerable.finallyAction(t) }, t.prototype.log = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).log.apply(t, nn(e)) }, t.prototype.trace = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).trace.apply(t, nn(e)) }, t.prototype.insert = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).insert.apply(t, nn(e)) }, t.prototype.contains = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return (t = this._enumerable).contains.apply(t, nn(e)) }, t }(); var on, an = new (function () { function t() { this.data = {}, this._typeDictionary = {} } return t.prototype.getPropertyMetadata = function (t, e) { var n = t.type; if (null == n) return null; if (null == this._typeDictionary[n]) { this._typeDictionary[n] = []; for (var r = t; null != r.constructor.type;)this._typeDictionary[n].push(r.constructor.type), r = Object.getPrototypeOf(r) } for (var o = 0; o < this._typeDictionary[n].length; o++) { var i = this._typeDictionary[n][o]; if (null != this.data[i]) { var a = this.data[i][e]; if (null != a) return a } } return null }, t }()); function sn(t) { return function (e, n) { var r = e.constructor.type; null == an.data[r] && (an.data[r] = {}); var o = an.data[r]; null == o[n] && (o[n] = { type: null != t.enumObject ? "enum" : typeof e[n], displayName: null != t && null != t.displayName ? t.displayName : n, propertyFactory: t.factory, values: null != t.enumObject ? Object.keys(t.enumObject).map((function (e) { return t.enumObject[e] })).filter((function (t) { return "string" == typeof t })) : null, ignore: null == t.ignore || t.ignore }) } } !function (t) { t.Normal = "Normal", t.Multiply = "Multiply", t.Screen = "Screen", t.Overlay = "Overlay", t.Darken = "Darken", t.Lighten = "Lighten", t.ColorDodge = "ColorDodge", t.ColorBurn = "ColorBurn", t.HardLight = "HardLight", t.SoftLight = "SoftLight", t.Difference = "Difference", t.Exclusion = "Exclusion", t.None = "None" }(on || (on = {})); var ln = function () { function t(e) { if (this._color = null, this._opacity = null, this._blendMode = null, this.$_propertyChanged = new M, this.type = t.type, null != e) { var n = e.color, r = e.opacity, o = e.blendMode; this.color = n instanceof Re ? n : null, this.blendMode = "string" == typeof o ? o : null, this.opacity = "number" == typeof r ? r : null } } return t.prototype.equals = function (e) { if (!(e instanceof t)) return !1; var n = e.color, r = e.opacity, o = e.blendMode; return Re.equals(n, this.color) && (null == r && null == this.opacity || ve(r, this.opacity)) && (null == o && null == this.blendMode || o === this.blendMode) }, t.prototype.getSimplifiedObject = function () { return { color: this.color, blendMode: this.blendMode, opacity: this.opacity } }, t.equals = function (t, e) { return null == t && null == e || null != t && t.equals(e) }, t.prototype.clone = function () { return new t({ blendMode: this.blendMode, color: null != this.color ? this.color.clone() : null, opacity: this.opacity }) }, Object.defineProperty(t.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this.color, t) || (this._color = t, this.$_propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "blendMode", { get: function () { return this._blendMode }, set: function (t) { this.blendMode !== t && (this._blendMode = t, this.$_propertyChanged.notify(this, "blendMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "opacity", { get: function () { return this._opacity }, set: function (t) { this.opacity !== t && (this._opacity = t, this.$_propertyChanged.notify(this, "opacity")) }, enumerable: !0, configurable: !0 }), t.prototype.addPropertyChanged = function (t) { this.$_propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this.$_propertyChanged.remove(t) }, t.type = "OverlayEffect", _([sn({ enumObject: on }), b("design:type", Object), b("design:paramtypes", [Object])], t.prototype, "blendMode", null), t }(), un = function () { function t(t) { this._additionalConverters = A.isArray(t) ? t : [], this.productParser = new Po(t) } return t.prototype.deserialize = function (t) { var e = t; return "string" == typeof t && (e = JSON.parse(t)), A.isObject(e) ? this.productParser.parseProduct(e) : null }, t.prototype.serialize = function (t, e) { return this.serializeModelComponent(t, e) }, t.prototype.serializeModelComponent = function (t, e) { var n = this; null == e && (e = !1); return JSON.stringify(t, (function (t, e) { if (e instanceof Ae) return e.getSimplifiedObject(); if (e instanceof Re) return e.getData(); if (e instanceof Se) return { scaleX: e.scaleX, scaleY: e.scaleY, translateX: e.translateX, translateY: e.translateY, angle: e.angle }; if (e instanceof $e) return { name: e.name, altColor: e.altColor, color: e.color, margin: e.margin, stepPx: e.stepPx, widthPx: e.widthPx, borderRadius: e.borderRadius, pdfBox: e.pdfBox }; if (e instanceof Oe) return e.width + ", " + e.height; if (e instanceof Pe) return e.toString(); if (e instanceof rn) return e.toArray(); if (e instanceof ln) return e.getSimplifiedObject(); var r = A.find(n._additionalConverters, (function (t) { return e instanceof t.typeCtor })); return null != r && ((e = A.clone(e)).$type = r.type), e }), 2) }, t }(), cn = function () { function t() { } return t.getProductSerializer = function () { return null != t.jsonProductSerializerFactory ? t.jsonProductSerializerFactory() : t._defaultJsonProductSerializerFactory() }, t._defaultJsonProductSerializerFactory = function () { return new un }, t.jsonProductSerializerFactory = null, t.MAIN_CONTAINER_NAME = "Main", t.BG_CONTAINER_NAME = "Background", t.FG_CONTAINER_NAME = "Foreground", t.BG_SOLIDCOLOR = "solidColor", t.SPINE_AND_FOLDING_CONTAINER_NAME = "Spine&Folding", t }(), pn = function (t) { return t[t.Normal = 0] = "Normal", t[t.Grayscale = 1] = "Grayscale", t[t.Solid = 2] = "Solid", t }({}), hn = function (t) { function e(e, n) { var r = t.call(this) || this; return r._items = new rn, r._visible = !0, r._locked = !1, r._region = null, r.parentComponent = null, r.renderingType = pn.Normal, r.type = "Container", r._onItemAdded = function (t) { t.item.parentContainer = r }, r._onRegionChanged = function (t, e) { "left" !== e && "top" !== e && "width" !== e && "height" !== e || r._propertyChanged.notify(r, "region") }, r._items = new rn, r._items.add_itemAdded(r._onItemAdded), null != e && r.items.setRange(e), null != n && (r.name = n), r } return m(e, t), Object.defineProperty(e.prototype, "region", { get: function () { return this._region }, set: function (t) { this._region !== t && (null != this._region && this._region.removePropertyChanged(this._onRegionChanged), this._region = t, this._propertyChanged.notify(this, "region"), null != this._region && this._region.addPropertyChanged(this._onRegionChanged)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "items", { get: function () { return this._items }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "visible", { get: function () { return this._visible }, set: function (t) { this._visible !== t && (this._visible = t, this._propertyChanged.notify(this, "visible")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "locked", { get: function () { return this._locked }, set: function (t) { this._locked !== t && (this._locked = t, this._propertyChanged.notify(this, "locked")) }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function () { var e = t.prototype.getSimplifiedObject.call(this, ["parentComponent", "version"]); return e.version = this.version, e }, e.prototype.generateNewIds = function () { this._generateNewId(), this._items.forEach((function (t) { return t.generateNewIds() })) }, e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.items.addRange(e.items.toArray().map((function (t) { return t.clone(r) }))), n.locked = e.locked, n.visible = e.visible, n.renderingType = e.renderingType, n.translationKey = e.translationKey, n.region = null != e.region ? e.region.clone() : null }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e }(Ae), fn = function (t) { function e(e, n) { var r = t.call(this, e, n) || this; return r.noPrint = !1, r.noShow = !1, r.size = null, r._locked = !0, r } return m(e, t), e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.noPrint = e.noPrint, n.noShow = e.noShow, n.size = null != e.size ? e.size.clone() : null }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e }(hn), dn = function (t) { function e(e, n) { var r = t.call(this, e, n) || this; return r.type = "SurfaceContainer", r._locked = !1, r } return m(e, t), e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e }(hn), yn = function (t) { function e() { var e = t.call(this) || this; return e.type = "SpotColorContainer", e.renderingType = pn.Grayscale, e } return m(e, t), e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.previewColor = e.previewColor }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e }(dn), gn = function (t) { function e() { var e = t.call(this) || this; return e.type = "TextureContainer", e.renderingType = pn.Solid, e } return m(e, t), Object.defineProperty(e.prototype, "previewTextureSource", { get: function () { return this._previewTextureSource }, set: function (t) { t !== this._previewTextureSource && (this._previewTextureSource = t, this._propertyChanged.notify(this, "previewTextureSource")) }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (e, n, r) { return t.prototype._copy.call(this, e, n, r), n.previewTextureSource = null != e.previewTextureSource ? e.previewTextureSource.clone() : null, n.previewTextureName = e.previewTextureName, n }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.getSimplifiedObject = function (e) { A.isArray(e) || A.isString(e) || (e = []); var n = t.prototype.getSimplifiedObject.call(this); return n.previewTextureSource = { id: this.previewTextureSource.id, width: this.previewTextureSource.width, height: this.previewTextureSource.height, isVector: this.previewTextureSource.isVector, pageIndex: this.previewTextureSource.pageIndex, url: this.previewTextureSource.url, actualSize: this.previewTextureSource.actualSize, saveAspectRatio: this.previewTextureSource.saveAspectRatio, origin: this.previewTextureSource.origin }, n }, e }(dn), mn = function () { function t() { this.name = "cropmark", this.margin = 10, this.color = new Le({ r: 0, g: 0, b: 0, a: 255 }), this.widthPx = 1, this.length = 8, this.leftNotes = null, this.topNotes = null, this.rightNotes = null, this.bottomNotes = null } return Object.defineProperty(t.prototype, "margins", { get: function () { return "number" == typeof this.margin ? { horizontal: this.margin, vertical: this.margin } : this.margin }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "lengths", { get: function () { return "number" == typeof this.length ? { horizontal: this.length, vertical: this.length } : this.length }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { var e = new t; return e.name = this.name, e.margin = this.margin, e.color = this.color, e.widthPx = this.widthPx, e.length = this.length, e.leftNotes = null != this.leftNotes ? this.leftNotes.map((function (t) { return t.clone() })) : null, e.topNotes = null != this.topNotes ? this.topNotes.map((function (t) { return t.clone() })) : null, e.rightNotes = null != this.rightNotes ? this.rightNotes.map((function (t) { return t.clone() })) : null, e.bottomNotes = null != this.bottomNotes ? this.bottomNotes.map((function (t) { return t.clone() })) : null, e }, t }(), _n = function (t) { return t[t.Left = 0] = "Left", t[t.Center = 1] = "Center", t[t.Right = 2] = "Right", t }({}), bn = function () { function t() { this.alignment = _n.Left, this.fontSize = 3, this.edgeMargin = .3, this.markMargin = .3 } return t.prototype.clone = function () { var e = new t; return e.alignment = this.alignment, e.fontSize = this.fontSize, e.text = this.text, e.edgeMargin = this.edgeMargin, e.markMargin = this.markMargin, e }, t }(), vn = function (t) { return t[t.Trim = 0] = "Trim", t[t.Bleed = 1] = "Bleed", t[t.Total = 2] = "Total", t }({}), wn = function (t) { function e(e, n, r) { var o = t.call(this) || this; return o.parentSurface = null, o._safetyLines = new rn, o._cropMarks = new rn, o._onBoundsPropertyChanged = function (t, e) { o._propertyChanged.notify(o, "bounds") }, o._onBleedPropertyChanged = function (t, e) { o._validateMargin(o.bleed, "bleed"), o._propertyChanged.notify(o, "bleed") }, o._onSlugPropertyChanged = function (t, e) { o._validateMargin(o.slug, "slug"), o._propertyChanged.notify(o, "slug") }, o._validateMargin(n, "bleed"), o._validateMargin(r, "slug"), o._bounds = null != e ? e : new ge, o.bleed = null != n ? n : new Xe, o.slug = null != r ? r : new Xe, o } return m(e, t), Object.defineProperty(e.prototype, "bounds", { get: function () { return this._bounds }, set: function (t) { this._bounds.equals(t) || (this._unsubscribeBoundsPropertyChanged(), this._bounds = t, this._subscribeBoundsPropertyChanged(), this._propertyChanged.notify(this, "bounds")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "safetyLines", { get: function () { return this._safetyLines }, set: function (t) { this._safetyLines !== t && (this._safetyLines = t, this._propertyChanged.notify(this, "safetyLines")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "cropMarks", { get: function () { return this._cropMarks }, set: function (t) { this._cropMarks !== t && (this._cropMarks = t, this._propertyChanged.notify(this, "cropMarks")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bleed", { get: function () { return this._bleed }, set: function (t) { je(t, this._bleed) || (this._validateMargin(t, "bleed"), this._unsubscribeBleedPropertyChanged(), this._bleed = t, this._subscribeBleedPropertyChanged(), this._propertyChanged.notify(this, "bleed")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "slug", { get: function () { return this._slug }, set: function (t) { je(t, this._slug) || (this._validateMargin(t, "slug"), this._unsubscribeSlugPropertyChanged(), this._slug = t, this._subscribeSlugPropertyChanged(), this._propertyChanged.notify(this, "slug")) }, enumerable: !0, configurable: !0 }), e.prototype.getBounds = function (t) { switch (t) { case vn.Bleed: return this.bounds.getExpanded(this.bleed); case vn.Total: return this.bounds.getExpanded(new Xe({ left: this.bleed.left + this.slug.left, top: this.bleed.top + this.slug.top, right: this.bleed.right + this.slug.right, bottom: this.bleed.bottom + this.slug.bottom })); default: return this.bounds.clone() } }, e.prototype._subscribeBoundsPropertyChanged = function () { null != this._bounds && this._bounds.addPropertyChanged(this._onBoundsPropertyChanged) }, e.prototype._unsubscribeBoundsPropertyChanged = function () { null != this._bounds && this._bounds.removePropertyChanged(this._onBoundsPropertyChanged) }, e.prototype._subscribeBleedPropertyChanged = function () { null != this._bleed && this._bleed.addPropertyChanged(this._onBleedPropertyChanged) }, e.prototype._unsubscribeBleedPropertyChanged = function () { null != this._bleed && this._bleed.removePropertyChanged(this._onBleedPropertyChanged) }, e.prototype._subscribeSlugPropertyChanged = function () { null != this._slug && this._slug.addPropertyChanged(this._onSlugPropertyChanged) }, e.prototype._unsubscribeSlugPropertyChanged = function () { null != this._slug && this._slug.removePropertyChanged(this._onSlugPropertyChanged) }, e.prototype._validateMargin = function (t, e) { if (null != t && (t.left < 0 || t.top < 0 || t.right < 0 || t.bottom < 0)) throw new C("PrintArea.ts: " + e + " margin members cannot be negative!") }, e.prototype.getSimplifiedObject = function () { return t.prototype.getSimplifiedObject.call(this, ["parentSurface", "boundsWithMargins", "boundsWithBleed"]) }, e.prototype._copy = function (e, n, r) { var o, i; t.prototype._copy.call(this, e, n, r), n.bounds = null != e.bounds ? e.bounds.clone() : null, n.safetyLines.addRange(e.safetyLines.toArray().map((function (t) { return t.clone() }))), n.cropMarks.addRange(e.cropMarks.toArray().map((function (t) { return t.clone() }))), n.bleed = null === (o = e.bleed) || void 0 === o ? void 0 : o.clone(), n.slug = null === (i = e.slug) || void 0 === i ? void 0 : i.clone() }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.generateNewIds = function () { this._generateNewId() }, e }(Ae), Cn = function (t) { function e(e, n) { void 0 === e && (e = []), void 0 === n && (n = []); var r = t.call(this) || this; return r.parentSurface = null, r._underContainers = new rn, r._overContainers = new rn, r._onContainerAdded = function (t) { t.item.parentComponent = r }, r.underContainers.add_itemAdded(r._onContainerAdded), r.underContainers.setRange(e), r.overContainers.add_itemAdded(r._onContainerAdded), r.overContainers.setRange(n), r } return m(e, t), e.prototype.isEmpty = function () { return this.underContainers.concat(this.overContainers).all((function (t) { return t.items.empty })) }, Object.defineProperty(e.prototype, "underContainers", { get: function () { return this._underContainers }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overContainers", { get: function () { return this._overContainers }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "allContainers", { get: function () { return this._overContainers.concat(this._underContainers) }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function () { return t.prototype.getSimplifiedObject.call(this, ["parentSurface", "allContainers"]) }, e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.underContainers.addRange(e.underContainers.toArray().map((function (t) { return t.clone(r) }))), n.overContainers.addRange(e.overContainers.toArray().map((function (t) { return t.clone(r) }))) }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.generateNewIds = function () { this._generateNewId(), this._underContainers.forEach((function (t) { return t.generateNewIds() })), this._overContainers.forEach((function (t) { return t.generateNewIds() })) }, e }(Ae), Pn = function () { function t() { } return t.prototype.clone = function () { var e = new t; return e.storageId = this.storageId, e.width = this.width, e.height = this.height, e }, t }(), Sn = function () { function t() { this._vectorMask = null, this._maskChangedEvent = new T } return Object.defineProperty(t.prototype, "vectorMask", { get: function () { return this._vectorMask }, set: function (t) { this._vectorMask = t, this._maskChangedEvent.notify(this) }, enumerable: !0, configurable: !0 }), t.prototype.addMaskChanged = function (t) { this._maskChangedEvent.add(t) }, t.prototype.removeMaskChanged = function (t) { this._maskChangedEvent.remove(t) }, t.prototype.clone = function () { var e = new t; return e.vectorMask = null != this.vectorMask ? this.vectorMask.clone() : null, e }, t.prototype.equals = function (t) { return je(this.vectorMask, t.vectorMask) }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.vectorMask = null != this.vectorMask ? this.vectorMask.toString() : null, t }, t }(), xn = function (t) { function e() { var n = null !== t && t.apply(this, arguments) || this; return n.type = e.type, n } return m(e, t), Object.defineProperty(e.prototype, "parentContainer", { get: function () { return this._parentContainer }, set: function (t) { this._parentContainer = t, this._onContainerChanged() }, enumerable: !0, configurable: !0 }), e.prototype._onContainerChanged = function () { }, e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r), o && (n.parentContainer = e.parentContainer) }, e.prototype.clone = function (t, n) { if (void 0 === t && (t = !1), void 0 === n && (n = !1), this.type !== e.type) throw new w(".clone() method must be overridden in " + this.type + " class"); var r = new e; return this._copy(this, r, t, n), r }, e.prototype.copyTo = function (t) { this._copy(this, t, !0, !0) }, e.prototype.update = function (t) { this._copy(t, this, !0, !1) }, e.prototype.getSimplifiedObject = function (e) { A.isArray(e) || A.isString(e) || (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["parentContainer"].concat(e)); return n.$type = this.type, n }, e.type = "base", e }(Ae), On = function (t) { function e() { var n = t.call(this) || this; return n.type = e.type, n } return m(e, t), e.prototype._copy = function (e, n, r, o) { return t.prototype._copy.call(this, e, n, r, o), n.sourceDpi = e.sourceDpi, n.smartObjectDpi = e.smartObjectDpi, n.smartObjectRectangle = e.smartObjectRectangle, n.smartObjectSize = e.smartObjectSize, n.smartObjectStorageId = e.smartObjectStorageId, null != e.warpControlPoints && (n.warpControlPoints = e.warpControlPoints.map((function (t) { return t }))), null != e.projectiveTransform && (n.projectiveTransform = e.projectiveTransform.map((function (t) { return t }))), null != e.vectorMask && (n.vectorMask = e.vectorMask.map((function (t) { return t }))), n }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this.sourceDpi, e.sourceDpi) && je(this.smartObjectDpi, e.smartObjectDpi) && A.isEqual(this.smartObjectRectangle, e.smartObjectRectangle) && A.isEqual(this.smartObjectSize, e.smartObjectSize) && je(this.smartObjectStorageId, e.smartObjectStorageId) && Ee(this.warpControlPoints, e.warpControlPoints) && Ee(this.projectiveTransform, e.projectiveTransform) && Ee(this.vectorMask, e.vectorMask) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "SmartItem", e }(xn), In = function () { function t(e, n, r) { void 0 === r && (r = !0), this._edgeConstraint = null, this._cornerArbitraryConstraint = null, this.propertyChanged = new T, this.type = t.type, this.edge = n, this._setCornerValues(e, n, r) } return Object.defineProperty(t.prototype, "edgeConstraint", { set: function (t) { var e = this.edge; this._edgeConstraint = t, this.edge !== e && this.propertyChanged.notify() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "edge", { get: function () { return null != this._edgeConstraint ? this._edgeConstraint : this._edge }, set: function (t) { this._edge !== t && (this._edge = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "corner", { get: function () { return this._corner }, set: function (t) { if (null == t) throw new P("corner cannot be null"); this._corner !== t && (this._corner = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype._setCornerValues = function (e, n, r) { this.corner = e && n ? r ? [t.arbitrary, t.proportional] : [t.proportional, t.arbitrary] : e ? [t.proportional] : n ? [t.arbitrary] : [] }, t.prototype.getCornerProportional = function () { return this.corner.includes(t.proportional) }, t.prototype.getCornerArbitrary = function () { return null != this._cornerArbitraryConstraint ? this._cornerArbitraryConstraint : this.corner.includes(t.arbitrary) }, t.prototype.setCornerProportional = function (t) { var e = this.getCornerArbitrary(); this._setCornerValues(t, e, !0) }, t.prototype.setCornerArbitrary = function (t) { var e = this.getCornerProportional(); this._setCornerValues(e, t, !0) }, t.prototype.setCornerArbitraryConstraint = function (t) { var e = this.getCornerArbitrary(); this._cornerArbitraryConstraint = t, this.getCornerArbitrary() !== e && this.propertyChanged.notify() }, t.prototype.clone = function () { var e = new t(!0, !0); return e.edge = this.edge, e.corner = this.corner.slice(), e }, t.prototype.equals = function (t) { return this.edge === t.edge && A.isEqual(this.corner, t.corner) }, Object.defineProperty(t.prototype, "data", { get: function () { return { Edge: this.edge, Corner: this.corner } }, enumerable: !0, configurable: !0 }), t._fromData = function (e) { if (null == e) return new t(!1, !1); var n = new t(!0, !0); return n.corner = e.Corner, n.edge = e.Edge, n }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.edge = this.edge, t.corner = this.corner, t }, t.arbitrary = "Arbitrary", t.proportional = "Proportional", t.type = "ResizeGripsPermissions", _([sn({ ignore: !0 }), b("design:type", Boolean), b("design:paramtypes", [Boolean])], t.prototype, "edgeConstraint", null), t }(), jn = function () { function t(e) { var n = this; void 0 === e && (e = !0), this._allowRotateConstraint = null, this.propertyChanged = new T, this._firePropertyChanged = function () { return n.propertyChanged.notify() }, this.type = t.type, this.allowDelete = e, this.allowMoveHorizontal = e, this.allowMoveVertical = e, this.allowRotate = e, this.allowDragAndDrop = e, this.resizeGrips = new In(e, e) } return Object.defineProperty(t.prototype, "allowDelete", { get: function () { return this._allowDelete }, set: function (t) { this._allowDelete !== t && (this._allowDelete = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowMoveHorizontal", { get: function () { return this._allowMoveHorizontal }, set: function (t) { this._allowMoveHorizontal !== t && (this._allowMoveHorizontal = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowMoveVertical", { get: function () { return this._allowMoveVertical }, set: function (t) { this._allowMoveVertical !== t && (this._allowMoveVertical = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowRotateConstraint", { set: function (t) { var e = this.allowRotate; this._allowRotateConstraint = t, this.allowRotate !== e && this.propertyChanged.notify() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowRotate", { get: function () { return null != this._allowRotateConstraint ? this._allowRotateConstraint : this._allowRotate }, set: function (t) { this._allowRotate !== t && (this._allowRotate = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowDragAndDrop", { get: function () { return this._allowDragAndDrop }, set: function (t) { this._allowDragAndDrop !== t && (this._allowDragAndDrop = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "resizeGrips", { get: function () { return this._resizeGrips }, set: function (t) { null != this.resizeGrips && null != this.resizeGrips.propertyChanged && this.resizeGrips.propertyChanged.remove(this._firePropertyChanged), this._resizeGrips = t, null != this.resizeGrips.propertyChanged && this.resizeGrips.propertyChanged.add(this._firePropertyChanged), this.propertyChanged.notify() }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { var e = new t; return e.allowDelete = this.allowDelete, e.allowDragAndDrop = this.allowDragAndDrop, e.allowMoveHorizontal = this.allowMoveHorizontal, e.allowMoveVertical = this.allowMoveVertical, e.allowRotate = this.allowRotate, e.allowRotateConstraint = this.allowRotateConstraint, e.resizeGrips = this.resizeGrips.clone(), e }, t.prototype.equals = function (t) { return this.allowDelete === t.allowDelete && this.allowDragAndDrop === t.allowDragAndDrop && this.allowMoveHorizontal === t.allowMoveHorizontal && this.allowMoveVertical === t.allowMoveVertical && this.allowRotate === t.allowRotate && this.allowRotateConstraint === t.allowRotateConstraint && je(this.resizeGrips, t.resizeGrips) }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowDelete = this.allowDelete, t.resizeGrips = this.resizeGrips.getSimplifiedObject(), t.allowMoveHorizontal = this.allowMoveHorizontal, t.allowMoveVertical = this.allowMoveVertical, t.allowRotate = this.allowRotate, t.allowDragAndDrop = this.allowDragAndDrop, t }, t.CreateFromRaw = function (e) { var n = A.extend(new In(!0, !0), e.resizeGrips), r = A.extend(new t, e); return r.resizeGrips = n, r }, t.type = "ManipulationPermissions", _([sn({ ignore: !0 }), b("design:type", Boolean), b("design:paramtypes", [Boolean])], t.prototype, "allowRotateConstraint", null), t }(), kn = function () { function t() { this._noPrint = !1, this._noShow = !1, this.propertyChanged = new T } return Object.defineProperty(t.prototype, "noPrint", { get: function () { return this._noPrint }, set: function (t) { this._noPrint !== t && (this._noPrint = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "noShow", { get: function () { return this._noShow }, set: function (t) { this._noShow !== t && (this._noShow = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { var e = new t; return e.noShow = this.noShow, e.noPrint = this.noPrint, e }, t.prototype.equals = function (t) { return this.noShow === t.noShow && this.noPrint === t.noPrint }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.noPrint = this.noPrint, t.noShow = this.noShow, t }, t }(); function En() { return function (t, e) { var n = "_" + e; Object.defineProperty(t, e, { get: function () { return this[n] }, set: function (t) { var r, o = typeof t; if (null != t && "boolean" !== o && "number" !== o && "string" !== o && ("object" !== o || "function" != typeof t.equals)) throw new C("PropertyChanged decorator works only for simple types or objects with equals method"); je(this[n], t) || (this[n] = t, (null !== (r = this._propertyChanged) && void 0 !== r ? r : this.propertyChanged).notify(this, e)) }, configurable: !0, enumerable: !0 }) } } var Tn, Bn = function () { function t(e) { void 0 === e && (e = !0), this._showDeleteButton = !0, this._showEditButton = !0, this._showSelectButton = !0, this._showEditButtonConstraint = null, this._showHandleButton = !0, this.propertyChanged = new T, this.showSelectButtonConstraint = null, this.type = t.type, this.showDeleteButton = e, this.showEditButton = e, this.showSelectButton = e, this.showHandleButton = e } return Object.defineProperty(t.prototype, "showDeleteButton", { get: function () { return this._showDeleteButton }, set: function (t) { this._showDeleteButton !== t && (this._showDeleteButton = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "showEditButton", { get: function () { return null != this.showEditButtonConstraint ? this.showEditButtonConstraint : this._showEditButton }, set: function (t) { this._showEditButton !== t && (this._showEditButton = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "showEditButtonConstraint", { get: function () { return this._showEditButtonConstraint }, set: function (t) { this.showEditButtonConstraint !== t && (this._showEditButtonConstraint = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "showSelectButton", { get: function () { return null != this.showSelectButtonConstraint ? this.showSelectButtonConstraint : this._showSelectButton }, set: function (t) { this._showSelectButton !== t && (this._showSelectButton = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.showDeleteButton = this.showDeleteButton, t.showEditButton = this.showEditButton, t.showSelectButton = this.showSelectButton, t.showEditButtonConstraint = this.showEditButtonConstraint, t.showSelectButtonConstraint = this.showSelectButtonConstraint, t.showHandleButton = this.showHandleButton, t }, t.prototype.clone = function () { var e = new t; return e.showDeleteButton = this._showDeleteButton, e.showEditButton = this._showEditButton, e.showEditButtonConstraint = this.showEditButtonConstraint, e.showSelectButton = this._showSelectButton, e.showSelectButtonConstraint = this.showSelectButtonConstraint, e.showHandleButton = this._showHandleButton, e }, t.prototype.equals = function (t) { return this.showDeleteButton == t.showDeleteButton && this.showEditButton === t.showEditButton && this.showEditButtonConstraint === t.showEditButtonConstraint && this.showSelectButton === t.showSelectButton && this.showSelectButtonConstraint === t.showSelectButtonConstraint && this.showHandleButton === t.showHandleButton }, t.type = "ItemToolbarPermissions", _([sn({ ignore: !0 }), b("design:type", Boolean)], t.prototype, "showSelectButtonConstraint", void 0), _([sn({ ignore: !0 }), b("design:type", Boolean), b("design:paramtypes", [Boolean])], t.prototype, "showEditButtonConstraint", null), _([En(), b("design:type", Boolean)], t.prototype, "showHandleButton", void 0), t }(), Mn = function () { function t(t) { var e = this; this._allowZOrderChange = !0, this._allowOpacityChange = !0, this._allowRemoveOnLayoutChange = !0, this._firePropertyChanged = function () { return e.propertyChanged.fire() }, this.propertyChanged = new T, null == t && (t = !0), this.allowZOrderChange = t, this.allowOpacityChange = t, this.allowRemoveOnLayoutChange = t, this.itemToolbarPermissions = new Bn(t) } return Object.defineProperty(t.prototype, "allowZOrderChange", { get: function () { return this._allowZOrderChange }, set: function (t) { this._allowZOrderChange !== t && (this._allowZOrderChange = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowOpacityChange", { get: function () { return this._allowOpacityChange }, set: function (t) { this._allowOpacityChange !== t && (this._allowOpacityChange = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowRemoveOnLayoutChange", { get: function () { return this._allowRemoveOnLayoutChange }, set: function (t) { this._allowRemoveOnLayoutChange !== t && (this._allowRemoveOnLayoutChange = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "itemToolbarPermissions", { get: function () { return this._itemToolbarPermissions }, set: function (t) { je(this, t) || (null != this.itemToolbarPermissions && null != this.itemToolbarPermissions.propertyChanged && this.itemToolbarPermissions.propertyChanged.remove(this._firePropertyChanged), this._itemToolbarPermissions = t, null != this.itemToolbarPermissions.propertyChanged && this.itemToolbarPermissions.propertyChanged.add(this._firePropertyChanged), this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowZOrderChange = this.allowZOrderChange, t.allowOpacityChange = this.allowOpacityChange, t.allowRemoveOnLayoutChange = this.allowRemoveOnLayoutChange, t.itemToolbarPermissions = this.itemToolbarPermissions.getSimplifiedObject(), t }, t.prototype.clone = function () { var e = new t; return e.allowZOrderChange = this.allowZOrderChange, e.allowOpacityChange = this.allowOpacityChange, e.allowRemoveOnLayoutChange = this.allowRemoveOnLayoutChange, e.itemToolbarPermissions = this.itemToolbarPermissions.clone(), e }, t.prototype.equals = function (t) { return this.allowZOrderChange === t.allowZOrderChange && this.allowOpacityChange === t.allowOpacityChange && this.allowRemoveOnLayoutChange === t.allowRemoveOnLayoutChange && je(this.itemToolbarPermissions, t.itemToolbarPermissions) }, t }(), An = function () { function t() { this._displayInObjectInspector = !0, this.propertyChanged = new T } return Object.defineProperty(t.prototype, "displayInObjectInspector", { get: function () { return this._displayInObjectInspector }, set: function (t) { this._displayInObjectInspector !== t && (this._displayInObjectInspector = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.displayInObjectInspector = this.displayInObjectInspector, t }, t.prototype.clone = function () { var e = new t; return e.displayInObjectInspector = this.displayInObjectInspector, e }, t.prototype.equals = function (t) { return this.displayInObjectInspector === t.displayInObjectInspector }, t }(), Rn = function (t) { return t[t.None = 0] = "None", t[t.Square = 1] = "Square", t[t.Tight = 2] = "Tight", t }({}), Ln = function () { function t() { this.styles = [], this.clipartColors = [] } return t.fromRaw = function (e) { var n = new t; return n.text = e.text, n.stroke = e.stroke, n.shadow = e.shadow, n.img = e.img, n.border = e.border, n.fill = e.fill, n.textFill = e.textFill, n.line = e.line, n.altline = e.altline, n.horizontal = e.horizontal, n.vertical = e.vertical, n.barcode = e.barcode, n.styles = null != e.styles ? e.styles.slice(0) : null, n.clipartColors = null != e.clipartColors ? e.clipartColors.slice(0) : null, n }, t.prototype.clone = function () { var e = new t; return e.text = this.text, e.stroke = this.stroke, e.shadow = this.shadow, e.img = this.img, e.border = this.border, e.fill = this.fill, e.textFill = this.textFill, e.line = this.line, e.altline = this.altline, e.horizontal = this.horizontal, e.vertical = this.vertical, e.barcode = this.barcode, e.styles = null != this.styles ? this.styles.slice(0) : null, e.clipartColors = null != this.clipartColors ? this.clipartColors.slice(0) : null, e }, t.prototype.equals = function (t) { return this.text === t.text && this.stroke === t.stroke && this.shadow === t.shadow && this.img === t.img && this.border === t.border && this.fill === t.fill && this.textFill === t.textFill && this.line === t.line && this.altline === t.altline && this.horizontal === t.horizontal && this.vertical === t.vertical && this.barcode === t.barcode && ke(this.styles, t.styles) && ke(this.clipartColors, t.clipartColors) }, t }(), Nn = function (t) { function e(n) { var r = t.call(this) || this; return r.type = e.type, null == n && (n = !0), r._allowSafetyLines = n, r._allowRegion = n, r._allowBleedArea = n, r } return m(e, t), e.prototype.clone = function (t) { void 0 === t && (t = null); var n = null != t ? t : new e; return n.allowSafetyLines = this.allowSafetyLines, n.allowRegion = this.allowRegion, n.allowBleedArea = this.allowBleedArea, n }, e.prototype.equals = function (t) { return this.type === t.type && this.allowSafetyLines === t.allowSafetyLines && this.allowRegion === t.allowRegion && this.allowBleedArea === t.allowBleedArea }, e.type = "ViolationSettings", _([En(), b("design:type", Boolean)], e.prototype, "allowSafetyLines", void 0), _([En(), b("design:type", Boolean)], e.prototype, "allowRegion", void 0), _([En(), b("design:type", Boolean)], e.prototype, "allowBleedArea", void 0), e }(Ae), Fn = function (t) { function e() { var n = t.call(this) || this; n._visible = !0, n._locked = !1, n._opacity = 1, n._fromLayout = !1, n._textWrappingMode = Rn.None, n._isVariable = !1, n._blendMode = on.Normal, n._ignorePermissionsChange = !1, n._mask = null, n._onPermissionsChanged = function () { n._ignorePermissionsChange || (n._ignorePermissionsChange = !0, n.applyPermissionsConstrain(), n._ignorePermissionsChange = !1, n._propertyChanged.notify(n, "permissions")) }, n._parentGroupItem = null, n.themeBinding = new Ln, n._onTransformChanged = function (t) { n._propertyChanged.notify(n, "transform") }, n._onMaskChanged = function (t) { n._propertyChanged.notify(n, "mask") }, n._changedEvent = new B(n), n._changingEvent = new T, n.type = e.type; var r = new Mn; return r.allowRemoveOnLayoutChange = !1, n.itemPermissions = r, n.setManipulationPermissions(new jn), n.visualizationPermissions = new kn, n.frontendPermissions = new An, n._setViolationSettings(new Nn, !0), n.setTransform(new Se), n } return m(e, t), e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.itemPermissions = e._itemPermissions.clone(), n.visible = e._visible, n.locked = e._locked, n.opacity = e._opacity, n.isVariable = e._isVariable, n.textWrappingMode = e._textWrappingMode, n.setManipulationPermissions(e._manipulationPermissions.clone()), n.visualizationPermissions = e._visualizationPermissions.clone(), n.frontendPermissions = e._frontendPermissions.clone(), n.violationSettings = e._violationSettings.clone(), n.transform = e._transform.clone(), n.containerName = e.containerName, n.themeBinding = e.themeBinding.clone(), n.mask = null != e.mask ? e.mask.clone() : null, n.blendMode = e.blendMode }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this._itemPermissions, e._itemPermissions), o = je(this._visible, e._visible), i = je(this._locked, e._locked), a = je(this._opacity, e._opacity), s = je(this._isVariable, e._isVariable), l = je(this._textWrappingMode, e._textWrappingMode), u = je(this._manipulationPermissions, e._manipulationPermissions), c = je(this._visualizationPermissions, e._visualizationPermissions), p = je(this._frontendPermissions, e._frontendPermissions), h = je(this._transform, e._transform), f = je(this._violationSettings, e._violationSettings), d = je(this.containerName, e.containerName), y = je(this.themeBinding, e.themeBinding), g = je(this._mask, e._mask), m = je(this.blendMode, e.blendMode); return n && r && o && i && a && s && l && u && c && p && h && f && d && y && g && m }, Object.defineProperty(e.prototype, "manipulationPermissions", { get: function () { return this.getManipulationPermissions() }, set: function (t) { this.setManipulationPermissions(t) }, enumerable: !0, configurable: !0 }), e.prototype.getManipulationPermissions = function () { return this._manipulationPermissions }, e.prototype.setManipulationPermissions = function (t) { if (null == t) throw new C("manipulationPermissions cannot be null"); je(this._manipulationPermissions, t) || (null != this._manipulationPermissions && this._manipulationPermissions.propertyChanged.remove(this._onPermissionsChanged), this._manipulationPermissions = t, this.applyPermissionsConstrain(), this._manipulationPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "manipulationPermissions")) }, Object.defineProperty(e.prototype, "visualizationPermissions", { get: function () { return this._visualizationPermissions }, set: function (t) { if (null == t) throw new C("visualizationPermissions cannot be null"); je(this._visualizationPermissions, t) || (null != this._visualizationPermissions && this._visualizationPermissions.propertyChanged.remove(this._onPermissionsChanged), this._visualizationPermissions = t, this.applyPermissionsConstrain(), this._visualizationPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "visualizationPermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "itemPermissions", { get: function () { return this._itemPermissions }, set: function (t) { if (null == t) throw new C("itemPermissions cannot be null"); je(this._itemPermissions, t) || (null != this._itemPermissions && this._itemPermissions.propertyChanged.remove(this._onPermissionsChanged), this._itemPermissions = t, this.applyPermissionsConstrain(), this._itemPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "itemPermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "frontendPermissions", { get: function () { return this._frontendPermissions }, set: function (t) { if (null == t) throw new C("frontendPermissions cannot be null"); je(this._frontendPermissions, t) || (null != this._frontendPermissions && this._frontendPermissions.propertyChanged.remove(this._onPermissionsChanged), this._frontendPermissions = t, this.applyPermissionsConstrain(), this._frontendPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "frontendPermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "violationSettings", { get: function () { return this._violationSettings }, set: function (t) { this._setViolationSettings(t) }, enumerable: !0, configurable: !0 }), e.prototype._setViolationSettings = function (t, e) { if (void 0 === e && (e = !1), null == t) throw new C("violationSettings cannot be null"); je(this._violationSettings, t) || (null != this._violationSettings && this._violationSettings.removePropertyChanged(this._onPermissionsChanged), this._violationSettings = t, this.applyPermissionsConstrain(), this._violationSettings.addPropertyChanged(this._onPermissionsChanged), this._propertyChanged.notify(this, "violationSettings")) }, e.prototype.applyPermissionsConstrain = function () { this.isRenderTypeIsNormal || (this.itemPermissions.allowOpacityChange = !1) }, e.prototype._onContainerChanged = function () { t.prototype._onContainerChanged.call(this), this.applyPermissionsConstrain() }, Object.defineProperty(e.prototype, "parentGroupItem", { get: function () { return this._parentGroupItem }, set: function (t) { this._parentGroupItem = t, null != t && (this.parentContainer = this._parentGroupItem.parentContainer) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "blendMode", { get: function () { return this._blendMode }, set: function (t) { this._blendMode !== t && (this._blendMode = t, this._propertyChanged.notify(this, "blendMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "transform", { get: function () { return this._transform }, set: function (t) { this.setTransform(t) }, enumerable: !0, configurable: !0 }), e.prototype.setTransform = function (t, e) { void 0 === e && (e = !1), this._transform && this._transform.removeTransformChanged(this._onTransformChanged); var n = !1; Se.isEqual(this._transform, t) || (this._transform = t, n = !0), this._transform && this._transform.addTransformChanged(this._onTransformChanged), !e && n && this._propertyChanged.notify(this, "transform") }, Object.defineProperty(e.prototype, "textWrappingMode", { get: function () { return this._textWrappingMode }, set: function (t) { this._textWrappingMode !== t && (this._textWrappingMode = t, this._propertyChanged.notify(this, "textWrappingMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "locked", { get: function () { return this._locked }, set: function (t) { this._locked !== t && (this._locked = t, this._propertyChanged.notify(this, "locked")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "mask", { get: function () { return this._mask }, set: function (t) { je(this.mask, t) || (null != this._mask && this._mask.removeMaskChanged(this._onMaskChanged), this._mask = t, null != this._mask && this._mask.addMaskChanged(this._onMaskChanged), this._propertyChanged.notify(this, "mask")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "visible", { get: function () { return this._visible }, set: function (t) { this._visible !== t && (this._visible = t, this._propertyChanged.notify(this, "visible")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "opacity", { get: function () { return this._opacity }, set: function (t) { ve(this._opacity, t) || (this._opacity = t, this._propertyChanged.notify(this, "opacity")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isVariable", { get: function () { return this._isVariable }, set: function (t) { if (this._isVariable !== t) { if (!this._canSetIsVariable()) throw new x("Unable to set isVariable on item of type '" + this.type + "'"); this._isVariable = t, this._propertyChanged.notify(this, "isVariable") } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fromLayout", { get: function () { return this._fromLayout }, set: function (t) { this._fromLayout !== t && (this._fromLayout = t, this._propertyChanged.notify(this, "fromLayout")) }, enumerable: !0, configurable: !0 }), e.prototype.canSetIsVariable = function () { return this._canSetIsVariable() }, e.prototype._canSetIsVariable = function () { return !1 }, e.prototype._getParentContainer = function () { return null != this.parentContainer ? this.parentContainer : null }, e.prototype.getSimplifiedObject = function (e) { A.isArray(e) || A.isString(e) || (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["_changedEvent", "_changingEvent", "manipulationPermissions", "itemPermissions", "visualizationPermissions", "frontendPermissions", "renderingType", "isRenderTypeIsNormal", "parentGroupItem"].concat(e)); return n.manipulationPermissions = this.manipulationPermissions.getSimplifiedObject(), n.itemPermissions = this.itemPermissions.getSimplifiedObject(), n.visualizationPermissions = this.visualizationPermissions.getSimplifiedObject(), n.frontendPermissions = this.frontendPermissions.getSimplifiedObject(), n.mask = null != this.mask ? this.mask.getSimplifiedObject() : null, n }, e.prototype.getItemChangedEvent = function () { return this._changedEvent }, e.prototype.getItemChangingEvent = function () { return this._changingEvent }, e.prototype._getThemeBinding = function (t) { return null != t ? t : this.themeBinding }, e.prototype._applyThemeColor = function (t, e, n) { if (null != t && null != e[t]) { var r = qe.createColor(e[t]); if (r) return n(r), !0 } return !1 }, Object.defineProperty(e.prototype, "isRenderTypeIsNormal", { get: function () { return this.renderingType === pn.Normal }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "renderingType", { get: function () { return this.parentContainer instanceof dn ? this.parentContainer.renderingType : pn.Normal }, enumerable: !0, configurable: !0 }), e.type = "item", _([sn({ enumObject: on, displayName: "Blend mode" }), b("design:type", String), b("design:paramtypes", [String])], e.prototype, "blendMode", null), _([sn({ enumObject: Rn }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "textWrappingMode", null), _([sn({ displayName: "Locked" }), b("design:type", Boolean), b("design:paramtypes", [Boolean])], e.prototype, "locked", null), e }(xn), zn = function () { function t(t) { this._allowChangeBorderWidth = !0, this._allowChangeFillColor = !0, this._allowChangeBorderColor = !0, this.propertyChanged = new T, null == t && (t = !0), this.allowChangeBorderWidth = t, this.allowChangeFillColor = t, this.allowChangeBorderColor = t } return Object.defineProperty(t.prototype, "allowChangeBorderWidth", { get: function () { return this._allowChangeBorderWidth }, set: function (t) { this._allowChangeBorderWidth !== t && (this._allowChangeBorderWidth = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowChangeFillColor", { get: function () { return this._allowChangeFillColor }, set: function (t) { this._allowChangeFillColor !== t && (this._allowChangeFillColor = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowChangeBorderColor", { get: function () { return this._allowChangeBorderColor }, set: function (t) { this._allowChangeBorderColor !== t && (this._allowChangeBorderColor = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { var e = new t; return e.allowChangeBorderColor = this.allowChangeBorderColor, e.allowChangeBorderWidth = this.allowChangeBorderWidth, e.allowChangeFillColor = this.allowChangeFillColor, e }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeBorderWidth = this.allowChangeBorderWidth, t.allowChangeFillColor = this.allowChangeFillColor, t.allowChangeBorderColor = this.allowChangeBorderColor, t }, t.prototype.equals = function (t) { return this.allowChangeBorderColor === t.allowChangeBorderColor && this.allowChangeFillColor === t.allowChangeFillColor && this.allowChangeBorderWidth === t.allowChangeBorderWidth }, t }(), Dn = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Vn = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(Dn(arguments[e])); return t }, qn = function () { function t(t) { this._defaultValue = t } return t.prototype.getDefaultValue = function () { return this._defaultValue }, Object.defineProperty(t.prototype, "type", { get: function () { return typeof this._defaultValue }, enumerable: !0, configurable: !0 }), t }(), Un = function () { function t(t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; this._collectionConstructor = t, this._args = e } return t.prototype.getDefaultValue = function () { var t; return new ((t = this._collectionConstructor).bind.apply(t, Vn([void 0], this._args))) }, Object.defineProperty(t.prototype, "type", { get: function () { return "collection" }, enumerable: !0, configurable: !0 }), t }(), Wn = function () { function t(t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; this._objectConstructor = t, this._args = e } return t.prototype.getDefaultValue = function () { var t; return new ((t = this._objectConstructor).bind.apply(t, Vn([void 0], this._args))) }, Object.defineProperty(t.prototype, "type", { get: function () { return typeof this._objectConstructor }, enumerable: !0, configurable: !0 }), t }(), Gn = function (t) { function e() { return t.call(this, Re, [{ type: "cmyk", getDefaultValue: function () { return new ze({ c: 0, m: 0, y: 0, k: 100 }) } }, { type: "rgb", getDefaultValue: function () { return new Le({ r: 0, g: 0, b: 0, a: 255 }) } }, { type: "spot", getDefaultValue: function () { return new Ue({ inkName: "inkName", inkColor: new ze({ c: 0, m: 0, y: 0, k: 100 }), inkSolidity: 100 }) } }, { type: "grayscale", getDefaultValue: function () { return new De({ l: 0 }) } }, { type: "lab", getDefaultValue: function () { return new Ve({ l: 0, a: 0, b: 0 }) } }]) || this } return m(e, t), e }(function () { function t(t, e) { this._abstractObjectClass = t, this._derivedClassesData = e } return t.prototype.getDefaultValue = function (t) { var e = this._derivedClassesData.find((function (e) { return e.type === t })); if (null == e) throw new v("Type " + t + " is not defined! Try on of these values: " + this.derivedTypes.join(", ") + "."); return e.getDefaultValue() }, Object.defineProperty(t.prototype, "type", { get: function () { return this._abstractObjectClass }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "derivedTypes", { get: function () { return this._derivedClassesData.map((function (t) { return t.type })) }, enumerable: !0, configurable: !0 }), t }()), Hn = function (t) { function e(n) { var r = t.call(this, n) || this; return r.type = e.type, null == n && (n = !0), r._allowShape = n, r } return m(e, t), e.prototype.clone = function (n) { void 0 === n && (n = null); var r = null != n ? n : new e; return r.allowShape = this.allowShape, r = t.prototype.clone.call(this, r) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && this.allowShape === e.allowShape }, e.type = "ShapeViolationSettings", _([En(), b("design:type", Boolean)], e.prototype, "allowShape", void 0), e }(Nn), Jn = function (t) { function e(n) { var r = t.call(this) || this; return r._borderWidth = 1, r._fillColor = new Le("rgba(112,112,112,1)"), r._borderColor = new Le("rgba(0,0,0,1)"), r._altBorderColor = null, r._dash = [], r._fixedBorderWidth = !1, r._overprintStroke = !1, r._overprintFill = !1, r.sourcePathId = null, r.sourcePathLoaded = !1, r._stubPath = null, r._pathLoadedEvent = new T, r.type = e.type, r.sourcePath = null != n ? n : new Pe(""), r.sourceRectangle = new ge(0, 0, 10, 10), r.shapePermissions = new zn, r._setViolationSettings(new Hn, !0), r._ignorePermissionsChange = !0, r.manipulationPermissions.resizeGrips = new In(!0, !0), r.itemPermissions.itemToolbarPermissions.showEditButton = !1, r.itemPermissions.itemToolbarPermissions.showSelectButton = !1, r._ignorePermissionsChange = !1, r } return m(e, t), Object.defineProperty(e.prototype, "fixedBorderWidth", { get: function () { return this._fixedBorderWidth }, set: function (t) { this._fixedBorderWidth !== t && (this._fixedBorderWidth = t, this._propertyChanged.notify(this, "fixedBorderWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "borderWidth", { get: function () { return this._borderWidth }, set: function (t) { this._borderWidth !== t && (this._borderWidth = t, this._propertyChanged.notify(this, "borderWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourcePath", { get: function () { return this._sourcePath }, set: function (t) { je(this._sourcePath, t) || (this._sourcePath = t, !0 !== this.sourcePathLoaded && this._propertyChanged.notify(this, "sourcePath")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourceRectangle", { get: function () { return this._sourceRectangle }, set: function (t) { ge.isEqual(this._sourceRectangle, t) || (this._sourceRectangle = t, this._propertyChanged.notify(this, "sourceRectangle")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "borderColor", { get: function () { return this._borderColor }, set: function (t) { Re.equals(this._borderColor, t) || (this._borderColor = t, this._propertyChanged.notify(this, "borderColor")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overprintStroke", { get: function () { return this._overprintStroke }, set: function (t) { this._overprintStroke !== t && (this._overprintStroke = t, this._propertyChanged.notify(this, "overprintStroke")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fillColor", { get: function () { return this._fillColor }, set: function (t) { Re.equals(this._fillColor, t) || (this._fillColor = t, this._propertyChanged.notify(this, "fillColor")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overprintFill", { get: function () { return this._overprintFill }, set: function (t) { this._overprintFill !== t && (this._overprintFill = t, this._propertyChanged.notify(this, "overprintFill")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "altBorderColor", { get: function () { return this._altBorderColor }, set: function (t) { Re.equals(this._altBorderColor, t) || (this._altBorderColor = t, this._propertyChanged.notify(this, "altBorderColor")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dash", { get: function () { return this._dash }, set: function (t) { A.isEqual(this._dash, t) || (this._dash = t, this._propertyChanged.notify(this, "dash")) }, enumerable: !0, configurable: !0 }), e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = !1, this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint = !1, this.isRenderTypeIsNormal || (this.shapePermissions.allowChangeBorderColor = !1, this.shapePermissions.allowChangeFillColor = !1) }, Object.defineProperty(e.prototype, "shapePermissions", { get: function () { return this._shapePermissions }, set: function (t) { if (null == t) throw new C("shapePermissions cannot be null"); je(this._shapePermissions, t) || (null != this._shapePermissions && this._shapePermissions.propertyChanged.remove(this._onPermissionsChanged), this._shapePermissions = t, this.applyPermissionsConstrain(), this._shapePermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "shapePermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "violationSettings", { get: function () { return this._violationSettings }, set: function (t) { this._setViolationSettings(t) }, enumerable: !0, configurable: !0 }), e.prototype._setViolationSettings = function (e, n) { if (void 0 === n && (n = !1), !(n || e instanceof Hn)) throw new C("Shape ViolationSettings property must has ShapeViolationSettings type!"); t.prototype._setViolationSettings.call(this, e, n) }, e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.shapePermissions = null != e._shapePermissions ? e._shapePermissions.clone() : null, n._stubPath = null != e._stubPath ? e._stubPath.clone() : null, n.dash = A.clone(e._dash), n.altBorderColor = null != e._altBorderColor ? e._altBorderColor.clone() : null, n.fillColor = null != e._fillColor ? e._fillColor.clone() : null, n.borderColor = null != e._borderColor ? e._borderColor.clone() : null, n.sourceRectangle = null != e._sourceRectangle ? e._sourceRectangle.clone() : null, null != e.sourcePathId ? n.sourcePathId = e.sourcePathId : n.sourcePath = null != e._sourcePath ? e._sourcePath.clone() : null, n.borderWidth = e._borderWidth, n.fixedBorderWidth = e.fixedBorderWidth, n.overprintStroke = e.overprintStroke, n.overprintFill = e.overprintFill }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this._shapePermissions, e._shapePermissions), o = je(this._stubPath, e._stubPath), i = je(this._dash, e._dash), a = je(this._altBorderColor, e._altBorderColor), s = je(this._fillColor, e._fillColor), l = je(this._borderColor, e._borderColor), u = je(this._sourceRectangle, e._sourceRectangle), c = je(this.sourcePathId, e.sourcePathId), p = je(this._sourcePath, e._sourcePath), h = je(this._borderWidth, e._borderWidth), f = je(this._fixedBorderWidth, e._fixedBorderWidth), d = je(this._overprintStroke, e._overprintStroke), y = je(this._overprintFill, e._overprintFill); return n && r && o && i && a && s && l && u && c && p && h && f && d && y }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.prototype.getSimplifiedObject = function (e) { var n = t.prototype.getSimplifiedObject.call(this, ["shapePermissions"].concat(e)); return n.shapePermissions = this.shapePermissions.getSimplifiedObject(), null == this.sourcePathId ? n.sourcePath = null != this.sourcePath ? this.sourcePath.toString() : null : n.sourcePath = null, n }, e.prototype._onPathLoaded = function () { this._pathLoadedEvent.notify(this) }, e.prototype.getPathLoadedEvent = function () { return this._pathLoadedEvent }, e.type = "ShapeItem", _([sn({ factory: new Gn, displayName: "Alternative border color" }), b("design:type", Re), b("design:paramtypes", [Re])], e.prototype, "altBorderColor", null), e }(Fn), Xn = function (t) { function e(n) { void 0 === n && (n = new ge(0, 0, 10, 10)); var r = t.call(this, Pe.rectangle(n.left, n.top, n.width, n.height)) || this; return r.type = e.type, r.sourceRectangle = n, r } return m(e, t), e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "RectangleItem", e }(Jn), Yn = function (t) { function e() { var n = t.call(this) || this; return n._maskOpacity = .45, n._parentPlaceholder = null, n.type = e.type, n.borderWidth = 0, n.fillColor = new Le("rgba(0, 0, 0, 0)"), n._ignorePermissionsChange = !0, n.itemPermissions.itemToolbarPermissions.showEditButton = !0, n._ignorePermissionsChange = !1, n } return m(e, t), Object.defineProperty(e.prototype, "maskOpacity", { get: function () { return this._maskOpacity }, set: function (t) { ve(this._maskOpacity, t) || (this._maskOpacity = t, this._propertyChanged.notify(this, "maskOpacity")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "parentPlaceholder", { get: function () { return this._parentPlaceholder }, set: function (t) { this._parentPlaceholder = t, this._propertyChanged.notify(this, "parentPlaceholder") }, enumerable: !0, configurable: !0 }), e.prototype.applyPermissionsConstrain = function () { null != this.parentPlaceholder && (this.parentPlaceholder.isCoverMode ? (this.manipulationPermissions.resizeGrips.edgeConstraint = !1, this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1), this.manipulationPermissions.allowRotateConstraint = !1) : (this.manipulationPermissions.resizeGrips.edgeConstraint = null, this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(null), this.manipulationPermissions.allowRotateConstraint = null), this.parentPlaceholder.applyPermissionsConstrain()), this.isRenderTypeIsNormal || (this.itemPermissions.allowOpacityChange = !1, this.shapePermissions.allowChangeBorderColor = !1, this.shapePermissions.allowChangeFillColor = !1) }, e.prototype.getSimplifiedObject = function (e) { return A.isArray(e) || A.isString(e) || (e = []), t.prototype.getSimplifiedObject.call(this, ["parentPlaceholder"].concat(e)) }, e.prototype._canSetIsVariable = function () { return !0 }, e.prototype._getPrintAreaBounds = function () { var t = null != this.parentContainer ? this.parentContainer : null != this.parentPlaceholder ? this.parentPlaceholder.parentContainer : null; return t instanceof dn ? t.parentComponent.bounds : null }, e.prototype._getParentContainer = function () { return null != this.parentPlaceholder ? this.parentPlaceholder.parentContainer : null }, e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n._maskOpacity = e._maskOpacity, n.isVariable = e.isVariable }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._maskOpacity, e._maskOpacity) && je(this.isVariable, e.isVariable) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "ContentItem", e }(Xn); !function (t) { t.Miter = "Miter", t.Round = "Round", t.Bevel = "Bevel" }(Tn || (Tn = {})); var $n = function () { function t(e) { this._color = new Le("rgb(0,0,0)"), this._size = 0, this._lineJoin = Tn.Miter, this.type = t.type, this._propertyChanged = new M, null != e && (this.color = null != e.color ? e.color : new Le("rgb(0,0,0)"), this.size = null != e.size ? e.size : 0, this.lineJoin = null != e.lineJoin ? e.lineJoin : Tn.Miter) } return Object.defineProperty(t.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "size", { get: function () { return this._size }, set: function (t) { this._size !== t && (this._size = t, this._propertyChanged.notify(this, "size")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "lineJoin", { get: function () { return this._lineJoin }, set: function (t) { this._lineJoin !== t && (this._lineJoin = t, this._propertyChanged.notify(this, "lineJoin")) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { return new t(this) }, t._from_data = function (e) { return null == e ? null : new t({ color: qe.createColor(e.color), size: "number" == typeof e.size ? e.size : 0, lineJoin: "string" == typeof e.lineJoin ? e.lineJoin : Tn.Miter }) }, t.prototype.equals = function (e) { return e instanceof t && this.color.equals(e.color) && ve(this.size, e.size) && this.lineJoin == e.lineJoin }, t.equals = function (t, e) { return null == t && null == e || null != t && null != e && t.equals(e) }, t.prototype.getSimplifiedObject = function () { return { color: this.color.toString(), size: this.size, lineJoin: this.lineJoin } }, t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t.type = "StrokeSettings", _([sn({ enumObject: Tn }), b("design:type", String), b("design:paramtypes", [String])], t.prototype, "lineJoin", null), t }(), Kn = function () { function t(t) { this._color = new Le("rgb(0,0,0)"), this._angle = 0, this._distance = 0, this._size = 0, this._propertyChanged = new M, null != t && (this.color = null != t.color ? t.color : new Le("rgb(0,0,0)"), this.angle = null != t.angle ? t.angle : 0, this.distance = null != t.distance ? t.distance : 0, this.size = null != t.size ? t.size : 0) } return Object.defineProperty(t.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "angle", { get: function () { return this._angle }, set: function (t) { this._angle !== t && (this._angle = t, this._propertyChanged.notify(this, "angle")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "distance", { get: function () { return this._distance }, set: function (t) { this._distance !== t && (this._distance = t, this._propertyChanged.notify(this, "distance")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "size", { get: function () { return this._size }, set: function (t) { this._size !== t && (this._size = t, this._propertyChanged.notify(this, "size")) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { return new t(this) }, t._from_data = function (e) { return null == e ? null : new t({ color: qe.createColor(e.color), angle: "number" == typeof e.angle ? e.angle : 0, distance: "number" == typeof e.distance ? e.distance : 0, size: "number" == typeof e.size ? e.size : 0 }) }, t.prototype.equals = function (e) { return e instanceof t && this.color.equals(e.color) && ve(this.angle, e.angle) && ve(this.distance, e.distance) && ve(this.size, e.size) }, t.equals = function (t, e) { return null == t && null == e || null != t && null != e && t.equals(e) }, t.prototype.getSimplifiedObject = function () { return { color: this.color.toString(), angle: this.angle, distance: this.distance, size: this.size } }, t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t }(), Qn = function () { function t(t) { this.propertyChanged = new T, null == t && (t = !0), this.allowChangeText = t, this.allowChangeFont = t, this.allowChangeFontSize = t, this.allowChangeFontColor = t, this.allowChangeTextAlignment = t, this.allowChangeTextBIU = t, this.allowChangeShadow = t, this.allowChangeStroke = t, this.allowChangeLeading = t, this.allowTextFormatting = null, this.allowChangeStrokeColor = t } return t.prototype.clone = function () { var e = new t; return e.allowChangeFont = this.allowChangeFont, e.allowChangeFontColor = this.allowChangeFontColor, e.allowChangeFontSize = this.allowChangeFontSize, e.allowChangeShadow = this.allowChangeShadow, e.allowChangeStroke = this.allowChangeStroke, e.allowChangeText = this.allowChangeText, e.allowChangeTextAlignment = this.allowChangeTextAlignment, e.allowChangeTextBIU = this.allowChangeTextBIU, e.allowChangeLeading = this.allowChangeLeading, e.allowTextFormatting = this.allowTextFormatting, e.allowChangeStrokeColor = this.allowChangeStrokeColor, e }, t.prototype.equals = function (t) { return this.allowChangeFont === t.allowChangeFont && this.allowChangeFontColor === t.allowChangeFontColor && this.allowChangeFontSize === t.allowChangeFontSize && this.allowChangeShadow === t.allowChangeShadow && this.allowChangeStroke === t.allowChangeStroke && this.allowChangeText === t.allowChangeText && this.allowChangeTextAlignment === t.allowChangeTextAlignment && this.allowChangeTextBIU === t.allowChangeTextBIU && this.allowChangeLeading === t.allowChangeLeading && this.allowTextFormatting === t.allowTextFormatting && this.allowChangeStrokeColor === t.allowChangeStrokeColor }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeText = this.allowChangeText, t.allowChangeFont = this.allowChangeFont, t.allowChangeFontSize = this.allowChangeFontSize, t.allowChangeFontColor = this.allowChangeFontColor, t.allowChangeTextAlignment = this.allowChangeTextAlignment, t.allowChangeTextBIU = this.allowChangeTextBIU, t.allowChangeShadow = this.allowChangeShadow, t.allowChangeStroke = this.allowChangeStroke, t.allowChangeLeading = this.allowChangeLeading, t.allowTextFormatting = this.allowTextFormatting, t.allowChangeStrokeColor = this.allowChangeStrokeColor, t }, _([En(), b("design:type", Boolean)], t.prototype, "allowChangeText", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeFont", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeFontSize", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeFontColor", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeTextAlignment", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeTextBIU", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeShadow", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeStroke", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeStrokeColor", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowChangeLeading", void 0), _([En(), b("design:type", Boolean)], t.prototype, "allowTextFormatting", void 0), t }(), Zn = function (t) { return t[t.ShrinkToContentWidth = 0] = "ShrinkToContentWidth", t[t.StretchToContentWidth = 1] = "StretchToContentWidth", t[t.ShrinkOrStretchToContentWidth = 2] = "ShrinkOrStretchToContentWidth", t[t.ShrinkToContentHeight = 3] = "ShrinkToContentHeight", t[t.StretchToContentHeight = 4] = "StretchToContentHeight", t[t.ShrinkOrStretchToContentHeight = 5] = "ShrinkOrStretchToContentHeight", t[t.ShrinkToContent = 6] = "ShrinkToContent", t[t.StretchToContent = 7] = "StretchToContent", t[t.ShrinkOrStretchToContent = 8] = "ShrinkOrStretchToContent", t }({}), tr = function (t) { return t[t.Size = 0] = "Size", t[t.Scale = 1] = "Scale", t }({}), er = function (t) { return t[t.Clip = 0] = "Clip", t[t.FitToWidth = 1] = "FitToWidth", t[t.FitToBox = 2] = "FitToBox", t[t.ExpandBox = 3] = "ExpandBox", t }({}), nr = function (t) { return t[t.Left = 0] = "Left", t[t.Center = 1] = "Center", t[t.Right = 2] = "Right", t[t.Justify = 3] = "Justify", t[t.LastLeft = 4] = "LastLeft", t[t.LastRight = 5] = "LastRight", t[t.LastCenter = 6] = "LastCenter", t }({}), rr = function (t) { return t[t.Top = 0] = "Top", t[t.Center = 1] = "Center", t[t.Bottom = 2] = "Bottom", t }({}), or = function (t) { return t[t.Ascent = 0] = "Ascent", t[t.CapHeight = 1] = "CapHeight", t[t.Leading = 2] = "Leading", t[t.XHeight = 3] = "XHeight", t[t.Fixed = 4] = "Fixed", t[t.EmboxHeight = 5] = "EmboxHeight", t }({}), ir = function (t) { function e(n) { var r = t.call(this, n) || this; return r.type = e.type, null == n && (n = !0), r._allowTextCrop = n, r._allowInPlaceText = n, r } return m(e, t), e.prototype.clone = function () { var n = new e; return n.allowTextCrop = this.allowTextCrop, n.allowInPlaceText = this.allowInPlaceText, n = t.prototype.clone.call(this, n) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && this.allowTextCrop === e.allowTextCrop && this.allowInPlaceText === e.allowInPlaceText }, e.type = "TextViolationSettings", _([En(), b("design:type", Boolean)], e.prototype, "allowTextCrop", void 0), _([En(), b("design:type", Boolean)], e.prototype, "allowInPlaceText", void 0), e }(Hn), ar = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, sr = function (t) { function e(n, r, o) { var i = t.call(this) || this; i._text = "", i._originalText = "", i._underline = !1, i._color = new Le("rgb(0,0,0)"), i._alignment = nr.Left, i._tracking = 0, i._leading = 0, i._checkTextCrop = !0, i._overlapLinesEnabled = !1, i._verticalScale = 1, i._horizontalScale = 1, i._stroke = null, i._shadow = null, i._previewScale = 1, i._placeholders = new rn, i._displayText = null, i._colorPalette = new rn, i._baselineShift = 0, i._overprintText = !1, i.values = [], i._maxLineLength = null, i._maxLineCount = null, i.isTextPlaceholder = !1, i.textColorForAbnormalRendering = new Le("rgb(0,0,0)"), i.type = e.type, i._onFontPropertyChanged = function (t, e) { i._propertyChanged.notify(i, "font") }, i._onShadowPropertyChanged = function (t, e) { i._propertyChanged.notify(i, "shadow") }, i._onStrokePropertyChanged = function (t, e) { i._propertyChanged.notify(i, "stroke") }, i.borderWidth = 0, i.fillColor = new Le("rgba(0, 0, 0, 0)"), i.text = null != n ? n : "", i._font = new e.FontSettings(r, null != o ? o : 10), i._subscribeFontPropertyChanged(), i.textPermissions = new Qn, i._setViolationSettings(new ir, !0); var a = function () { i._displayText = null, i._propertyChanged.notify(i, "text") }; return i._placeholders.add_itemAdded((function (t) { return t.item.addPropertyChanged(a) })), i._placeholders.add_itemRemoved((function (t) { return t.item.removePropertyChanged(a) })), i._ignorePermissionsChange = !0, i.itemPermissions.allowRemoveOnLayoutChange = !0, i.itemPermissions.itemToolbarPermissions.showEditButton = !0, i._ignorePermissionsChange = !1, i } return m(e, t), Object.defineProperty(e.prototype, "maxLineCount", { get: function () { return this._maxLineCount }, set: function (t) { this._maxLineCount !== t && (this._maxLineCount = t, this._displayText = null, this._propertyChanged.notify(this, "maxLineCount")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "maxLineLength", { get: function () { return this._maxLineLength }, set: function (t) { this._maxLineLength !== t && (this._maxLineLength = t, this._displayText = null, this._propertyChanged.notify(this, "maxLineLength")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "previewScale", { get: function () { return this._previewScale }, set: function (t) { ve(this._previewScale, t) || (this._previewScale = t, this._propertyChanged.notify(this, "previewScale")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "stroke", { get: function () { return this._stroke }, set: function (t) { $n.equals(this._stroke, t) || (this._unsubscribeStrokePropertyChanged(), this._stroke = t, this._subscribeStrokePropertyChanged(), this._propertyChanged.notify(this, "stroke")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "shadow", { get: function () { return this._shadow }, set: function (t) { null == this._shadow && null == t || null != t && t.equals(this._shadow) || (this._unsubscribeShadowPropertyChanged(), this._shadow = t, this._subscribeShadowPropertyChanged(), this._propertyChanged.notify(this, "shadow")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "horizontalScale", { get: function () { return this._horizontalScale }, set: function (t) { ve(this._horizontalScale, t) || (this._horizontalScale = t, this._propertyChanged.notify(this, "horizontalScale")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "verticalScale", { get: function () { return this._verticalScale }, set: function (t) { ve(this._verticalScale, t) || (this._verticalScale = t, this._propertyChanged.notify(this, "verticalScale")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "checkTextCrop", { get: function () { return this._checkTextCrop }, set: function (t) { this._checkTextCrop !== t && (this._checkTextCrop = t, this._propertyChanged.notify(this, "checkTextCrop")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overlapLinesEnabled", { get: function () { return this._overlapLinesEnabled }, set: function (t) { this._overlapLinesEnabled !== t && (this._overlapLinesEnabled = t, this._propertyChanged.notify(this, "overlapLinesEnabled")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alignment", { get: function () { return this._alignment }, set: function (t) { this._alignment !== t && (this._alignment = t, this._propertyChanged.notify(this, "alignment")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "tracking", { get: function () { return this._tracking }, set: function (t) { ve(this._tracking, t) || (this._tracking = t, this._propertyChanged.notify(this, "tracking")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "leading", { get: function () { return this._leading }, set: function (t) { ve(this._leading, t) || (this._leading = t, this._propertyChanged.notify(this, "leading")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "originalText", { get: function () { return null != this._originalText ? this._originalText : "" }, set: function (t) { this._originalText = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "underline", { get: function () { return this._underline }, set: function (t) { this._underline !== t && (this._underline = t, this._propertyChanged.notify(this, "underline")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "font", { get: function () { return this._font }, set: function (t) { e.FontSettings.equals(this._font, t) || (this._unsubscribeFontPropertyChanged(), this._font = t, this._subscribeFontPropertyChanged(), this._propertyChanged.notify(this, "font")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "text", { get: function () { return null == this._displayText && (this._displayText = this.getUpdatedText(this._text)), this._text = this._displayText, this._text }, set: function (t) { this._text !== t && (this._text = t, this._displayText = null, this._propertyChanged.notify(this, "text")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "baselineShift", { get: function () { return this._baselineShift }, set: function (t) { ve(this._baselineShift, t) || (this._baselineShift = t, this._propertyChanged.notify(this, "baselineShift")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overprintText", { get: function () { return this._overprintText }, set: function (t) { t != this._overprintText && (this._overprintText = t, this._propertyChanged.notify(this, "overprintText")) }, enumerable: !0, configurable: !0 }), e.prototype.getUpdatedText = function (t) { var e, n, r = t; this.placeholders.length > 0 && (r = this._replaceInStringPlaceholders()); var o = null !== (e = this._maxLineCount) && void 0 !== e ? e : 0, i = null !== (n = this._maxLineLength) && void 0 !== n ? n : 0; if (o > 0 || i > 0) { Be(r) && (r = Me(t, "\n")); var a = r.split("\n"); if (o > 0 && a.length > o && (a = a.splice(0, o)), i > 0) for (var s = 0; s < a.length; s++)a[s].length > i && (a[s] = a[s].substr(0, i)); return a.join("\n") } return r }, Object.defineProperty(e.prototype, "placeholders", { get: function () { return this._placeholders }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "colorPalette", { get: function () { return this._colorPalette }, enumerable: !0, configurable: !0 }), e.prototype._canSetIsVariable = function () { return !0 }, Object.defineProperty(e.prototype, "previewFontSize", { get: function () { return this.font.size * this.previewScale }, set: function (t) { this.font.size = t / this.previewScale }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "previewLeading", { get: function () { return this.leading * this.previewScale }, set: function (t) { this.leading = t / this.previewScale }, enumerable: !0, configurable: !0 }), e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), this.itemPermissions.itemToolbarPermissions.showSelectButton = !1, null == this.textPermissions || this.textPermissions.allowChangeText ? this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = null : this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = !1, this.isRenderTypeIsNormal || (this.textPermissions.allowChangeFontColor = !1, this.textPermissions.allowChangeShadow = !1, this.textPermissions.allowChangeStroke = !1) }, Object.defineProperty(e.prototype, "textPermissions", { get: function () { return this._textPermissions }, set: function (t) { if (null == t) throw new C("textPermissions cannot be null"); je(this._textPermissions, t) || (null != this._textPermissions && this._textPermissions.propertyChanged.remove(this._onPermissionsChanged), this._textPermissions = t, this.applyPermissionsConstrain(), this._textPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "textPermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "violationSettings", { get: function () { return this._violationSettings }, set: function (t) { this._setViolationSettings(t) }, enumerable: !0, configurable: !0 }), e.prototype._setViolationSettings = function (e, n) { if (void 0 === n && (n = !1), !(n || e instanceof ir)) throw new C("Shape ViolationSettings property must has TextViolationSettings type!"); t.prototype._setViolationSettings.call(this, e, n) }, e.prototype._subscribeFontPropertyChanged = function () { null != this._font && this._font.addPropertyChanged(this._onFontPropertyChanged) }, e.prototype._unsubscribeFontPropertyChanged = function () { null != this._font && this._font.removePropertyChanged(this._onFontPropertyChanged) }, e.prototype._subscribeShadowPropertyChanged = function () { null != this._shadow && this._shadow.addPropertyChanged(this._onShadowPropertyChanged) }, e.prototype._unsubscribeShadowPropertyChanged = function () { null != this._shadow && this._shadow.removePropertyChanged(this._onShadowPropertyChanged) }, e.prototype._subscribeStrokePropertyChanged = function () { null != this._stroke && this._stroke.addPropertyChanged(this._onStrokePropertyChanged) }, e.prototype._unsubscribeStrokePropertyChanged = function () { null != this._stroke && this._stroke.removePropertyChanged(this._onStrokePropertyChanged) }, e.prototype.getSimplifiedObject = function (e) { var n = t.prototype.getSimplifiedObject.call(this, ["_placeholders", "currentTextImage", "textPermissions", "textForTextWhizz", "shadow", "stroke"].concat(e)); return n.placeholders = this.placeholders.toArray(), n.textPermissions = this.textPermissions.getSimplifiedObject(), n.font = this.font.getSimplifiedObject(), n.shadow = null != this.shadow ? this.shadow.getSimplifiedObject() : null, n.stroke = null != this.stroke ? this.stroke.getSimplifiedObject() : null, n }, e.prototype._replaceInStringPlaceholders = function () { return Be(this.originalText) ? this._replaceInStringPlaceholdersValueInRichText() : this._replaceInStringPlaceholdersValueInPlainText() }, e.prototype._replaceInStringPlaceholdersValueInPlainText = function () { var t = this.originalText; return this.placeholders.forEach((function (e) { t = t.replace(e.id, e.value) })), t }, e.prototype._replaceInStringPlaceholdersValueInRichText = function () { if (null == this._originalTextDom) { var t = new DOMParser; this._originalTextDom = t.parseFromString("<xml>" + this.originalText + "</xml>", "text/xml") } var e = this._originalTextDom.cloneNode(!0), n = e.getElementsByTagName("span"); this.placeholders.forEach((function (t) { if (null != n && n.length) for (var e = 0; e < n.length; e++) { var r = n[e]; null != r.textContent && (r.textContent = r.textContent.replace(t.id, t.value)) } })); var r = (new XMLSerializer).serializeToString(e); return r.substr(0, r.length - 6).substr(5) }, e.prototype._copy = function (e, n, r, o) { var i, a; if (t.prototype._copy.call(this, e, n, r, o), n.textPermissions = e._textPermissions.clone(), n.placeholders.setRange(e.placeholders.toArray().map((function (t) { return t.clone() }))), n.color = e._color.clone(), n.text = e._text, n.font = e._font.clone(), n.underline = e._underline, n.originalText = e._originalText, n.leading = e._leading, n.tracking = e._tracking, n.alignment = e._alignment, n.checkTextCrop = e._checkTextCrop, n.verticalScale = e._verticalScale, n.horizontalScale = e._horizontalScale, n.shadow = null != e._shadow ? e._shadow.clone() : null, n.stroke = null != e._stroke ? e._stroke.clone() : null, n.previewScale = e._previewScale, n._maxLineCount = e._maxLineCount, n.isTextPlaceholder = e.isTextPlaceholder, n.maxLineLength = e.maxLineLength, n.overlapLinesEnabled = e.overlapLinesEnabled, n.colorPalette.setRange(e.colorPalette.toArray().map((function (t) { return t.clone() }))), n.baselineShift = e.baselineShift, n.overprintText = e.overprintText, null != e.values) { n.values = []; try { for (var s = ar(e.values), l = s.next(); !l.done; l = s.next()) { var u = l.value; n.values.push(u.clone()) } } catch (t) { i = { error: t } } finally { try { l && !l.done && (a = s.return) && a.call(s) } finally { if (i) throw i.error } } } }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this._textPermissions, e._textPermissions), o = ke(this._placeholders.toArray(), e._placeholders.toArray()), i = je(this._color, e._color), a = je(this._text, e._text), s = je(this._font, e._font), l = je(this._underline, e._underline), u = je(this._originalText, e._originalText), c = je(this._leading, e._leading), p = je(this._tracking, e._tracking), h = je(this._alignment, e._alignment), f = je(this._checkTextCrop, e._checkTextCrop), d = je(this._verticalScale, e._verticalScale), y = je(this._previewScale, e._previewScale), g = je(this._maxLineCount, e._maxLineCount), m = je(this.isTextPlaceholder, e.isTextPlaceholder), _ = je(this._maxLineLength, e._maxLineLength), b = je(this._overlapLinesEnabled, e._overlapLinesEnabled), v = je(this._stroke, e._stroke), w = ke(this.values, e.values), C = ke(this._colorPalette.toArray(), e._colorPalette.toArray()), P = je(this._baselineShift, e._baselineShift), S = je(this._overprintText, e._overprintText); return n && r && o && i && a && s && l && u && c && p && h && f && d && y && g && m && _ && b && v && w && C && P && S }, e.prototype.isEmptyText = function () { return "" === this.text }, e.prototype.isEmptyXmlText = function () { return "<p></p>" === this.text || "<p><span></span></p>" === this.text }, e.prototype.isEmpty = function () { return !this.isTextPlaceholder && (this.isEmptyText() || this.isEmptyXmlText()) }, e.type = "baseText", _([sn({ factory: new qn(1), displayName: "Max line count" }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "maxLineCount", null), _([sn({ factory: new qn(50), displayName: "Max line length" }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "maxLineLength", null), _([sn({ factory: new Wn($n), displayName: "Stroke" }), b("design:type", $n), b("design:paramtypes", [$n])], e.prototype, "stroke", null), _([sn({ factory: new Wn(Kn), displayName: "Shadow" }), b("design:type", Kn), b("design:paramtypes", [Kn])], e.prototype, "shadow", null), _([sn({ enumObject: nr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "alignment", null), e }(Xn); !function (t) { var e = function (t) { function e(e, n) { void 0 === n && (n = 10); var r = t.call(this) || this; return r._fauxBold = !1, r._fauxItalic = !1, r._allCaps = !1, r._openTypeFeatures = [], r.$_propertyChanged = new M, r._postScriptName = e, r._size = n, r } return m(e, t), e.prototype.clone = function () { var t = new e(this._postScriptName, this._size); return t._openTypeFeatures = A.clone(this._openTypeFeatures), t.allCaps = this._allCaps, t.fauxItalic = this._fauxItalic, t.fauxBold = this._fauxBold, t }, Object.defineProperty(e.prototype, "fauxBold", { get: function () { return this._fauxBold }, set: function (t) { this._fauxBold !== t && (this._fauxBold = t, this.$_propertyChanged.notify(this, "fauxBold")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fauxItalic", { get: function () { return this._fauxItalic }, set: function (t) { this._fauxItalic !== t && (this._fauxItalic = t, this.$_propertyChanged.notify(this, "fauxItalic")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "allCaps", { get: function () { return this._allCaps }, set: function (t) { this._allCaps !== t && (this._allCaps = t, this.$_propertyChanged.notify(this, "allCaps")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "openTypeFeatures", { get: function () { return this._openTypeFeatures }, set: function (t) { this._openTypeFeatures !== t && (this._openTypeFeatures = t, this.$_propertyChanged.notify(this, "openTypeFeatures")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "postScriptName", { get: function () { return this._postScriptName }, set: function (t) { this._postScriptName !== t && (this._postScriptName = t, this.$_propertyChanged.notify(this, "postScriptName")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this._size }, set: function (t) { ve(this._size, t) || (this._size = t, this.$_propertyChanged.notify(this, "size")) }, enumerable: !0, configurable: !0 }), e.prototype.addPropertyChanged = function (t) { this.$_propertyChanged.add(t) }, e.prototype.removePropertyChanged = function (t) { this.$_propertyChanged.remove(t) }, e.equals = function (t, e) { return null == t && null == e || null != t && null != e && t.equals(e) }, e.prototype.equals = function (t) { return this.postScriptName === t.postScriptName && this.size === t.size && this.fauxBold === t.fauxBold && this.fauxItalic === t.fauxItalic && this.allCaps === t.allCaps && A.isEqual(this.openTypeFeatures, t.openTypeFeatures) }, e.prototype.getSimplifiedObject = function () { return { allCaps: this.allCaps, fauxBold: this.fauxBold, fauxItalic: this.fauxItalic, openTypeFeatures: this.openTypeFeatures, postScriptName: this.postScriptName, size: this.size } }, e }(Ae); t.FontSettings = e; var n = function () { function t(t, e) { this.name = t, this.text = e } return t.prototype.equals = function (t) { return null != t && je(this.name, t.name) && je(this.text, t.text) }, t.prototype.clone = function () { return new t(this.name, this.text) }, t }(); t.BaseTextValue = n }(sr || (sr = {})); var lr, ur, cr = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a._isVertical = !1, a.type = e.type, a._textRectangle = null != r ? r : new ge, a } return m(e, t), Object.defineProperty(e.prototype, "textRectangle", { get: function () { return this._textRectangle }, set: function (t) { ge.isEqual(this._textRectangle, t) || (this._textRectangle = t, this._propertyChanged.notify(this, "textRectangle")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isVertical", { get: function () { return this._isVertical }, set: function (t) { this._isVertical !== t && (this._isVertical = t, this._propertyChanged.notify(this, "isVertical")) }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (n, r, o, i) { t.prototype._copy.call(this, n, r, o, i), "AutoScaledTextItem" != r.type && "BoundedTextItem" != r.type && "PathBoundedTextItem" != r.type && "PlainTextItem" != r.type || (r.isVertical = n.isVertical), r instanceof e && (r.textRectangle = n.textRectangle) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._isVertical, e._isVertical) && je(this._textRectangle, e._textRectangle) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "AutoScaledTextItem", e }(sr), pr = function () { function t() { this._allowChangeBarcodeType = !0, this._allowChangeBarcodeContent = !0, this._allowChangeBarcodeColor = !0, this.propertyChanged = new T } return Object.defineProperty(t.prototype, "allowChangeBarcodeType", { get: function () { return this._allowChangeBarcodeType }, set: function (t) { this._allowChangeBarcodeType !== t && (this._allowChangeBarcodeType = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowChangeBarcodeContent", { get: function () { return this._allowChangeBarcodeContent }, set: function (t) { this._allowChangeBarcodeContent !== t && (this._allowChangeBarcodeContent = t, this.propertyChanged.fire()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowChangeBarcodeColor", { get: function () { return this._allowChangeBarcodeColor }, set: function (t) { this._allowChangeBarcodeColor !== t && (this._allowChangeBarcodeColor = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeBarcodeType = this.allowChangeBarcodeType, t.allowChangeBarcodeContent = this.allowChangeBarcodeContent, t.allowChangeBarcodeColor = this.allowChangeBarcodeColor, t }, t.prototype.clone = function () { var e = new t; return e.allowChangeBarcodeType = this.allowChangeBarcodeType, e.allowChangeBarcodeContent = this.allowChangeBarcodeContent, e.allowChangeBarcodeColor = this.allowChangeBarcodeColor, e }, t.prototype.equals = function (t) { return this.allowChangeBarcodeColor === t.allowChangeBarcodeColor && this.allowChangeBarcodeContent === t.allowChangeBarcodeContent && this.allowChangeBarcodeType === t.allowChangeBarcodeType }, t }(); !function (t) { t.AZTEC = "AZTEC", t.CODABAR = "CODABAR", t.CODE_39 = "CODE_39", t.CODE_93 = "CODE_93", t.CODE_128 = "CODE_128", t.DATA_MATRIX = "DATA_MATRIX", t.EAN_8 = "EAN_8", t.EAN_13 = "EAN_13", t.ITF = "ITF", t.PDF_417 = "PDF_417", t.QR_CODE = "QR_CODE", t.UPC_A = "UPC_A", t.UPC_E = "UPC_E", t.MSI = "MSI", t.PLESSEY = "PLESSEY", t.IMB = "IMB", t.DATABAR_EXPANDED_STACKED = "DATABAR_EXPANDED_STACKED" }(lr || (lr = {})), function (t) { t.None = "None", t.VCard = "VCard", t.Phone = "Phone", t.Url = "Url" }(ur || (ur = {})); var hr = n(8), fr = function () { function t(t) { if (this.barcodeFormat = lr.QR_CODE, this.barcodeSubType = ur.None, A.isString(t)) try { t = JSON.parse(t) } catch (e) { console.warn("Unable to parse BarcodeData from string ", t, e), t = null } A.isObject(t) && A.extend(this, t) } return Object.defineProperty(t.prototype, "isEmpty", { get: function () { return A.isEmpty(this.firstName) && A.isEmpty(this.lastName) && A.isEmpty(this.organization) && A.isEmpty(this.position) && A.isEmpty(this.email) && A.isEmpty(this.mobilePhone) && A.isEmpty(this.url) && A.isEmpty(this.phone) && A.isEmpty(this.barcodeValue) }, enumerable: !0, configurable: !0 }), t.prototype.equals = function (t) { return null != t && this.barcodeFormat === t.barcodeFormat && this.barcodeSubType === t.barcodeSubType && this.firstName === t.firstName && this.lastName === t.lastName && this.organization === t.organization && this.position === t.position && this.email === t.email && this.mobilePhone === t.mobilePhone && this.url === t.url && this.phone === t.phone && this.barcodeValue === t.barcodeValue }, t.prototype._isEmpty = function (t) { return A.isEmpty(null != t ? t.trim() : null) }, t.prototype.toVCardString = function () { var t = { n: [{ value: [this.lastName, this.firstName, "", "", ""] }], "email;internet": [{ value: this.email }], org: [{ value: this.organization }], "tel;cell": [{ value: this.mobilePhone }], "tel;work": [{ value: this.phone }], title: [{ value: this.position }], url: [{ value: this.url }] }; return hr.generate(t) }, t.fromVCardString = function (e) { var n = null != e ? hr.parse(e) : {}, r = new t; return r.barcodeFormat = lr.QR_CODE, r.barcodeSubType = ur.VCard, r.email = n.email && n.email[0] && n.email[0].value, r.lastName = n.n && n.n[0] && n.n[0].value[0], r.firstName = n.n && n.n[0] && n.n[0].value[1], r.organization = n.org && n.org[0] && n.org[0].value, r.mobilePhone = n.tel && n.tel[0] && n.tel[0].value, r.phone = n.tel && n.tel[1] && n.tel[1].value, r.position = n.title && n.title[0] && n.title[0].value, r.url = n.url && n.url[0] && n.url[0].value, r }, t }(), dr = function (t) { function e(n, r, o, i) { var a = t.call(this) || this; return a._barcodeContent = "", a._barcodeFormat = lr.QR_CODE, a._barcodeOptions = new yr, a._barcodeSubType = ur.Url, a._color = new Le("rgb(0,0,0)"), a.type = e.type, a._onOptionsPropertyChanged = function (t, e) { a._propertyChanged.notify(a, "barcodeOptions") }, a._barcodePermissions = new pr, a._barcodeOptions.pureBarcode = !0, a._ignorePermissionsChange = !1, a.manipulationPermissions.resizeGrips = new In(!0, !1), a.itemPermissions.itemToolbarPermissions.showEditButton = !0, a.shapePermissions.allowChangeFillColor = !0, a.barcodePermissions.allowChangeBarcodeType = !1, a.barcodePermissions.allowChangeBarcodeColor = !0, a.barcodePermissions.allowChangeBarcodeContent = !0, a._ignorePermissionsChange = !0, a.fillColor = new Le("rgba(255,255,255,1)"), null != n && (a._barcodeFormat = n), null != r && (a._barcodeContent = r), null != o && (a._barcodeOptions = o), a._subscribeOptionsPropertyChanged(), null != i && (a.sourceRectangle = i), a.applyPermissionsConstrain(), a } return m(e, t), Object.defineProperty(e.prototype, "barcodePermissions", { get: function () { return this._barcodePermissions }, set: function (t) { if (null == t) throw new C("barcodePermissions cannot be null"); je(this._barcodePermissions, t) || (this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged), this._barcodePermissions = t, this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "barcodeContent", { get: function () { return this._barcodeContent }, set: function (t) { this._barcodeContent !== t && (this._barcodeContent = t, this._propertyChanged.notify(this, "barcodeContent")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "barcodeFormat", { get: function () { return this._barcodeFormat }, set: function (t) { this._barcodeFormat !== t && (this._barcodeFormat = t, this._propertyChanged.notify(this, "barcodeFormat")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "barcodeSubType", { get: function () { return this._barcodeSubType }, set: function (t) { this._barcodeSubType !== t && (this._barcodeSubType = t, this._propertyChanged.notify(this, "barcodeSubType")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "color", { get: function () { return this._color }, set: function (t) { this._color.equals(t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "barcodeOptions", { get: function () { return this._barcodeOptions }, set: function (t) { JSON.stringify(this._barcodeOptions) !== JSON.stringify(t) && (this._unsubscribeOptionsPropertyChanged(), this._barcodeOptions = t, this._subscribeOptionsPropertyChanged(), this._propertyChanged.notify(this, "barcodeOptions")) }, enumerable: !0, configurable: !0 }), e.prototype._subscribeOptionsPropertyChanged = function () { null != this._barcodeOptions && this._barcodeOptions.addPropertyChanged(this._onOptionsPropertyChanged) }, e.prototype._unsubscribeOptionsPropertyChanged = function () { null != this._barcodeOptions && this._barcodeOptions.removePropertyChanged(this._onOptionsPropertyChanged) }, Object.defineProperty(e.prototype, "isQrCode", { get: function () { return this.barcodeFormat === lr.QR_CODE }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSquareCode", { get: function () { return this.barcodeFormat === lr.QR_CODE || this.barcodeFormat === lr.DATA_MATRIX }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isLinearBarcode", { get: function () { return this.barcodeFormat === lr.EAN_13 || this.barcodeFormat === lr.EAN_8 || this.barcodeFormat == lr.CODE_128 || this.barcodeFormat === lr.UPC_A || this.barcodeFormat === lr.UPC_E }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.barcodePermissions = e.barcodePermissions.clone(), n.barcodeContent = e.barcodeContent, n.barcodeFormat = e.barcodeFormat, n.barcodeSubType = e.barcodeSubType, n.color = e.color.clone(), n.barcodeOptions = new yr, n.barcodeOptions.width = e.barcodeOptions.width, n.barcodeOptions.height = e.barcodeOptions.height, n.barcodeOptions.margin = e.barcodeOptions.margin, n.barcodeOptions.pureBarcode = e.barcodeOptions.pureBarcode, n.barcodeOptions.errorCorrection = e.barcodeOptions.errorCorrection, n.barcodeOptions.characterSet = e.barcodeOptions.characterSet, n.barcodeOptions.pdf417Compact = e.barcodeOptions.pdf417Compact, n.barcodeOptions.pdf417Compaction = e.barcodeOptions.pdf417Compaction, n.barcodeOptions.pdf417Dimensions = e.barcodeOptions.pdf417Dimensions, n.barcodeOptions.disableEci = e.barcodeOptions.disableEci, n.barcodeOptions.code128ForceCodesetB = e.barcodeOptions.code128ForceCodesetB, n.barcodeOptions.aztecLayers = e.barcodeOptions.aztecLayers, n.barcodeOptions.qrVersion = e.barcodeOptions.qrVersion, n.barcodeOptions.xDimension = e.barcodeOptions.xDimension, n.barcodeOptions.databarExpandedSegments = e.barcodeOptions.databarExpandedSegments }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._barcodePermissions, e._barcodePermissions) && je(this._barcodeContent, e._barcodeContent) && je(this._barcodeFormat, e._barcodeFormat) && je(this._barcodeSubType, e._barcodeSubType) && je(this._color, e._color) && je(this._barcodeOptions, e._barcodeOptions) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.prototype.getSimplifiedObject = function (e) { A.isArray(e) || A.isString(e) || (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["barcodePermissions", "isQrCode", "isLinearBarcode", "isSquareCode", "barcodeData"].concat(e)); return n.barcodePermissions = this.barcodePermissions.getSimplifiedObject(), n }, e.prototype.applyPermissionsConstrain = function () { null != this.itemPermissions && null != this.itemPermissions.itemToolbarPermissions && (null == this.barcodePermissions || this.barcodePermissions.allowChangeBarcodeContent ? this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = null : this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = this.barcodePermissions.allowChangeBarcodeContent, this.itemPermissions.itemToolbarPermissions.showSelectButton = !1) }, Object.defineProperty(e.prototype, "barcodeData", { get: function () { var t = new fr; switch (t.barcodeSubType = this.barcodeSubType, t.barcodeFormat = this.barcodeFormat, t.barcodeFormat) { default: t.barcodeValue = this.barcodeContent; break; case lr.QR_CODE: switch (this.barcodeSubType) { case ur.Phone: t.phone = this.barcodeContent; break; case ur.Url: t.url = this.barcodeContent; break; case ur.VCard: return fr.fromVCardString(this.barcodeContent) } }return t }, enumerable: !0, configurable: !0 }), e.prototype.applyBarcodeData = function (t) { this.barcodeFormat = t.barcodeFormat, this.barcodeSubType = null != t.barcodeSubType ? t.barcodeSubType : this.barcodeFormat === lr.QR_CODE ? ur.Phone : ur.None; var e = ""; switch (this.barcodeFormat) { case lr.QR_CODE: switch (this.barcodeSubType) { case ur.Phone: e = t.phone; break; case ur.None: case ur.Url: e = t.url; break; case ur.VCard: e = t.toVCardString() }break; default: e = t.barcodeValue }this.barcodeContent = e }, e.type = "BarcodeItem", _([sn({ enumObject: lr }), b("design:type", String), b("design:paramtypes", [String])], e.prototype, "barcodeFormat", null), _([sn({ enumObject: ur }), b("design:type", String), b("design:paramtypes", [String])], e.prototype, "barcodeSubType", null), e }(Yn), yr = function (t) { function e() { var n = null !== t && t.apply(this, arguments) || this; return n.type = e.type, n } return m(e, t), e.prototype.equals = function (t) { return null != t && je(this.width, t.width) && je(this.height, t.height) && je(this.margin, t.margin) && je(this.pureBarcode, t.pureBarcode) && je(this.errorCorrection, t.errorCorrection) && je(this.characterSet, t.characterSet) && je(this.pdf417Compact, t.pdf417Compact) && je(this.pdf417Compaction, t.pdf417Compaction) && A.isEqual(this.pdf417Dimensions, t.pdf417Dimensions) && je(this.disableEci, t.disableEci) && je(this.code128ForceCodesetB, t.code128ForceCodesetB) && je(this.aztecLayers, t.aztecLayers) && je(this.qrVersion, t.qrVersion) && je(this.xDimension, t.xDimension && je(this.databarExpandedSegments, t.databarExpandedSegments)) }, e.type = "EncodingOptions", _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "width", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "height", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "margin", void 0), _([En(), sn({ factory: new qn(!0) }), b("design:type", Boolean)], e.prototype, "pureBarcode", void 0), _([En(), sn({ factory: new qn("") }), b("design:type", String)], e.prototype, "errorCorrection", void 0), _([En(), sn({ factory: new qn("") }), b("design:type", String)], e.prototype, "characterSet", void 0), _([En(), sn({ factory: new qn(!1) }), b("design:type", Boolean)], e.prototype, "pdf417Compact", void 0), _([En(), sn({ factory: new qn("") }), b("design:type", String)], e.prototype, "pdf417Compaction", void 0), _([En(), b("design:type", Object)], e.prototype, "pdf417Dimensions", void 0), _([En(), sn({ factory: new qn(!1) }), b("design:type", Boolean)], e.prototype, "disableEci", void 0), _([En(), sn({ factory: new qn(!1) }), b("design:type", Boolean)], e.prototype, "code128ForceCodesetB", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "aztecLayers", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "qrVersion", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "xDimension", void 0), _([En(), sn({ factory: new qn(0) }), b("design:type", Number)], e.prototype, "databarExpandedSegments", void 0), e }(Ae), gr = function () { function t(t) { this.FirstLineIndent = 0, this.SpaceAfter = 0, this.SpaceBefore = 0, this.LeftIndent = 0, this.RightIndent = 0, null != t && (this.FirstLineIndent = "number" == typeof t.FirstLineIndent ? t.FirstLineIndent : 0, this.SpaceAfter = "number" == typeof t.SpaceAfter ? t.SpaceAfter : 0, this.SpaceBefore = "number" == typeof t.SpaceBefore ? t.SpaceBefore : 0, this.LeftIndent = "number" == typeof t.LeftIndent ? t.LeftIndent : 0, this.RightIndent = "number" == typeof t.RightIndent ? t.RightIndent : 0) } return t.prototype.equals = function (e) { return e instanceof t && ve(this.FirstLineIndent, e.FirstLineIndent) && ve(this.SpaceAfter, e.SpaceAfter) && ve(this.SpaceBefore, e.SpaceBefore) && ve(this.LeftIndent, e.LeftIndent) && ve(this.RightIndent, e.RightIndent) }, t.equals = function (t, e) { return null == t && null == e || null != t && null != e && t.equals(e) }, t.prototype.clone = function () { return new t(this) }, t }(), mr = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a._textRectangle = new ge, a._verticalAlignment = rr.Top, a._isVertical = !1, a._paragraphSettings = new gr, a._wrappingPath = null, a._wrappingMargin = 7, a._scheduledFitMode = null, a._shrinkMode = tr.Size, a._overflowStrategy = er.Clip, a._originalVerticalScale = 1, a._originalHorizontalScale = 1, a._characterLimit = null, a._firstBaselineOffset = or.Ascent, a._firstBaselineMinOffset = 0, a.type = e.type, null != r && (a.textRectangle = r, a.sourcePath = Pe.rectangle(r.left, r.top, r.width, r.height)), a } return m(e, t), Object.defineProperty(e.prototype, "textRectangle", { get: function () { return this._textRectangle }, set: function (t) { ge.isEqual(this._textRectangle, t) || (this._textRectangle = t, this._propertyChanged.notify(this, "textRectangle")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "verticalAlignment", { get: function () { return this._verticalAlignment }, set: function (t) { this._verticalAlignment !== t && (this._verticalAlignment = t, this._propertyChanged.notify(this, "verticalAlignment")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isVertical", { get: function () { return this._isVertical }, set: function (t) { this._isVertical !== t && (this._isVertical = t, this._propertyChanged.notify(this, "isVertical")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paragraphSettings", { get: function () { return this._paragraphSettings }, set: function (t) { this._paragraphSettings.equals(t) || (this._paragraphSettings = t, this._propertyChanged.notify(this, "paragraphSettings")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wrappingPath", { get: function () { return this._wrappingPath }, set: function (t) { null == this._wrappingPath && null == t || null != this._wrappingPath && this._wrappingPath.isEqual(t) || (this._wrappingPath = t, this._propertyChanged.notify(this, "wrappingPath")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wrappingMargin", { get: function () { return this._wrappingMargin }, set: function (t) { this._wrappingMargin !== t && (this._wrappingMargin = t, this._propertyChanged.notify(this, "wrappingMargin")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "scheduledFitMode", { get: function () { return this._scheduledFitMode }, set: function (t) { this._scheduledFitMode !== t && (this._scheduledFitMode = t, null != t && this._propertyChanged.notify(this, "scheduledFitMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "shrinkMode", { get: function () { return this._shrinkMode }, set: function (t) { this._shrinkMode !== t && (this._shrinkMode = t, null != t && this._propertyChanged.notify(this, "shrinkMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overflowStrategy", { get: function () { return this._overflowStrategy }, set: function (t) { this._overflowStrategy !== t && (this._overflowStrategy = t, null != t && this._propertyChanged.notify(this, "overflowStrategy")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "originalVerticalScale", { get: function () { return this._originalVerticalScale }, set: function (t) { this._originalVerticalScale !== t && (this._originalVerticalScale = t, null != t && this._propertyChanged.notify(this, "originalVerticalScale")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "originalHorizontalScale", { get: function () { return this._originalHorizontalScale }, set: function (t) { this._originalHorizontalScale !== t && (this._originalHorizontalScale = t, null != t && this._propertyChanged.notify(this, "originalHorizontalScale")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "characterLimit", { get: function () { return this._characterLimit }, set: function (t) { ve(this._characterLimit, t) || (this._characterLimit = t, null != t && this._propertyChanged.notify(this, "characterLimit")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "firstBaselineOffset", { get: function () { return this._firstBaselineOffset }, set: function (t) { this._firstBaselineOffset !== t && (this._firstBaselineOffset = t, null != t && this._propertyChanged.notify(this, "firstBaselineOffset")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "firstBaselineMinOffset", { get: function () { return this._firstBaselineMinOffset }, set: function (t) { ve(this._firstBaselineMinOffset, t) || (this._firstBaselineMinOffset = t, null != t && this._propertyChanged.notify(this, "firstBaselineMinOffset")) }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (n, r, o, i) { t.prototype._copy.call(this, n, r, o, i), "AutoScaledTextItem" != r.type && "BoundedTextItem" != r.type && "PathBoundedTextItem" != r.type && "PlainTextItem" != r.type || (r.isVertical = n.isVertical), "BoundedTextItem" != r.type && "PathBoundedTextItem" != r.type || (r.paragraphSettings = n.paragraphSettings.clone(), r.wrappingPath = null != n.wrappingPath ? n.wrappingPath.clone() : null, r.wrappingMargin = n.wrappingMargin, r.characterLimit = n.characterLimit, r.firstBaselineOffset = n.firstBaselineOffset, r.firstBaselineMinOffset = n.firstBaselineMinOffset), r instanceof e && (r.textRectangle = n.textRectangle.clone(), r.verticalAlignment = n.verticalAlignment, r.scheduledFitMode = n.scheduledFitMode, r.shrinkMode = n.shrinkMode, r.overflowStrategy = n.overflowStrategy, r.originalVerticalScale = n.originalVerticalScale, r.originalHorizontalScale = n.originalHorizontalScale) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._isVertical, e._isVertical) && je(this._textRectangle, e._textRectangle) && je(this._verticalAlignment, e._verticalAlignment) && je(this._paragraphSettings, e._paragraphSettings) && je(this._wrappingPath, e._wrappingPath) && je(this._wrappingMargin, e._wrappingMargin) && je(this._scheduledFitMode, e._scheduledFitMode) && je(this._shrinkMode, e._shrinkMode) && je(this._overflowStrategy, e._overflowStrategy) && je(this._originalVerticalScale, e._originalVerticalScale) && je(this._originalHorizontalScale, e._originalHorizontalScale) && je(this.characterLimit, e.characterLimit) && je(this.firstBaselineOffset, e.firstBaselineOffset) && je(this.firstBaselineMinOffset, e.firstBaselineMinOffset) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "BoundedTextItem", _([sn({ enumObject: rr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "verticalAlignment", null), _([sn({ factory: new Wn(Pe), displayName: "Wrapping path" }), b("design:type", Pe), b("design:paramtypes", [Pe])], e.prototype, "wrappingPath", null), _([sn({ enumObject: Zn }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "scheduledFitMode", null), _([sn({ enumObject: tr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "shrinkMode", null), _([sn({ enumObject: er }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "overflowStrategy", null), _([sn({ factory: new qn(50), displayName: "Character Limit" }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "characterLimit", null), _([sn({ enumObject: or }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "firstBaselineOffset", null), e }(sr), _r = function () { function t() { this.propertyChanged = new T, this.allowReplaceContentConstraint = null, this._allowReplaceContent = !0, this.allowUngroupContraint = null, this._allowUngroup = !0, this.allowSelectNestedItemsContraint = null, this._allowSelectNestedItems = !0 } return Object.defineProperty(t.prototype, "allowReplaceContent", { get: function () { return null != this.allowReplaceContentConstraint ? this.allowReplaceContentConstraint : this._allowReplaceContent }, set: function (t) { this._allowReplaceContent !== t && (this._allowReplaceContent = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowUngroup", { get: function () { return null != this.allowUngroupContraint ? this.allowUngroupContraint : this._allowUngroup }, set: function (t) { this._allowUngroup !== t && (this._allowUngroup = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowSelectNestedItems", { get: function () { return null != this.allowSelectNestedItemsContraint ? this.allowSelectNestedItemsContraint : this._allowSelectNestedItems }, set: function (t) { this._allowSelectNestedItems !== t && (this._allowSelectNestedItems = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { return { allowReplaceContent: this._allowReplaceContent, allowSelectNestedItems: this._allowSelectNestedItems, allowUngroup: this._allowUngroup } }, t.prototype.clone = function () { var e = new t; return e.allowReplaceContent = this._allowReplaceContent, e.allowReplaceContentConstraint = this.allowReplaceContentConstraint, e.allowSelectNestedItems = this._allowSelectNestedItems, e.allowSelectNestedItemsContraint = this.allowSelectNestedItemsContraint, e.allowUngroup = this._allowUngroup, e.allowUngroupContraint = this.allowUngroupContraint, e }, t.prototype.equals = function (t) { return this.allowReplaceContent === t.allowReplaceContent && this.allowReplaceContentConstraint === t.allowReplaceContentConstraint && this.allowSelectNestedItems === t.allowSelectNestedItems && this.allowSelectNestedItemsContraint === t.allowSelectNestedItemsContraint && this.allowUngroup === t.allowUngroup && this.allowUngroupContraint === t.allowUngroupContraint }, _([sn({ ignore: !0 }), b("design:type", Boolean)], t.prototype, "allowReplaceContentConstraint", void 0), t }(), br = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, vr = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(br(arguments[e])); return t }, wr = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, Cr = function (t) { function e(n) { var r = t.call(this) || this; return r.items = new rn, r.type = e.type, r.groupItemPermissions = new _r, r._ignorePermissionsChange = !0, r._groupItemPermissions.allowReplaceContent = !1, r._ignorePermissionsChange = !1, r.items.add_itemAdded((function (t) { t.item.parentGroupItem = r, r._propertyChanged.notify(r, "items") })), r.items.add_itemRemoved((function (t) { t.item.parentGroupItem = null, r._propertyChanged.notify(r, "items") })), null != n && r.items.addRange(n), r } return m(e, t), Object.defineProperty(e.prototype, "groupItemPermissions", { get: function () { return this._groupItemPermissions }, set: function (t) { if (null == t) throw new C("groupItemPermissions cannot be null"); je(this._groupItemPermissions, t) || (null != this._groupItemPermissions && this._groupItemPermissions.propertyChanged.remove(this._onPermissionsChanged), this._groupItemPermissions = t, this._groupItemPermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged()) }, enumerable: !0, configurable: !0 }), e.prototype.addItems = function (t, e) { var n; null != e && (t = t.reverse()), null != t && 0 !== t.length && (null != e && e > -1 ? this.items.insertAt(e, t) : (n = this.items).add.apply(n, vr(t))) }, e.prototype._onContainerChanged = function () { var t = this; this.applyToItems((function (e) { e.parentContainer = t.parentContainer })) }, e.prototype.addItem = function (t, e) { null != e && e > -1 ? this.items.insertAt(e, t) : this.items.add(t) }, e.prototype.removeItems = function (t) { var e, n; if (null != t && t.length > 0) try { for (var r = wr(t), o = r.next(); !o.done; o = r.next()) { var i = o.value; this.items.remove(i) } } catch (t) { e = { error: t } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (e) throw e.error } } }, e.prototype.getNestedItems = function (t) { void 0 === t && (t = !1); for (var n = [], r = vr(this.items); r.length > 0;) { var o = r.shift(); o instanceof e && (r.splice.apply(r, vr([r.indexOf(o), 0], o.items)), t) || n.push(o) } return n }, e.prototype.getSimplifiedObject = function (e) { void 0 === e && (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["groupManipulationPermissions", "itemRemovedEvent", "groupItemPermissions", "items"].concat(e)); return n.items = this.items.toArray().map((function (t) { return t.getSimplifiedObject() })), n.groupItemPermissions = this.groupItemPermissions.getSimplifiedObject(), n }, e.prototype._copy = function (e, n, r, o) { if (t.prototype._copy.call(this, e, n, r, o), !(e.items.length <= 0)) { var i = e.items.toArray().map((function (t) { return t.clone(r, o) })); n.items.clear(), n.items.addRange(i), n.groupItemPermissions = e.groupItemPermissions.clone() } }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), this.itemPermissions.itemToolbarPermissions.showEditButton = !1, this.itemPermissions.itemToolbarPermissions.showSelectButton = !1 }, e.prototype.applyToItems = function (t) { this.items.forEach(t) }, Object.defineProperty(e.prototype, "manipulationPermissions", { get: function () { if (0 === this.items.length) return this.groupManipulationPermissions; var t = this.groupManipulationPermissions.clone(); return this.getNestedItems(!0).forEach((function (e) { t.allowDelete = t.allowDelete && e.manipulationPermissions.allowDelete })), Object.freeze(t), t }, set: function (t) { throw new Error("You cannot use ManipulationPermissions setter with GroupItem. Use groupManipulationPermissions setter instead") }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "groupManipulationPermissions", { get: function () { return t.prototype.getManipulationPermissions.call(this) }, set: function (e) { t.prototype.setManipulationPermissions.call(this, e) }, enumerable: !0, configurable: !0 }), e.prototype.isChildVisible = function (t) { return !0 }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this.groupItemPermissions, e.groupItemPermissions), o = ke(vr(this.items), vr(e.items)); return n && r && o }, e.type = "GroupItem", e }(Fn), Pr = function () { return (Pr = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++)for (var o in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]); return t }).apply(this, arguments) }, Sr = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, xr = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(Sr(arguments[e])); return t }, Or = function (t) { function e(n, r) { void 0 === r && (r = null); var o = t.call(this, n) || this; return o.type = e.type, o._colorGroups = [], o._onItemAdded = function (t) { e._generateColorGroups([t.item]).forEach((function (t) { var e; if (t.targets = t.targets.filter((function (t) { return !o.colorGroups.some((function (e) { return e.targets.some((function (e) { var n = e.itemId, r = e.prop; return n === t.itemId && r === t.prop })) })) })), !(t.targets.length < 1)) { var n = o.colorGroups.find((function (e) { return e.color.equals(t.color) })); null != n ? (e = n.targets).push.apply(e, xr(t.targets)) : (null == o.themeBinding.clipartColors && (o.themeBinding.clipartColors = new Array(o.colorGroups.length).fill(null)), o.colorGroups.push(t), o.themeBinding.clipartColors.push(null)) } })) }, o._onItemRemoved = function (t) { var e = t.item.id; (o.colorGroups.forEach((function (t) { t.targets.some((function (t) { return t.itemId === e })) && (t.targets = t.targets.filter((function (t) { return t.itemId !== e }))) })), o.colorGroups.some((function (t) { return 0 === t.targets.length }))) && o.colorGroups.filter((function (t) { return 0 === t.targets.length })).map((function (t) { return o.colorGroups.indexOf(t) })).forEach((function (t) { o.colorGroups.splice(t, 1), o.themeBinding.clipartColors.splice(t, 1) })) }, o._ignorePermissionsChange = !0, o.groupItemPermissions.allowSelectNestedItems = !1, o.groupItemPermissions.allowUngroup = !1, o._ignorePermissionsChange = !1, o.colorGroups = null != r ? r : e._generateColorGroups(o.items.toArray()), o.items.add_itemAdded(o._onItemAdded), o.items.add_itemRemoved(o._onItemRemoved), o } return m(e, t), e.prototype.getSimplifiedObject = function (e) { return void 0 === e && (e = []), t.prototype.getSimplifiedObject.call(this, e) }, e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o); var i = e.colorGroups.map((function (t) { return t.clone() })); if (r) { var a = n.items.toArray().map((function (t) { return t.id })), s = e.items.toArray().map((function (t) { return t.id })), l = i.reduce((function (t, e) { return xr(t, e.targets) }), []); a.forEach((function (t, e) { return l.filter((function (t) { return t.itemId === s[e] })).forEach((function (e) { return e.itemId = t })) })) } n.colorGroups = i }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), null != this.groupItemPermissions && (this.groupItemPermissions.allowSelectNestedItemsContraint = !1, this.groupItemPermissions.allowUngroupContraint = !1) }, Object.defineProperty(e.prototype, "colorGroups", { get: function () { return this._colorGroups }, set: function (t) { this._colorGroups = t }, enumerable: !0, configurable: !0 }), e.prototype.setColor = function (t, e) { var n = this; if (!this.colorGroups.includes(t)) throw Error("Unexpected colorgroup"); var r = e instanceof Re ? e : e.color; t.color.equals(r) || (e instanceof Re || (null == this.themeBinding.clipartColors && (this.themeBinding.clipartColors = new Array(this.colorGroups.length).fill(null)), this.themeBinding.clipartColors[this.colorGroups.indexOf(t)] = e.title), t.targets.forEach((function (t) { var e = t.prop, o = t.itemId, i = n.items.first((function (t) { return t.id === o })); if (!(i instanceof Jn)) throw new Error("Unexpected item in colorgroup"); n._setShapeItemColor(e, i, r.clone()) })), t.color = r.clone(), this._propertyChanged.notify(this, "colorGroups")) }, e._generateColorGroups = function (t) { return t.filter((function (t) { return t instanceof Jn })).reduce((function (t, e) { var n = t.find((function (t) { return t.color.equals(e.fillColor) })); if (null == n && (n = new Ir(e.fillColor), t.push(n)), n.targets.push({ itemId: e.id, prop: jr.FillColor }), e.borderWidth > 0) { var r = t.find((function (t) { return t.color.equals(e.borderColor) })); null == r && (r = new Ir(e.borderColor), t.push(r)), r.targets.push({ itemId: e.id, prop: jr.BorderColor }) } return t }), []) }, e.prototype._setShapeItemColor = function (t, e, n) { switch (t) { case jr.BorderColor: e.borderColor = n; break; case jr.FillColor: e.fillColor = n } }, e.type = "ClipartItem", e }(Cr), Ir = function () { function t(t, e) { void 0 === e && (e = []), this.color = t, this.targets = e } return t.prototype.clone = function () { return new t(this.color.clone(), xr(this.targets.map((function (t) { return Pr({}, t) })))) }, t }(), jr = function (t) { return t[t.BorderColor = 0] = "BorderColor", t[t.FillColor = 1] = "FillColor", t }({}), kr = function () { function t(t) { this._allowChangeImage = !0, this.allowEditImageConstraint = null, this._allowEditImage = !0, this._allowKeepOverlayColor = !1, this.propertyChanged = new T, null == t && (t = !0), this.allowChangeImage = t, this.allowEditImage = t, this.allowKeepOverlayColor = t } return Object.defineProperty(t.prototype, "allowChangeImage", { get: function () { return this._allowChangeImage }, set: function (t) { this._allowChangeImage !== t && (this._allowChangeImage = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowEditImage", { get: function () { return null != this.allowEditImageConstraint ? this.allowEditImageConstraint : this._allowEditImage }, set: function (t) { this._allowEditImage !== t && (this._allowEditImage = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowKeepOverlayColor", { get: function () { return this._allowKeepOverlayColor }, set: function (t) { this._allowKeepOverlayColor !== t && (this._allowKeepOverlayColor = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { var e = new t; return e.allowChangeImage = this.allowChangeImage, e.allowEditImage = this.allowEditImage, e.allowKeepOverlayColor = this.allowKeepOverlayColor, e }, t.prototype.equals = function (t) { return this.allowChangeImage === t.allowChangeImage && this.allowEditImage === t.allowEditImage && this.allowKeepOverlayColor === t.allowKeepOverlayColor }, t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeImage = this.allowChangeImage, t.allowEditImage = this.allowEditImage, t.allowKeepOverlayColor = this.allowKeepOverlayColor, t }, _([sn({ ignore: !0 }), b("design:type", Boolean)], t.prototype, "allowEditImageConstraint", void 0), t }(), Er = function () { function t() { var t = this; this._onPermissionsChanged = function () { t.propertyChanged.notify() }, this.propertyChanged = new T, this._imagePermissions = new kr, this._barcodePermissions = new pr, this._imagePermissions.propertyChanged.add(this._onPermissionsChanged), this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged) } return Object.defineProperty(t.prototype, "barcodePermissions", { get: function () { return this._barcodePermissions }, set: function (t) { if (null == t) throw new C("barcodePermissions cannot be null"); this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged), this._barcodePermissions = t, this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "imagePermissions", { get: function () { return this._imagePermissions }, set: function (t) { if (null == t) throw new C("imagePermissions cannot be null"); this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged), this._imagePermissions = t, this._imagePermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged() }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { return { imagePermissions: this.imagePermissions.getSimplifiedObject(), barcodePermissions: this.barcodePermissions.getSimplifiedObject() } }, t.prototype.clone = function () { var e = new t; return e.barcodePermissions = this.barcodePermissions.clone(), e.imagePermissions = this.imagePermissions.clone(), e }, t.prototype.equals = function (t) { return je(this.barcodePermissions, t.barcodePermissions) && je(this.imagePermissions, t.imagePermissions) }, t }(), Tr = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a._textPath = new Pe, a._fitToPath = !1, a._stretch = !1, a._originalFontSize = 0, a._fitToPathStep = 1, a._start = 0, a.type = e.type, null != r && (a.textPath = r), a._ignorePermissionsChange = !0, a.manipulationPermissions.resizeGrips.setCornerArbitrary(!1), a.manipulationPermissions.resizeGrips.edge = !1, a._ignorePermissionsChange = !1, a } return m(e, t), Object.defineProperty(e.prototype, "textPath", { get: function () { return this._textPath }, set: function (t) { this._textPath.equals(t) || (this._textPath = t, this._propertyChanged.notify(this, "textPath")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fitToPath", { get: function () { return this._fitToPath }, set: function (t) { this._fitToPath !== t && (this._fitToPath = t, this._propertyChanged.notify(this, "fitToPath")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "stretch", { get: function () { return this._stretch }, set: function (t) { this._stretch !== t && (this._stretch = t, this._propertyChanged.notify(this, "stretch")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "start", { get: function () { return this._start }, set: function (t) { this._start !== t && (this._start = t, this._propertyChanged.notify(this, "start")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "end", { get: function () { return this._end }, set: function (t) { this._end !== t && (this._end = t, this._propertyChanged.notify(this, "end")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "originalFontSize", { get: function () { return this._originalFontSize }, set: function (t) { ve(this._originalFontSize, t) || (this._originalFontSize = t, this._propertyChanged.notify(this, "originalFontSize")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fitToPathStep", { get: function () { return this._fitToPathStep }, set: function (t) { ve(this._fitToPathStep, t) || (this._fitToPathStep = t, this._propertyChanged.notify(this, "fitToPathStep")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "maxLineCount", { get: function () { return 1 }, set: function (t) { throw new x("Max Line Count of Curved Text can not be redefined!") }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function (e) { return t.prototype.getSimplifiedObject.call(this, ["maxLineCount"].concat(e)) }, e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), null != this.manipulationPermissions && (this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1), this.manipulationPermissions.resizeGrips.edge = !1) }, e.prototype._copy = function (n, r, o, i) { t.prototype._copy.call(this, n, r, o, i), r instanceof e && (r.textPath = n.textPath.clone(), r.fitToPath = n.fitToPath, r.stretch = n.stretch, r.originalFontSize = n.originalFontSize, r.fitToPathStep = n.fitToPathStep, r.start = n.start, r.end = n.end) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._textPath, e._textPath) && je(this._fitToPath, e._fitToPath) && je(this._stretch, e._stretch) && je(this._originalFontSize, e._originalFontSize) && je(this._fitToPathStep, e._fitToPathStep) && je(this._start, e._start) && je(this._end, e._end) && je(this._textPath, e._textPath) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "CurvedTextItem", e }(sr), Br = function () { function t(t) { this._allowChangeLineWidth = !0, this._allowChangeLineColor = !0, this.propertyChanged = new T, null == t && (t = !0), this.allowChangeLineWidth = t, this.allowChangeLineColor = t } return Object.defineProperty(t.prototype, "allowChangeLineWidth", { get: function () { return this._allowChangeLineWidth }, set: function (t) { this._allowChangeLineWidth !== t && (this._allowChangeLineWidth = t, this.propertyChanged.notify("allowChangeLineWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowChangeLineColor", { get: function () { return this._allowChangeLineColor }, set: function (t) { this._allowChangeLineColor !== t && (this._allowChangeLineColor = t, this.propertyChanged.notify("allowChangeLineColor")) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeLineWidth = this.allowChangeLineWidth, t.allowChangeLineColor = this.allowChangeLineColor, t }, t.prototype.clone = function () { var e = new t; return e.allowChangeLineWidth = this.allowChangeLineWidth, e.allowChangeLineColor = this.allowChangeLineColor, e }, t.prototype.equals = function (t) { return this.allowChangeLineColor === t.allowChangeLineColor && this.allowChangeLineWidth === t.allowChangeLineWidth }, t }(), Mr = function (t) { function e(n, r) { var o = t.call(this) || this; return o._width = 4, o._color = new Le("rgba(0, 0, 0, 1)"), o._sourcePoint0 = new de, o._sourcePoint1 = new de, o._fixedWidth = !1, o._overprintStroke = !1, o.lineColorForAbnormalRendering = new Le("rgb(0,0,0)"), o.type = e.type, o._sourcePoint0 = null != n ? n : new de, o._sourcePoint1 = null != r ? r : new de, o._linePermissions = new Br, o._linePermissions.propertyChanged.add(o._onPermissionsChanged), o._ignorePermissionsChange = !0, o.itemPermissions.itemToolbarPermissions.showEditButton = !1, o.itemPermissions.itemToolbarPermissions.showSelectButton = !1, o._ignorePermissionsChange = !1, o } return m(e, t), Object.defineProperty(e.prototype, "width", { get: function () { return this._width }, set: function (t) { ve(this._width, t) || (this._width = t, this._propertyChanged.notify(this, "width")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourcePoint0", { get: function () { return this._sourcePoint0 }, set: function (t) { de.isEqual(this._sourcePoint0, t) || (this._sourcePoint0 = t, this._propertyChanged.notify(this, "sourcePoint0")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourcePoint1", { get: function () { return this._sourcePoint1 }, set: function (t) { de.isEqual(this._sourcePoint1, t) || (this._sourcePoint1 = t, this._propertyChanged.notify(this, "sourcePoint1")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "fixedWidth", { get: function () { return this._fixedWidth }, set: function (t) { this._fixedWidth !== t && (this._fixedWidth = t, this._propertyChanged.notify(this, "fixedWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "linePermissions", { get: function () { return this._linePermissions }, set: function (t) { if (null == t) throw new C("linePermissions cannot be null"); je(this._linePermissions, t) || (this._linePermissions.propertyChanged.remove(this._onPermissionsChanged), this._linePermissions = t, this._linePermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overprintStroke", { get: function () { return this._overprintStroke }, set: function (t) { t != this._overprintStroke && (this._overprintStroke = t, this._propertyChanged.notify(this, "overprintStroke")) }, enumerable: !0, configurable: !0 }), e.prototype._subscribeToPermissionChanged = function () { this._linePermissions.propertyChanged.add(this._onPermissionsChanged) }, e.prototype._unsubscribeFromPermissionChanged = function () { this._linePermissions.propertyChanged.remove(this._onPermissionsChanged) }, e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), this.itemPermissions.itemToolbarPermissions.showEditButton = !1, this.itemPermissions.itemToolbarPermissions.showSelectButton = !1, this.isRenderTypeIsNormal || (this.linePermissions.allowChangeLineColor = !1) }, e.prototype.getSimplifiedObject = function (e) { var n = t.prototype.getSimplifiedObject.call(this, ["linePermissions"].concat(e)); return n.linePermissions = this.linePermissions.getSimplifiedObject(), n }, e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.width = e.width, n.color = e.color.clone(), n.sourcePoint0 = e.sourcePoint0.clone(), n.sourcePoint1 = e.sourcePoint1.clone(), n.fixedWidth = e.fixedWidth, n.linePermissions = null != e._linePermissions ? e._linePermissions.clone() : null, n.overprintStroke = e.overprintStroke }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._width, e._width) && je(this._color, e._color) && je(this._sourcePoint0, e._sourcePoint0) && je(this._sourcePoint1, e._sourcePoint1) && je(this._fixedWidth, e._fixedWidth) && je(this._linePermissions, e._linePermissions) && je(this._overprintStroke, e._overprintStroke) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "LineItem", e }(Fn), Ar = function (t) { function e(n, r) { var o = t.call(this, n, r) || this; return o._dashWidth = 3, o._altDashWidth = 3, o._altColor = new Le("rgba(0,0,0,0)"), o.type = e.type, o } return m(e, t), Object.defineProperty(e.prototype, "dashWidth", { get: function () { return this._dashWidth }, set: function (t) { ve(this._dashWidth, t) || (this._dashWidth = t, this._propertyChanged.notify(this, "dashWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "altDashWidth", { get: function () { return this._altDashWidth }, set: function (t) { ve(this._altDashWidth, t) || (this._altDashWidth = t, this._propertyChanged.notify(this, "altDashWidth")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "altColor", { get: function () { return this._altColor }, set: function (t) { Re.equals(this._altColor, t) || (this._altColor = t, this._propertyChanged.notify(this, "altColor")) }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.dashWidth = e.dashWidth, n.altDashWidth = e.altDashWidth, n.altColor = e.altColor.clone() }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._dashWidth, e._dashWidth) && je(this._altDashWidth, e._altDashWidth) && je(this._altColor, e._altColor) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "DashedLineItem", e }(Mr), Rr = function (t) { function e(n) { void 0 === n && (n = new ge(0, 0, 10, 10)); var r = t.call(this, Pe.ellipse(n.left, n.top, n.width, n.height)) || this; return r.type = e.type, r.sourceRectangle = n, r.manipulationPermissions.resizeGrips = new In(!0, !0), r } return m(e, t), e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "EllipseItem", e }(Jn), Lr = function (t) { return t[t.None = 0] = "None", t[t.BlackAndWhite = 1] = "BlackAndWhite", t[t.FlipVertical = 2] = "FlipVertical", t[t.FlipHorizontal = 3] = "FlipHorizontal", t[t.Colorize = 4] = "Colorize", t[t.Grayscale = 5] = "Grayscale", t }({}), Nr = function () { function t(t, e) { void 0 === t && (t = 0), void 0 === e && (e = 0), this.width = t, this.height = e } return t.prototype.equals = function (t) { return null != t && je(this.width, t.width) && je(this.height, t.height) }, t.prototype.clone = function () { return new t(this.width, this.height) }, t }(), Fr = function (t) { function e(n) { var r = t.call(this, n) || this; return r.type = e.type, null == n && (n = !0), r._allowImageQuality = n, r } return m(e, t), e.prototype.clone = function () { var n = new e; return n.allowImageQuality = this.allowImageQuality, n = t.prototype.clone.call(this, n) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && this.allowImageQuality === e.allowImageQuality }, e.type = "ImageViolationSettings", _([En(), b("design:type", Boolean)], e.prototype, "allowImageQuality", void 0), e }(Hn), zr = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, Dr = function (t) { function e(n, r, o, i, a) { var s = t.call(this) || this; return s._effect = Lr.None, s._overlayEffect = null, s.type = e.type, s.mviKeepTemplateTransform = !1, s.values = [], s.allowedSubfolder = null, s.allowedTabs = null, s.ratioWidthToHeight = null, s.isUserImage = !1, s._onSourcePropertyChanged = function (t, e) { switch (e) { case "url": case "id": case "pageIndex": s._propertyChanged.notify(s, "source"); break; case "isVector": s.applyPermissionsConstrain(), s._propertyChanged.notify(s, "source") } }, s._onOverlayEffectPropertyChanged = function (t, e) { s._propertyChanged.notify(s, "overlayEffect") }, s.imagePermissions = new kr, s._setViolationSettings(new Fr, !0), s.manipulationPermissions.resizeGrips = new In(!0, !1), s.shapePermissions.allowChangeFillColor = !1, s.imagePermissions.allowKeepOverlayColor = !1, s.itemPermissions.itemToolbarPermissions.showSelectButton = !0, s.source = null != n ? new e.ImageSource(n) : new e.ImageSource, null != a && (s.ratioWidthToHeight = a), null != o && null != i ? s.sourceRectangle = new ge(0, 0, o, i) : (null != o && s.SetWidth(o), null != i && s.SetHeight(i)), null != r && (s.sourceRectangle.left = r.x, s.sourceRectangle.top = r.y), s } return m(e, t), e.prototype._copy = function (e, n, r, o) { var i, a; if (t.prototype._copy.call(this, e, n, r, o), n.imagePermissions = null != e._imagePermissions ? e._imagePermissions.clone() : null, n.effect = e._effect, n.overlayEffect = null != e.overlayEffect ? e.overlayEffect.clone() : null, n.source = e._source.clone(), n.mviKeepTemplateTransform = e.mviKeepTemplateTransform, null != e.values) { n.values = []; try { for (var s = zr(e.values), l = s.next(); !l.done; l = s.next()) { var u = l.value; n.values.push(u.clone()) } } catch (t) { i = { error: t } } finally { try { l && !l.done && (a = s.return) && a.call(s) } finally { if (i) throw i.error } } } n.allowedSubfolder = e.allowedSubfolder, n.allowedTabs = A.clone(e.allowedTabs), n.ratioWidthToHeight = e.ratioWidthToHeight, n.isUserImage = e.isUserImage }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._imagePermissions, e._imagePermissions) && je(this._effect, e._effect) && je(this._source, e._source) && je(this.mviKeepTemplateTransform, e.mviKeepTemplateTransform) && je(this.overlayEffect, e.overlayEffect) && ke(this.values, e.values) && je(this.allowedSubfolder, e.allowedSubfolder) && ke(this.allowedTabs, e.allowedTabs) && je(this.ratioWidthToHeight, e.ratioWidthToHeight) && je(this.isUserImage, e.isUserImage) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, Object.defineProperty(e.prototype, "imagePermissions", { get: function () { return this._imagePermissions }, set: function (t) { if (null == t) throw new C("imagePermissions cannot be null"); je(this._imagePermissions, t) || (null != this._imagePermissions && this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged), this._imagePermissions = t, this.applyPermissionsConstrain(), this._imagePermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "imagePermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "violationSettings", { get: function () { return this._violationSettings }, set: function (t) { this._setViolationSettings(t) }, enumerable: !0, configurable: !0 }), e.prototype._setViolationSettings = function (e, n) { if (void 0 === n && (n = !1), !(n || e instanceof Fr)) throw new C("Shape ViolationSettings property must has ImageViolationSettings type!"); t.prototype._setViolationSettings.call(this, e, n) }, e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), null == this.imagePermissions || this.imagePermissions.allowEditImage ? null != this.source && this.source.isVector ? this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = !1 : this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = null : this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint = !1, null == this.imagePermissions || this.imagePermissions.allowChangeImage ? this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint = null : this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint = !1 }, Object.defineProperty(e.prototype, "displayName", { get: function () { var t = this; if (null == this._displayName && null != this.values && this.values.length > 0) { var e = this.values.find((function (e) { return e.value.id === t.source.id })); null != e && (this.displayName = e.name) } return this._displayName }, set: function (t) { t != this._displayName && (this._displayName = t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "source", { get: function () { return this._source }, set: function (t) { this._source === t || null != this._source && this._source.equals(t) || (null != this._source && this._source.removePropertyChanged(this._onSourcePropertyChanged), this._source = t, null != this._source && this._source.addPropertyChanged(this._onSourcePropertyChanged), this._propertyChanged.notify(this, "source")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "effect", { get: function () { return this._effect }, set: function (t) { this._effect !== t && (this._effect = t, this._propertyChanged.notify(this, "effect")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "overlayEffect", { get: function () { return this._overlayEffect }, set: function (t) { ln.equals(this.overlayEffect, t) || (this._unsubscribeOverlayEffectPropertyChanged(), this._overlayEffect = t, this._subscribeOverlayEffectPropertyChanged(), this._propertyChanged.notify(this, "overlayEffect")) }, enumerable: !0, configurable: !0 }), e.prototype._subscribeOverlayEffectPropertyChanged = function () { null != this.overlayEffect && this.overlayEffect.addPropertyChanged(this._onOverlayEffectPropertyChanged) }, e.prototype._unsubscribeOverlayEffectPropertyChanged = function () { null != this.overlayEffect && this.overlayEffect.removePropertyChanged(this._onOverlayEffectPropertyChanged) }, e.prototype.SetWidth = function (t, e) { this.sourceRectangle.width = t, null != e && (e = !0), null != this.source.id && e && (this.sourceRectangle.height = this._calculateHeight(t)) }, e.prototype.SetHeight = function (t, e) { this.sourceRectangle.height = t, null != e && (e = !0), null != this.source.id && e && (this.sourceRectangle.width = this._calculateWidth(t)) }, e.prototype.getSrc = function () { throw new w }, e.prototype._calculateHeight = function (t) { if (null == this.ratioWidthToHeight) throw new v("Field ratioWidthToHeight is not set!"); return t / this.ratioWidthToHeight }, e.prototype._calculateWidth = function (t) { if (null == this.ratioWidthToHeight) throw new v("Field ratioWidthToHeight is not set!"); return t * this.ratioWidthToHeight }, e.prototype.getSimplifiedObject = function (e) { A.isArray(e) || A.isString(e) || (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["imagePermissions"].concat(e)); return n.source = { id: this.source.id, width: this.source.width, height: this.source.height, isVector: this.source.isVector, pageIndex: this.source.pageIndex, url: this.source.url, actualSize: this.source.actualSize, saveAspectRatio: this.source.saveAspectRatio, origin: this.source.origin }, n.imagePermissions = this.imagePermissions.getSimplifiedObject(), n }, e.prototype.getOriginalImageSize = function () { return { width: We(this.source.width, this.source.dpiX || 72), height: We(this.source.height, this.source.dpiY || 72) } }, e.type = "ImageItem", _([sn({ factory: new qn("subfolder"), displayName: "Allowed subfolder" }), b("design:type", String)], e.prototype, "allowedSubfolder", void 0), _([sn({ factory: new Un(Array), displayName: "Allowed tabs", type: "collection" }), b("design:type", Array)], e.prototype, "allowedTabs", void 0), _([sn({ factory: new qn("Image"), displayName: "Display name" }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "displayName", null), _([sn({ enumObject: Lr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "effect", null), _([sn({ factory: new Wn(ln, { color: new ze({ c: 0, m: 0, y: 0, k: 0 }), opacity: 1, blendMode: on.Normal }), displayName: "Overlay effect" }), b("design:type", ln), b("design:paramtypes", [ln])], e.prototype, "overlayEffect", null), e }(Yn); !function (t) { var e = function () { function t(t) { A.extend(this, t) } return t.prototype.clone = function () { return new t(this) }, t.prototype.equals = function (t) { return null != t && je(this.id, t.id) && je(this.width, t.width) && je(this.height, t.height) && je(this.isVector, t.isVector) }, t }(); t.ImageMetaData = e; var n = function () { function t(t, e, n) { this.name = t, this.value = e, this.transformedRectangle = n } return t.prototype.clone = function () { return new t(this.name, this.value.clone(), this.transformedRectangle.clone()) }, t.prototype.equals = function (t) { return null != t && je(this.name, t.name) && je(this.value, t.value) && je(this.transformedRectangle, t.transformedRectangle) }, t }(); t.ImageItemValue = n; var r = t.ImageSourceType = function (t) { return t[t.None = 0] = "None", t[t.StorageId = 3] = "StorageId", t[t.Url = 4] = "Url", t }(t.ImageSourceType || {}), o = function () { function t(t, e, n, o, i, a) { void 0 === n && (n = 0), void 0 === o && (o = !1), void 0 === i && (i = !0), this._storageId = null, this._url = null, this._type = r.None, this._isVector = !1, this._pageIndex = 0, this._origin = null, this._actualSize = !1, this._saveAspectRatio = !0, this._dpiX = 72, this._dpiY = 72, this._propertyChanged = new M, this._storageId = t, null != t && (this._type = r.StorageId, this._origin = a), this._url = e, null != e && (this._type = r.Url, this._actualSize = o, this._saveAspectRatio = i) } return t.prototype.clone = function () { var e = new t; return e.id = this.id, e.url = this.url, e._type = this._type, e._width = this._width, e._height = this._height, e._isVector = this._isVector, e._pageIndex = this._pageIndex, e._origin = null != this._origin ? this._origin.clone() : null, e._actualSize = this._actualSize, e._saveAspectRatio = this._saveAspectRatio, e }, t.prototype.equals = function (t) { return je(this.id, t.id) && je(this.url, t.url) && je(this._type, t._type) && je(this._width, t._width) && je(this._height, t._height) && je(this._origin, t._origin) && je(this._saveAspectRatio, t._saveAspectRatio) && t._pageIndex === this._pageIndex && JSON.stringify(t._origin) === JSON.stringify(this._origin) && t._actualSize === this._actualSize && t._saveAspectRatio === this._saveAspectRatio }, Object.defineProperty(t.prototype, "id", { get: function () { return this._storageId }, set: function (t) { this._storageId !== t && (this._storageId = t, this._propertyChanged.notify(this, "id")) }, enumerable: !0, configurable: !0 }), t.prototype.setIdWithOrigin = function (t, e) { this.id = t, this._setOrigin(e) }, Object.defineProperty(t.prototype, "url", { get: function () { return this._url }, set: function (t) { this._url !== t && (this._url = t, this._propertyChanged.notify(this, "url")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "width", { get: function () { return this._width }, set: function (t) { this._width !== t && (this._width = t, this._propertyChanged.notify(this, "width")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "height", { get: function () { return this._height }, set: function (t) { this._height !== t && (this._height = t, this._propertyChanged.notify(this, "height")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isVector", { get: function () { return this._isVector }, set: function (t) { this._isVector !== t && (this._isVector = t, this._propertyChanged.notify(this, "isVector")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pageIndex", { get: function () { return this._pageIndex }, set: function (t) { t !== this._pageIndex && (this._pageIndex = t, this._propertyChanged.notify(this, "pageIndex")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "origin", { get: function () { return this._origin }, enumerable: !0, configurable: !0 }), t.prototype._setOrigin = function (t) { t !== this._origin && (this._origin = t, this._propertyChanged.notify(this, "origin")) }, Object.defineProperty(t.prototype, "type", { get: function () { return this._type }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "actualSize", { get: function () { return this._actualSize }, set: function (t) { this._actualSize = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "saveAspectRatio", { get: function () { return this._saveAspectRatio }, set: function (t) { this._saveAspectRatio = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "dpiX", { get: function () { return this._dpiX }, set: function (t) { t > 0 && (this._dpiX = t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "dpiY", { get: function () { return this._dpiY }, set: function (t) { t > 0 && (this._dpiY = t) }, enumerable: !0, configurable: !0 }), t.prototype.addPropertyChanged = function (t) { this._propertyChanged.add(t) }, t.prototype.removePropertyChanged = function (t) { this._propertyChanged.remove(t) }, t }(); t.ImageSource = o, function (t) { var e = function () { function t(t) { A.extend(this, t || {}), null != t && null != t.originalSize && (this.originalSize = new Nr(t.originalSize.width, t.originalSize.height)) } return t.prototype.equals = function (t) { return null == t && je(this.type, t.type) && je(this.data, t.data) && je(this.originalSize, t.originalSize) }, t.prototype.clone = function () { return new t(this) }, t }(); t.Origin = e }(o = t.ImageSource || (t.ImageSource = {})) }(Dr || (Dr = {})); var Vr = function () { function t(t) { if (this.storageId = null, this.size = new Nr, this.name = null, this.isUserImage = !1, this.isVector = !1, this.pageIndex = 0, "string" == typeof t) try { t = JSON.parse(t) } catch (e) { console.warn("Unable to parse ImageMetaData from string ", t, e), t = null } A.isObject(t) && A.extend(this, t) } return t.fromInterface = function (e, n) { var r = new t; return r.storageId = e.id, r.size = new Nr(e.width, e.height), r.name = void 0 !== n ? n : null, null != e.isVector && (r.isVector = e.isVector), r }, t.prototype.clone = function () { return new t(this) }, t.prototype.equals = function (t) { return this.storageId === t.storageId && je(this.size, t.size) && je(this.name, t.name) && je(this.isUserImage, t.isUserImage) && je(this.isVector, t.isVector) && je(this.pageIndex, t.pageIndex) }, t }(), qr = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Ur = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(qr(arguments[e])); return t }, Wr = function (t) { function e(e, n, r, o, i) { var a = t.call(this) || this; return a.id = e, a._name = n, a._mask = r, a._value = o, a._values = i, a } return m(e, t), Object.defineProperty(e.prototype, "mask", { get: function () { return this._mask }, set: function (t) { t != this._mask && (this._mask = t, this._propertyChanged.notify(this, "mask")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this._value }, set: function (t) { t != this._value && (this._value = t, this._propertyChanged.notify(this, "value")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "values", { get: function () { return this._values }, set: function (t) { t != this._values && (this._values = t, this._propertyChanged.notify(this, "values")) }, enumerable: !0, configurable: !0 }), e.prototype.generateNewIds = function () { this._generateNewId() }, e.prototype._copy = function (e, n, r) { return t.prototype._copy.call(this, e, n, !1), n.mask = e.mask, n.value = e.value, n.values = Ur(e.values), n }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this.mask, e.mask) && je(this.value, e.value) && ke(this.values, e.values) }, e.prototype.getSimplifiedObject = function () { return { id: this.id, mask: this.mask, value: this.value, values: this.values, name: this.name } }, e }(Ae), Gr = function () { return (Gr = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++)for (var o in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]); return t }).apply(this, arguments) }, Hr = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Jr = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(Hr(arguments[e])); return t }, Xr = function (t) { function e(n, r) { var o = t.call(this, n) || this; return o.type = e.type, o._onLayoutSettingsChanged = function (t) { o._propertyChanged.notify(o, t) }, o.layoutSettings = null != r ? r : new Zr, o } return m(e, t), e.prototype.getSimplifiedObject = function (e) { var n, r; void 0 === e && (e = []); var o = t.prototype.getSimplifiedObject.call(this, ["layoutSettings"].concat(e)); return o.layoutSettings = null === (n = this.layoutSettings) || void 0 === n ? void 0 : n.getSimplifiedObject(), o.sourceRectangle = null === (r = this.sourceRectangle) || void 0 === r ? void 0 : r.toJSON(), o }, e.prototype._copy = function (e, n, r, o) { var i; t.prototype._copy.call(this, e, n, r, o), r && this._copyItemsOrder(e, n), n.layoutSettings = e.layoutSettings.clone(), n.sourceRectangle = null === (i = e.sourceRectangle) || void 0 === i ? void 0 : i.clone() }, e.prototype._copyItemsOrder = function (t, e) { var n = t.getItemsOrder(); if (n) { var r = n.map((function (n) { var r = t.items.indexOf((function (t) { return t.id == n })); return e.items.get(r).id })); e.setItemsOrder(r) } }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, Object.defineProperty(e.prototype, "layoutSettings", { get: function () { return this._layoutSettings }, set: function (t) { if (null == t) throw new Error("LayoutSettings can't be null"); null != this._layoutSettings && this._layoutSettings.propertyChanged.remove(this._onLayoutSettingsChanged), this._layoutSettings = t, this._layoutSettings.propertyChanged.add(this._onLayoutSettingsChanged), this._onLayoutSettingsChanged("layoutSettings") }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourceRectangle", { get: function () { return this._sourceRectangle }, set: function (t) { if (null != this._sourceRectangle && null == t) throw new Error("LayoutItem.sourceRectangle can't be null"); null != t && t.equals(this._sourceRectangle) || (this._unsubscribeSourceRectangle(), this._sourceRectangle = t, this._subscribeSourceRectangle(), this._propertyChanged.notify(this, "sourceRectangle")) }, enumerable: !0, configurable: !0 }), e.prototype._subscribeSourceRectangle = function () { this._sourceRectangle }, e.prototype._unsubscribeSourceRectangle = function () { this._sourceRectangle }, e.prototype.addItems = function (n, r, o) { var i = this.getItemsOrder(); if (i) { if (!Number.isInteger(o)) throw new Error("orderIndex must not be null"); i = e._insertToOrder(i, n.map((function (t) { return t.id })), o), this.setItemsOrder(i) } t.prototype.addItems.call(this, n, r) }, e.prototype.removeItems = function (e) { var n = this.getItemsOrder(); n && (e.forEach((function (t) { return n = n.filter((function (e) { return e !== t.id })) })), this.setItemsOrder(n)), t.prototype.removeItems.call(this, e) }, e.prototype.addItem = function (n, r, o) { var i = this.getItemsOrder(); null != i && (i = e._insertToOrder(i, [n.id], o), this.setItemsOrder(i)), t.prototype.addItem.call(this, n, r) }, e._insertToOrder = function (t, e, n) { var r = t.slice(0, n), o = t.slice(n); return t = r.concat(e, o) }, e.prototype.setItemsOrder = function (t) { this.tags[e._layoutItemsOrderTagKey] = t }, e.prototype.getItemsOrder = function () { var t = this.tags[e._layoutItemsOrderTagKey]; return null == t ? null : t instanceof Array ? t : null }, e.prototype.getSortedItems = function () { var t = this.getItemsOrder(), e = this.getNestedItems(!0); return null != t && null != e ? t.map((function (t) { return e.find((function (e) { return e.id === t })) })) : null }, e.prototype.getItemOrderIndex = function (t) { if (this.items.indexOf(t) < 0) return -1; var e = this.getItemsOrder(); return null == e ? void 0 : e.indexOf(t.id) }, e.generateAutoLayoutSettings = function (t, e, n, r, o) { var i = new to, a = t.map((function (t) { return t.left })), s = t.map((function (t) { return t.right })), l = t.map((function (t) { return t.top })), u = t.map((function (t) { return t.bottom })), c = t.map((function (t) { return t.center.x })), p = t.map((function (t) { return t.center.y })); null == n && (n = Math.max.apply(Math, Jr(c)) - Math.min.apply(Math, Jr(c)) > Math.max.apply(Math, Jr(p)) - Math.min.apply(Math, Jr(p)) ? $r.horizontal : $r.vertical); if (i.orientation = n, null == e) switch (i.orientation) { case $r.horizontal: e = ve(Math.max.apply(Math, Jr(l)), Math.min.apply(Math, Jr(l)), 5) ? Yr.start : ve(Math.max.apply(Math, Jr(p)), Math.min.apply(Math, Jr(p)), 5) ? Yr.center : ve(Math.max.apply(Math, Jr(u)), Math.min.apply(Math, Jr(u)), 5) ? Yr.end : Yr.none; break; case $r.vertical: e = ve(Math.max.apply(Math, Jr(a)), Math.min.apply(Math, Jr(a)), 5) ? Yr.start : ve(Math.max.apply(Math, Jr(c)), Math.min.apply(Math, Jr(c)), 5) ? Yr.center : ve(Math.max.apply(Math, Jr(s)), Math.min.apply(Math, Jr(s)), 5) ? Yr.end : Yr.none }i.alignItems = e; for (var h = i.orientation === $r.horizontal ? t.sort((function (t, e) { return t.left - e.left })) : t.sort((function (t, e) { return t.top - e.top })), f = [], d = 1; d < h.length; d++) { var y = h[d - 1], g = h[d]; f.push(i.orientation === $r.horizontal ? g.left - y.right : g.top - y.bottom) } return null == r && (r = Math.max(0, Math.min.apply(Math, Jr(f.map(Math.round))))), i.margin = r, null == o && (o = ve(Math.max.apply(Math, Jr(f)), Math.min.apply(Math, Jr(f)), 2) ? Kr.stretch : Kr.spaceBetween), i.justifyContent = o, i }, e.prototype.isChildVisible = function (t) { return !(t instanceof sr) || !t.isEmpty() }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this.sourceRectangle, e.sourceRectangle), o = je(this.layoutSettings, e.layoutSettings); return n && r && o }, e._layoutItemsOrderTagKey = "$layoutItemsOrder", e.type = "LayoutItem", e }(Cr), Yr = function (t) { return t[t.none = 0] = "none", t[t.center = 1] = "center", t[t.start = 2] = "start", t[t.end = 3] = "end", t }({}), $r = function (t) { return t[t.vertical = 0] = "vertical", t[t.horizontal = 1] = "horizontal", t }({}), Kr = function (t) { return t[t.stretch = 0] = "stretch", t[t.spaceBetween = 1] = "spaceBetween", t }({}), Qr = function (t) { return t[t.start = 0] = "start", t[t.center = 1] = "center", t[t.end = 2] = "end", t }({}), Zr = function () { function t() { this.type = t.type, this.propertyChanged = new T } return t.prototype.clone = function () { return new t }, t.prototype.getSimplifiedObject = function () { var e = {}; return e.type = t.type, e }, t.prototype.equals = function (t) { return je(this.type, t.type) }, t.type = "DefaultLayoutSettings", t }(), to = function (t) { function e() { var n = null !== t && t.apply(this, arguments) || this; return n.type = e.type, n._margin = 0, n._orientation = $r.vertical, n._alignItems = Yr.none, n._anchorPoint = Qr.start, n._justifyContent = Kr.stretch, n } return m(e, t), Object.defineProperty(e.prototype, "margin", { get: function () { return this._margin }, set: function (t) { if (null == t) throw new Error("Margin can't be null"); t !== this.margin && (this._margin = t, this.propertyChanged.notify("margin")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "orientation", { get: function () { return this._orientation }, set: function (t) { if (null == t) throw Error("Orientation can't be null"); t !== this.orientation && (this._orientation = t, this.propertyChanged.notify("orientation")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alignItems", { get: function () { return this._alignItems }, set: function (t) { if (null == t) throw new Error("alignItems can't be null"); t !== this.alignItems && (this._alignItems = t, this.propertyChanged.notify("alignItems")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "justifyContent", { get: function () { return this._justifyContent }, set: function (t) { if (null == t) throw new Error("JustifyContent can't be null"); t !== this.justifyContent && (this._justifyContent = t, this.propertyChanged.notify("justifyContent")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "anchorPoint", { get: function () { return this._anchorPoint }, set: function (t) { if (null == t) throw new Error("anchorPoint can't be null"); t !== this._anchorPoint && (this._anchorPoint = t, this.propertyChanged.notify("anchorPoint")) }, enumerable: !0, configurable: !0 }), e.prototype.clone = function () { var t = new e; return t.orientation = this.orientation, t.alignItems = this.alignItems, t.justifyContent = this.justifyContent, t.margin = this.margin, t.anchorPoint = this.anchorPoint, t }, e.prototype.getSimplifiedObject = function () { var n = t.prototype.getSimplifiedObject.call(this); return n.type = e.type, n.orientation = this.orientation, n.alignItems = this.alignItems, n.justifyContent = this.justifyContent, n.margin = this.margin, n.anchorPoint = this.anchorPoint, n }, e.prototype.equals = function (e) { var n = t.prototype.equals.call(this, e), r = je(this.orientation, e.orientation), o = je(this.alignItems, e.alignItems), i = je(this.margin, e.margin), a = je(this.anchorPoint, e.anchorPoint); return n && r && o && i && a }, e.type = "AutoLayoutSettings", _([sn({ ignore: !0 }), b("design:type", Object)], e.prototype, "type", void 0), _([sn({ enumObject: Gr({}, $r) }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "orientation", null), _([sn({ enumObject: Yr }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "alignItems", null), _([sn({ enumObject: Kr }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "justifyContent", null), _([sn({ enumObject: Qr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "anchorPoint", null), e }(Zr), eo = function () { function t(t) { this.propertyChanged = new T, null == t && (t = !0), this.allowChangeColumnCount = t } return Object.defineProperty(t.prototype, "allowChangeColumnCount", { get: function () { return this._allowChangeColumnCount }, set: function (t) { this._allowChangeColumnCount !== t && (this._allowChangeColumnCount = t, this.propertyChanged.notify("allowChangeColumnCount")) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowChangeColumnCount = this.allowChangeColumnCount, t }, t.prototype.clone = function () { var e = new t; return e.allowChangeColumnCount = this.allowChangeColumnCount, e }, t.prototype.equals = function (t) { return this.allowChangeColumnCount === t.allowChangeColumnCount }, t }(), no = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a._boundingPaths = [], a._wrappingMargin = 7, a._wrappingPath = null, a._paragraphSettings = new gr, a._characterLimit = null, a._isVertical = !1, a._firstBaselineOffset = or.Ascent, a._firstBaselineMinOffset = 0, a.type = e.type, null != r && (a.boundingPaths = r), a._pathBoundedTextPermissions = new eo, a._pathBoundedTextPermissions.propertyChanged.add(a._onPermissionsChanged), a } return m(e, t), Object.defineProperty(e.prototype, "characterLimit", { get: function () { return this._characterLimit }, set: function (t) { null === this._characterLimit && null === t || ve(this._characterLimit, t) || (this._characterLimit = t, this._propertyChanged.notify(this, "characterLimit")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "boundingPaths", { get: function () { return this._boundingPaths }, set: function (t) { t.length === this.boundingPaths.length && this.boundingPaths.every((function (e, n) { return e.isEqual(t[n]) })) || (this._boundingPaths = t, this._propertyChanged.notify(this, "boundingPaths")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wrappingPath", { get: function () { return this._wrappingPath }, set: function (t) { null == this._wrappingPath && null == t || null != this._wrappingPath && this._wrappingPath.isEqual(t) || (this._wrappingPath = t, this._propertyChanged.notify(this, "wrappingPath")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wrappingMargin", { get: function () { return this._wrappingMargin }, set: function (t) { ve(this._wrappingMargin, t) || (this._wrappingMargin = t, this._propertyChanged.notify(this, "wrappingMargin")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paragraphSettings", { get: function () { return this._paragraphSettings }, set: function (t) { gr.equals(this._paragraphSettings, t) || (this._paragraphSettings = t, this._propertyChanged.notify(this, "paragraphSettings")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isVertical", { get: function () { return this._isVertical }, set: function (t) { this._isVertical !== t && (this._isVertical = t, this._propertyChanged.notify(this, "isVertical")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pathBoundedTextPermissions", { get: function () { return this._pathBoundedTextPermissions }, set: function (t) { if (null == t) throw new C("pathBoundedTextPermissions cannot be null"); je(this._pathBoundedTextPermissions, t) || (this._pathBoundedTextPermissions.propertyChanged.remove(this._onPermissionsChanged), this._pathBoundedTextPermissions = t, this._pathBoundedTextPermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "firstBaselineOffset", { get: function () { return this._firstBaselineOffset }, set: function (t) { this._firstBaselineOffset !== t && (this._firstBaselineOffset = t, null != t && this._propertyChanged.notify(this, "firstBaselineOffset")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "firstBaselineMinOffset", { get: function () { return this._firstBaselineMinOffset }, set: function (t) { ve(this._firstBaselineMinOffset, t) || (this._firstBaselineMinOffset = t, null != t && this._propertyChanged.notify(this, "firstBaselineMinOffset")) }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function (e) { var n = t.prototype.getSimplifiedObject.call(this, ["pathBoundedTextPermissions"].concat(e)); return n.pathBoundedTextPermissions = this.pathBoundedTextPermissions.getSimplifiedObject(), n }, e.prototype._copy = function (n, r, o, i) { t.prototype._copy.call(this, n, r, o, i), "AutoScaledTextItem" != r.type && "BoundedTextItem" != r.type && "PathBoundedTextItem" != r.type && "PlainTextItem" != r.type || (r.isVertical = n.isVertical), "PathBoundedTextItem" != r.type && "BoundedTextItem" != r.type || (r.characterLimit = n.characterLimit, r.wrappingMargin = n.wrappingMargin, r.paragraphSettings = n.paragraphSettings.clone(), r.wrappingPath = null != n.wrappingPath ? n.wrappingPath.clone() : null, r.firstBaselineOffset = n.firstBaselineOffset, r.firstBaselineMinOffset = n.firstBaselineMinOffset), r instanceof e && (r.boundingPaths = n.boundingPaths.map((function (t) { return t.clone() })), r.pathBoundedTextPermissions = n.pathBoundedTextPermissions.clone()) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._characterLimit, e._characterLimit) && ke(this._boundingPaths, e._boundingPaths) && je(this._wrappingMargin, e._wrappingMargin) && je(this._paragraphSettings, e._paragraphSettings) && je(this._isVertical, e._isVertical) && je(this._pathBoundedTextPermissions, e._pathBoundedTextPermissions) && je(this._wrappingPath, e._wrappingPath) && je(this.firstBaselineOffset, e.firstBaselineOffset) && je(this.firstBaselineMinOffset, e.firstBaselineMinOffset) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "PathBoundedTextItem", _([sn({ enumObject: or }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "firstBaselineOffset", null), e }(sr), ro = function () { function t() { this._allowEditContent = !0, this.showSelectButtonConstraint = null, this._showSelectButton = !0, this.propertyChanged = new T } return Object.defineProperty(t.prototype, "allowEditContent", { get: function () { return this._allowEditContent }, set: function (t) { this._allowEditContent !== t && (this._allowEditContent = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "showSelectButton", { get: function () { return null != this.showSelectButtonConstraint ? this.showSelectButtonConstraint : this._showSelectButton }, set: function (t) { this._showSelectButton !== t && (this._showSelectButton = t, this.propertyChanged.notify()) }, enumerable: !0, configurable: !0 }), t.prototype.getSimplifiedObject = function () { var t = {}; return t.allowEditContent = this.allowEditContent, t.showSelectButton = this.showSelectButton, t.showHandleButton = this.showHandleButton, t.showSelectButtonConstraint = this.showSelectButtonConstraint, t }, t.prototype.clone = function () { var e = new t; return e.allowEditContent = this._allowEditContent, e.showSelectButton = this._allowEditContent, e.showSelectButtonConstraint = this.showSelectButtonConstraint, e.showHandleButton = this.showHandleButton, e }, t.prototype.equals = function (t) { return this.allowEditContent === t.allowEditContent && this.showSelectButton === t.showSelectButton && this.showSelectButtonConstraint === t.showSelectButtonConstraint && this.showHandleButton === t.showHandleButton }, _([sn({ ignore: !0 }), b("design:type", Boolean)], t.prototype, "showSelectButtonConstraint", void 0), _([En(), b("design:type", Boolean)], t.prototype, "showHandleButton", void 0), t }(), oo = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, io = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(oo(arguments[e])); return t }, ao = function (t) { return t[t.None = 0] = "None", t[t.Center = 1] = "Center", t[t.Top = 2] = "Top", t[t.Bottom = 3] = "Bottom", t }({}), so = function (t) { return t[t.None = 0] = "None", t[t.Center = 1] = "Center", t[t.Right = 2] = "Right", t[t.Left = 3] = "Left", t }({}), lo = function (t) { return t[t.Fit = 0] = "Fit", t[t.Fill = 1] = "Fill", t[t.Original = 2] = "Original", t }({}), uo = function (t) { function e(n) { var r = t.call(this, null != n ? Pe.rectangle(n.left, n.top, n.width, n.height) : null) || this; return r._isStubContent = !1, r._isCoverMode = !1, r._contentResizeMode = lo.Fill, r._contentEffect = Lr.None, r._contentFillColor = null, r._contentOverlayEffect = null, r.stubStorageMeta = null, r.linkId = null, r.allowedSubfolder = null, r.allowedTabs = null, r.contentVerticalAlignment = ao.None, r.contentHorizontalAlignment = so.None, r.type = e.type, r._content = null, r._topFrames = [], r._bottomFrames = [], r._onContentOverlayEffectPropertyChanged = function (t, e) { r._propertyChanged.notify(r, "contentOverlayEffect") }, r.fixedStubContentSize = !1, r.sourceRectangle = null != n ? n : new ge(0, 0, 10, 10), r.fillColor = new Le("rgba(0, 0, 0, 0)"), r.borderWidth = 0, r.placeholderPermissions = new ro, r._contentPermissions = new Er, r._contentPermissions.propertyChanged.add(r._onPermissionsChanged), r._setViolationSettings(new Fr, !0), r._ignorePermissionsChange = !0, r.manipulationPermissions.resizeGrips = new In(!0, !0, !1), r.shapePermissions.allowChangeFillColor = !1, r.itemPermissions.allowRemoveOnLayoutChange = !0, r.itemPermissions.itemToolbarPermissions.showEditButton = !0, r.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint = null, r.itemPermissions.itemToolbarPermissions.showSelectButton = !0, r.contentPermissions.imagePermissions.allowKeepOverlayColor = !1, r._ignorePermissionsChange = !1, r } return m(e, t), Object.defineProperty(e.prototype, "contentEffect", { get: function () { return this._contentEffect }, set: function (t) { this._contentEffect !== t && (this._contentEffect = t, this._propertyChanged.notify(this, "contentEffect")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contentFillColor", { get: function () { return this._contentFillColor }, set: function (t) { this._contentFillColor !== t && (this._contentFillColor = t, this._propertyChanged.notify(this, "contentFillColor")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isStubContent", { get: function () { return this._isStubContent }, set: function (t) { this._isStubContent !== t && (this._isStubContent = t, this._setStubStorageMeta(), this.applyPermissionsConstrain(), this._propertyChanged.notify(this, "isStubContent")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contentResizeMode", { get: function () { return this.isCoverMode ? lo.Fill : this.isBarcodePlaceholder ? lo.Fit : this._contentResizeMode }, set: function (t) { this._contentResizeMode !== t && (this._contentResizeMode = t, this._propertyChanged.notify(this, "contentResizeMode")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contentOverlayEffect", { get: function () { return this._contentOverlayEffect }, set: function (t) { ln.equals(this.contentOverlayEffect, t) || (this._unsubscribeContentOverlayEffectPropertyChanged(), this._contentOverlayEffect = t, this._subscribeContentOverlayEffectPropertyChanged(), this._propertyChanged.notify(this, "contentOverlayEffect")) }, enumerable: !0, configurable: !0 }), e.prototype._subscribeContentOverlayEffectPropertyChanged = function () { null != this.contentOverlayEffect && this.contentOverlayEffect.addPropertyChanged(this._onContentOverlayEffectPropertyChanged) }, e.prototype._unsubscribeContentOverlayEffectPropertyChanged = function () { null != this.contentOverlayEffect && this.contentOverlayEffect.removePropertyChanged(this._onContentOverlayEffectPropertyChanged) }, Object.defineProperty(e.prototype, "isCoverMode", { get: function () { return null == this.barcodeFormat && this._isCoverMode }, set: function (t) { this._isCoverMode !== t && (this._isCoverMode = t, this.isEmptyContent || this.content.applyPermissionsConstrain(), this._propertyChanged.notify(this, "isCoverMode")) }, enumerable: !0, configurable: !0 }), e.prototype.getImagePermissions = function () { return null != this.contentPermissions ? this.contentPermissions.imagePermissions : this.content instanceof Dr ? this.content.imagePermissions : null }, e.prototype.applyPermissionsConstrain = function () { var t = this.itemPermissions.itemToolbarPermissions, e = this.getImagePermissions(), n = null == e || e.allowChangeImage, r = null != e && e.allowEditImage, o = null != this.content && this.content instanceof Dr && null != this.content.source && this.content.source.isVector; this.isStubOrEmpty || !r || o ? t.showEditButtonConstraint = !1 : t.showEditButtonConstraint = null, t.showSelectButtonConstraint = !(!n || this.isStubOrEmpty) && null, null != this.placeholderPermissions && (this.placeholderPermissions.showSelectButtonConstraint = !!n && null), null != this.contentPermissions && null != this.contentPermissions.imagePermissions && (null != this.barcodeFormat ? this.contentPermissions.imagePermissions.allowEditImageConstraint = !1 : this.contentPermissions.imagePermissions.allowEditImageConstraint = null), this.isBarcodePlaceholder && (null != this.manipulationPermissions && (this.manipulationPermissions.resizeGrips.edge = !1, this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1)), null != this.itemPermissions && null != t && (t.showSelectButton = !1, t.showEditButtonConstraint = null), null != this.placeholderPermissions && (this.placeholderPermissions.allowEditContent = !1, this.placeholderPermissions.showHandleButton = !1), null != this.contentPermissions && null != this.contentPermissions.barcodePermissions && (this.contentPermissions.barcodePermissions.allowChangeBarcodeContent ? this.placeholderPermissions.showSelectButtonConstraint = null : (this.placeholderPermissions.showSelectButtonConstraint = !1, t.showEditButtonConstraint = this.contentPermissions.barcodePermissions.allowChangeBarcodeContent))) }, Object.defineProperty(e.prototype, "contentPermissions", { get: function () { return this._contentPermissions }, set: function (t) { if (null == t) throw new C("ContentPermissions cannot be null"); je(this._contentPermissions, t) || (this._contentPermissions.propertyChanged.remove(this._onPermissionsChanged), this._contentPermissions = t, this._contentPermissions.propertyChanged.add(this._onPermissionsChanged), this._onPermissionsChanged()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "placeholderPermissions", { get: function () { return this._placeholderPermissions }, set: function (t) { if (null == t) throw new C("placeholderPermissions cannot be null"); je(this._placeholderPermissions, t) || (null != this._placeholderPermissions && this._placeholderPermissions.propertyChanged.remove(this._onPermissionsChanged), this._placeholderPermissions = t, this.applyPermissionsConstrain(), this._placeholderPermissions.propertyChanged.add(this._onPermissionsChanged), this._propertyChanged.notify(this, "placeholderPermissions")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "violationSettings", { get: function () { return this._violationSettings }, set: function (t) { this._setViolationSettings(t) }, enumerable: !0, configurable: !0 }), e.prototype._setViolationSettings = function (e, n) { if (void 0 === n && (n = !1), !(n || e instanceof Fr)) throw new C("Shape ViolationSettings property must has ImageViolationSettings type!"); t.prototype._setViolationSettings.call(this, e, n) }, Object.defineProperty(e.prototype, "isFrame", { get: function () { return null != this._topFrames && this._topFrames.length > 0 || null != this._bottomFrames && this._bottomFrames.length > 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "content", { get: function () { return this._content }, set: function (t) { this._content = t, this.isEmptyContent || (this._content.parentPlaceholder = this, this._content.parentContainer = null, this._content.applyPermissionsConstrain()), this.applyPermissionsConstrain(), this._setStubStorageMeta(), this._propertyChanged.notify(this, "content") }, enumerable: !0, configurable: !0 }), e.prototype._setStubStorageMeta = function () { this.isStubContent && this._content instanceof Dr ? this.stubStorageMeta = new Vr({ isUserImage: this._content.isUserImage, isVector: this._content.source.isVector, name: "Stub content", size: { width: this._content.source.width, height: this._content.source.height }, storageId: this._content.source.id, origin: this._content.source.origin }) : this.stubStorageMeta = null }, Object.defineProperty(e.prototype, "topFrames", { get: function () { return this._topFrames }, set: function (t) { var e = this; if (null == t) throw new C; this._topFrames = t, this._topFrames.forEach((function (t) { t.parentPlaceholder = e, t.parentContainer = null })) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottomFrames", { get: function () { return this._bottomFrames }, set: function (t) { var e = this; if (null == t) throw new C; this._bottomFrames = t, this._bottomFrames.forEach((function (t) { t.parentPlaceholder = e, t.parentContainer = null })) }, enumerable: !0, configurable: !0 }), e.prototype.updateContentAndFrames = function (t) { null != this.content && t(this.content), null != this.topFrames && this.topFrames.forEach((function (e) { t(e) })), null != this.bottomFrames && this.bottomFrames.forEach((function (e) { t(e) })) }, Object.defineProperty(e.prototype, "imageContent", { get: function () { if (null != this._content && !(this._content instanceof Dr)) throw new v("Not image content!"); return this._content }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isEmptyContent", { get: function () { return null == this._content }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isStubOrEmpty", { get: function () { return this.isStubContent || this.isEmptyContent }, enumerable: !0, configurable: !0 }), e.prototype._canSetIsVariable = function () { return !0 }, Object.defineProperty(e.prototype, "isBarcodePlaceholder", { get: function () { return null != this.barcodeFormat }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function () { var e = t.prototype.getSimplifiedObject.call(this, ["_content", "imageContent", "placeholderPermissions", "contentPermissions", "isFrame", "isEmptyContent", "isStubOrEmpty", "isBarcodePlaceholder"]); return e.content = null != this.content ? this.content.getSimplifiedObject() : null, e.placeholderPermissions = this.placeholderPermissions.getSimplifiedObject(), e.contentPermissions = this.contentPermissions.getSimplifiedObject(), e }, e.prototype._copy = function (e, n, r, o) { if (t.prototype._copy.call(this, e, n, r, o), n.linkId = e.linkId, n.allowedSubfolder = e.allowedSubfolder, n.allowedTabs = null != e.allowedTabs ? e.allowedTabs.map((function (t) { return t })) : null, n.contentVerticalAlignment = e.contentVerticalAlignment, n.contentHorizontalAlignment = e.contentHorizontalAlignment, n.placeholderPermissions = e.placeholderPermissions.clone(), null != e.content ? (null == n.content ? n.content = e.content.clone(r, o) : n.content.update(e.content), n.content.parentPlaceholder = n) : n.content = null, e.topFrames.length === n.topFrames.length) for (var i = 0; i < e.topFrames.length; i++)n.topFrames[i].update(e.topFrames[i]), n.topFrames[i].parentPlaceholder = n; else n.topFrames = e.topFrames.map((function (t) { var e = t.clone(r, o); return e.parentPlaceholder = n, e })); if (e.bottomFrames.length === n.bottomFrames.length) for (i = 0; i < e.bottomFrames.length; i++)n.bottomFrames[i].update(e.bottomFrames[i]), n.bottomFrames[i].parentPlaceholder = n; else n.bottomFrames = e.bottomFrames.map((function (t) { var e = t.clone(r, o); return e.parentPlaceholder = n, e })); n.stubStorageMeta = null != e.stubStorageMeta ? e.stubStorageMeta.clone() : null, n.isStubContent = e.isStubContent, n.isCoverMode = e.isCoverMode, n.contentResizeMode = e.contentResizeMode, n.contentEffect = e.contentEffect, n.contentFillColor = null != e._contentFillColor ? e._contentFillColor.clone() : null, n.contentOverlayEffect = null != e.contentOverlayEffect ? e.contentOverlayEffect.clone() : null, n.barcodeFormat = e.barcodeFormat, n.contentPermissions = e.contentPermissions.clone(), n.isVariable = e.isVariable }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && ke(io([this._content], this._topFrames, this._bottomFrames), io([e._content], e._topFrames, e._bottomFrames)) && je(this.linkId, e.linkId) && je(this.allowedSubfolder, e.allowedSubfolder) && ke(this.allowedTabs, e.allowedTabs) && je(this.contentVerticalAlignment, e.contentVerticalAlignment) && je(this.contentHorizontalAlignment, e.contentHorizontalAlignment) && je(this._placeholderPermissions, e._placeholderPermissions) && je(this.stubStorageMeta, e.stubStorageMeta) && je(this._isStubContent, e._isStubContent) && je(this._isCoverMode, e._isCoverMode) && je(this._contentResizeMode, e._contentResizeMode) && je(this._contentEffect, e._contentEffect) && je(this.barcodeFormat, e.barcodeFormat) && je(this._contentPermissions, e._contentPermissions) && je(this.isVariable, e.isVariable) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "PlaceholderItem", _([sn({ factory: new Wn(Vr), displayName: "Stub storage meta" }), b("design:type", Vr)], e.prototype, "stubStorageMeta", void 0), _([sn({ factory: new qn("subfolder"), displayName: "Allowed subfolder" }), b("design:type", String)], e.prototype, "allowedSubfolder", void 0), _([sn({ factory: new Un(Array), displayName: "Allowed tabs", type: "collection" }), b("design:type", Array)], e.prototype, "allowedTabs", void 0), _([sn({ enumObject: ao }), b("design:type", Object)], e.prototype, "contentVerticalAlignment", void 0), _([sn({ enumObject: so }), b("design:type", Object)], e.prototype, "contentHorizontalAlignment", void 0), _([sn({ enumObject: Lr }), b("design:type", Number), b("design:paramtypes", [Number])], e.prototype, "contentEffect", null), _([sn({ factory: new Gn, displayName: "Content fill color" }), b("design:type", Re), b("design:paramtypes", [Re])], e.prototype, "contentFillColor", null), _([sn({ enumObject: lo }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "contentResizeMode", null), _([sn({ enumObject: lr, factory: new qn(lr.QR_CODE), displayName: "Barcode format" }), b("design:type", String)], e.prototype, "barcodeFormat", void 0), _([sn({ factory: new Wn(ln, { color: new ze({ c: 0, m: 0, y: 0, k: 0 }), opacity: 1, blendMode: on.Normal }), displayName: "Content overlay effect" }), b("design:type", Object), b("design:paramtypes", [Object])], e.prototype, "contentOverlayEffect", null), e }(Jn), co = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a._baselineLocation = new de, a._isVertical = !1, a.type = e.type, null != r && (a.baselineLocation = r), a._ignorePermissionsChange = !0, a.manipulationPermissions.resizeGrips.setCornerArbitrary(!1), a.manipulationPermissions.resizeGrips.edge = !1, a._ignorePermissionsChange = !1, a } return m(e, t), Object.defineProperty(e.prototype, "isVertical", { get: function () { return this._isVertical }, set: function (t) { this._isVertical !== t && (this._isVertical = t, this._propertyChanged.notify(this, "isVertical")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "baselineLocation", { get: function () { return this._baselineLocation }, set: function (t) { de.isEqual(this._baselineLocation, t) || (this._baselineLocation = t, this._propertyChanged.notify(this, "baselineLocation")) }, enumerable: !0, configurable: !0 }), e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), null != this.manipulationPermissions && null != this.manipulationPermissions.resizeGrips && (this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1), this.manipulationPermissions.resizeGrips.edgeConstraint = !1) }, e.prototype.getSimplifiedObject = function (e) { void 0 === e && (e = []); var n = t.prototype.getSimplifiedObject.call(this, ["_placeholders", "currentTextImage", "sourcePath", "sourceRectangle"].concat(e)); return n.placeholders = this.placeholders.toArray(), n }, e.prototype._copy = function (n, r, o, i) { return t.prototype._copy.call(this, n, r, o, i), "AutoScaledTextItem" != r.type && "BoundedTextItem" != r.type && "PathBoundedTextItem" != r.type && "PlainTextItem" != r.type || (r.isVertical = n.isVertical), r instanceof e && (r.baselineLocation = n.baselineLocation), r }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._isVertical, e._isVertical) && je(this._baselineLocation, e._baselineLocation) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "PlainTextItem", e }(sr), po = function (t) { function e(n) { var r = t.call(this) || this; if (r._width = 20, r._color = new Le("rgba(255,255,61,1)"), r._points = [], r.type = e.type, r._points = [], n && n.length && n.length > 0) for (var o = 0; o < n.length; o++)n[o] instanceof de && r._points.push(n[o]); return r.textWrappingMode = Rn.None, r } return m(e, t), Object.defineProperty(e.prototype, "width", { get: function () { return this._width }, set: function (t) { ve(this._width, t) || (this._width = t, this._propertyChanged.notify(this, "width")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "color", { get: function () { return this._color }, set: function (t) { Re.equals(this._color, t) || (this._color = t, this._propertyChanged.notify(this, "color")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "sourcePoints", { get: function () { return this._points }, set: function (t) { this._points = t, this._propertyChanged.notify(this, "sourcePoints") }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (e, n, r, o) { t.prototype._copy.call(this, e, n, r, o), n.width = e.width, n.color = e.color.clone(), n.sourcePoints = e.sourcePoints.map((function (t) { return t.clone() })) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._width, e._width) && je(this._color, e._color) && ke(this._points, e._points) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "PolylineItem", e }(Fn), ho = function (t) { function e(n, r, o, i) { var a = t.call(this, n, o, i) || this; return a.type = e.type, a._center = r, a._ignorePermissionsChange = !0, a.manipulationPermissions.resizeGrips.setCornerArbitrary(!1), a.manipulationPermissions.resizeGrips.edge = !1, a.textPermissions.allowChangeTextAlignment = !1, a.textPermissions.allowChangeLeading = !1, a._ignorePermissionsChange = !1, a } return m(e, t), e.prototype.applyPermissionsConstrain = function () { t.prototype.applyPermissionsConstrain.call(this), null != this.manipulationPermissions && null != this.manipulationPermissions.resizeGrips && (this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1), this.manipulationPermissions.resizeGrips.edgeConstraint = !1), null != this.textPermissions && (this.textPermissions.allowChangeLeading = !1, this.textPermissions.allowChangeTextAlignment = !1) }, Object.defineProperty(e.prototype, "center", { get: function () { return this._center }, set: function (t) { de.isEqual(this._center, t) || (this._center = t, this._propertyChanged.notify(this, "center")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bend", { get: function () { return this._bend }, set: function (t) { ve(this._bend, t) || (this._bend = t, this._propertyChanged.notify(this, "bend")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "warp", { get: function () { return this._warp }, set: function (t) { this._warp !== t && (this._warp = t, this._propertyChanged.notify(this, "warp")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "maxLineCount", { get: function () { return 1 }, set: function (t) { throw console.error("ArchedText set maxLineCount", t), new x("Max Line Count of ArchedTextItem can not be redefined!") }, enumerable: !0, configurable: !0 }), e.prototype.getSimplifiedObject = function (e) { return t.prototype.getSimplifiedObject.call(this, ["maxLineCount"].concat(e)) }, e.prototype._copy = function (n, r, o, i) { t.prototype._copy.call(this, n, r, o, i), r instanceof e && (r.center = n.center, r.bend = n.bend, r.warp = n.warp) }, e.prototype.equals = function (e) { return t.prototype.equals.call(this, e) && je(this._center, e._center) && je(this._bend, e._bend) && je(this._warp, e._warp) }, e.prototype.clone = function (t, n) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = new e; return this._copy(this, r, t, n), r }, e.type = "ArchedTextItem", e }(sr), fo = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, yo = function (t) { function e(e, n, r, o, i, a, s) { void 0 === o && (o = []); var l = t.call(this, i, a) || this; if (l._rotateAngle = 0, l._mockup = new Cn, l._printAreas = new rn, l._previewMockups = new rn, l._printAreasCollectionChangedEvent = new M, l._printAreaAddedEvent = new M, l._printAreaRemovedEvent = new M, l._onContainersItemAdded = function (t) { t.item.parentComponent = l }, l._onContainersItemRemoved = function (t) { t.item.parentComponent = null }, l.watermark = null, l._containers = new rn, l._onPrintAreaAdded = function (t) { var e = t.item; e.parentSurface = l, l._printAreaAddedEvent.notify(l, e) }, l._onPrintAreaRemoved = function (t) { var e = t.item; e.parentSurface = null, l._printAreaRemovedEvent.notify(l, e) }, l.width = null != e ? e : 100, l.height = null != n ? n : 100, l.parentProduct = null, l.mockup = null != r ? r : new Cn, l.printAreas.add_itemAdded(l._onPrintAreaAdded), l.printAreas.add_itemRemoved(l._onPrintAreaRemoved), l.printAreas.setRange(o), l._containers.add_itemAdded(l._onContainersItemAdded), l._containers.add_itemRemoved(l._onContainersItemRemoved), s) { var u = new dn; u.name = cn.BG_CONTAINER_NAME, l.containers.push(u); var c = new dn; c.name = cn.MAIN_CONTAINER_NAME, l.containers.push(c); var p = new dn; p.name = cn.FG_CONTAINER_NAME, l.containers.push(p) } return l } return m(e, t), Object.defineProperty(e.prototype, "rotateAngle", { get: function () { return this._rotateAngle }, set: function (t) { var e, n = (e = t, (e %= 360) < 0 && (e += 360), e); n !== this._rotateAngle && (this._rotateAngle = n, this._propertyChanged.notify(this, "rotateAngle")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this._width }, set: function (t) { t !== this._width && (this._width = t, this._propertyChanged.notify(this, "width")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this._height }, set: function (t) { t !== this._height && (this._height = t, this._propertyChanged.notify(this, "height")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "mockup", { get: function () { return this._mockup }, set: function (t) { if (null == t) throw new C("mockup can`t be null"); t !== this._mockup && (this._mockup = t, null != this._mockup && (this._mockup.parentSurface = this), this._propertyChanged.notify(this, "mockup")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "previewMockups", { get: function () { return this._previewMockups }, set: function (t) { var e, n; if (null != this._previewMockups) try { for (var r = fo(this._previewMockups), o = r.next(); !o.done; o = r.next()) { o.value.parentSurface = null } } catch (t) { e = { error: t } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (e) throw e.error } } if (this._previewMockups = t, null != this._previewMockups) for (var i = 0; i < this._previewMockups.length; ++i)this._previewMockups.get(i).parentSurface = this }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "containers", { get: function () { return this._containers }, set: function (t) { if (null != t && t !== this._containers) { null != this._containers && (this._containers.clear(), this._containers.remove_itemAdded(this._onContainersItemAdded), this._containers.remove_itemRemoved(this._onContainersItemRemoved)), this._containers = t; for (var e = 0; e < this._containers.length; e++)this._onContainersItemAdded({ index: e, item: this._containers.get(e) }); this._containers.add_itemAdded(this._onContainersItemAdded), this._containers.add_itemRemoved(this._onContainersItemRemoved) } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "printAreas", { get: function () { return this._printAreas }, set: function (t) { var e, n; if (null != t && t !== this._printAreas) { null != this._printAreas && (this._printAreas.clear(), this._printAreas.remove_itemAdded(this._onPrintAreaAdded), this._printAreas.remove_itemRemoved(this._onPrintAreaRemoved)), this._printAreas = t; try { for (var r = fo(this._printAreas), o = r.next(); !o.done; o = r.next()) { var i = o.value; this._onPrintAreaAdded({ item: i }) } } catch (t) { e = { error: t } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (e) throw e.error } } this._printAreas.add_itemAdded(this._onPrintAreaAdded), this._printAreas.add_itemRemoved(this._onPrintAreaRemoved) } }, enumerable: !0, configurable: !0 }), e.prototype.add_printAreaAdded = function (t) { this._printAreaAddedEvent.add(t) }, e.prototype.remove_printAreaAdded = function (t) { this._printAreaAddedEvent.remove(t) }, e.prototype.add_printAreaRemoved = function (t) { this._printAreaRemovedEvent.add(t) }, e.prototype.remove_printAreaRemoved = function (t) { this._printAreaRemovedEvent.remove(t) }, e.prototype.getSimplifiedObject = function () { return t.prototype.getSimplifiedObject.call(this, ["parentProduct", "nonChannelContainerItems"]) }, e.prototype.getAllItems = function (t) { void 0 === t && (t = { ignoreMockups: !1 }); var e = t.ignoreMockups ? this.containers : Ke.empty().concat(this.mockup.underContainers.cast(), this.containers, this.mockup.overContainers.cast()); null != t.containerFilterFunc && (e = e.where(t.containerFilterFunc)); var n = e.selectMany((function (t) { return t.items.cast() })); return (t.flatGroupItems || t.includePlaceholderContents) && (n = n.aggregate(new rn, (function (e, n) { return n instanceof Cr ? (e.addRange(n.getNestedItems()), t.excludeGroupItems || e.add(n)) : e.add(n), t.includePlaceholderContents && n instanceof uo && (null != n.content && e.add(n.content), n.topFrames.concat(n.bottomFrames).forEach((function (t) { return e.add(t) }))), e }))), n }, e.getItems = function (t, e) { return t instanceof Array && (t = Ke.from(t)), t.selectMany((function (t) { return t.getAllItems(e) })).toArray() }, e.prototype.getBackgroundItem = function () { var t = this.containers.firstOrDefault((function (t) { return t.name === cn.BG_CONTAINER_NAME })); return null != t ? t.items.get(0) : null }, e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.width = e.width, n.height = e.height, n.rotateAngle = e.rotateAngle, n.mockup = e.mockup.clone(r), n.previewMockups.addRange(e.previewMockups.toArray().map((function (t) { return t.clone(r) }))), n.printAreas.addRange(e.printAreas.toArray().map((function (t) { return t.clone(r) }))), n.containers.addRange(e.containers.toArray().map((function (t) { return t.clone(r) }))), n.watermark = null != e.watermark ? e.watermark.clone() : null }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.generateNewIds = function () { this._generateNewId(), this._mockup.generateNewIds(), this._previewMockups.forEach((function (t) { return t.generateNewIds() })), this._printAreas.forEach((function (t) { return t.generateNewIds() })), this._containers.forEach((function (t) { return t.generateNewIds() })) }, e.getAllItems = function (t, e) { return void 0 === e && (e = { ignoreMockups: !1 }), t instanceof Array && (t = Ke.from(t)), t.selectMany((function (t) { return t.getAllItems(e) })) }, Object.defineProperty(e.prototype, "nonChannelContainerItems", { get: function () { return A.flatten(this._containers.toArray().filter((function (t) { return t.renderingType === pn.Normal })).map((function (t) { return t.items.toArray() }))) }, enumerable: !0, configurable: !0 }), e }(Ae), go = function (t) { function e(e) { void 0 === e && (e = []); var n = t.call(this) || this; return n._defaultSafetyLines = new rn, n._defaultCropMarks = new rn, n.defaultDesignLocation = new de, n._onSurfacesAdd = function (t) { t.item.parentProduct = n }, n._surfaces = new rn, n.surfaces.add_collectionChanged(n._onSurfacesAdd), n.surfaces.setRange(e), n } return m(e, t), Object.defineProperty(e.prototype, "surfaces", { get: function () { return this._surfaces }, set: function (t) { this.surfaces.setRange(t) }, enumerable: !0, configurable: !0 }), e.prototype.serialize = function (t) { return cn.getProductSerializer().serialize(this, t) }, Object.defineProperty(e.prototype, "defaultSafetyLines", { get: function () { return this._defaultSafetyLines }, set: function (t) { this._defaultSafetyLines !== t && (this._defaultSafetyLines = t, this._propertyChanged.notify(this, "defaultSafetyLines")) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "defaultCropMarks", { get: function () { return this._defaultCropMarks }, set: function (t) { this._defaultCropMarks !== t && (this._defaultCropMarks = t, this._propertyChanged.notify(this, "defaultCropMarks")) }, enumerable: !0, configurable: !0 }), e.prototype._copy = function (e, n, r) { t.prototype._copy.call(this, e, n, r), n.surfaces.addRange(e.surfaces.toArray().map((function (t) { return t.clone(r) }))), n.watermarkConfig = null != e.watermarkConfig ? e.watermarkConfig.clone() : null, n.defaultCropMarks.addRange(e.defaultCropMarks.toArray().map((function (t) { return t.clone() }))), n.defaultSafetyLines.addRange(e.defaultSafetyLines.toArray().map((function (t) { return t.clone() }))), n.defaultDesignLocation = e.defaultDesignLocation.clone() }, e.prototype.clone = function (t) { void 0 === t && (t = !1); var n = new e; return this._copy(this, n, t), n }, e.prototype.getAllItems = function (t) { return void 0 === t && (t = { ignoreMockups: !1 }), yo.getItems(this.surfaces, t) }, e.prototype.generateNewIds = function () { this._generateNewId(), this._surfaces.forEach((function (t) { return t.generateNewIds() })) }, e.prototype.getSurface = function (t) { var e = this.surfaces.toArray(), n = parseInt(t); return NaN != n && n >= 0 && e.length > n ? e[n] : A.find(e, (function (e) { return e.name === t })) }, e }(Ae), mo = function () { function t() { } return t.prototype.clone = function () { var e = new t; return e.name = this.name, e.storageId = this.storageId, e.staticStorageId = this.staticStorageId, e.repeat = this.repeat, e.opacity = this.opacity, e }, t }(), _o = function () { function t() { } return t.prototype.clone = function () { var e = new t; return e.text = this.text, e.fontSettings = null != this.fontSettings ? this.fontSettings.clone() : null, e.scale = this.scale, e.opacity = this.opacity, e }, t }(), bo = function () { function t() { } return t.prototype.clone = function () { var e = new t; return e.canvas = this.canvas, e.proof = this.proof, e }, t }(), vo = function () { function t() { } return t.prototype.clone = function () { var e = new t; return e.text = null != this.text ? this.text.clone() : null, e.image = null != this.image ? this.image.clone() : null, e.visibility = null != this.visibility ? this.visibility.clone() : null, e }, t }(), wo = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Co = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(wo(arguments[e])); return t }, Po = function () { function t(t) { var e = this; this.parseSurface = function (t) { var n = new yo; return e._parseModelComponent(t, n, [new So("mockup", e.parseMockup.bind(e)), new So("printAreas", (function (t) { return e.parseCollection(t, e.parsePrintArea, n.printAreas) }), !0), new So("containers", (function (t) { return e.parseCollection(t, e.parseSurfaceContainer, n.containers) }), !0), new So("previewMockups", (function (t) { return e.parseCollection(t, e.parseMockup.bind(e), n.previewMockups) }), !0), new So("watermark", e.parseWatermark.bind(e))]), n }, this.parseMockupContainer = function (t) { var n = new fn; return e.parseContainer(t, n), n }, this.parseSurfaceContainer = function (t) { var n, r = t.type; switch (delete t.type, r) { case "SpotColorContainer": n = new yn, e.parseContainer(t, n), delete t.version, delete t.items, Object.assign(n, t); break; case "TextureContainer": n = new gn, e.parseContainer(t, n), n.previewTextureSource = e.parseImageSource(t.previewTextureSource), delete t.previewTextureSource, delete t.version, delete t.items, Object.assign(n, t); break; default: n = new dn, e.parseContainer(t, n) }return n }, this.parseContainer = function (t, n) { return void 0 === n && (n = new hn), e._parseModelComponent(t, n, [new So("region", e.parseRectangleF.bind(e)), new So("size", e.parseSizeF.bind(e)), new So("items", (function (t) { return e.parseCollection(t, e.parseItem, n.items) }), !0)]), n }, this.parseSafetyLine = function (t) { var n = new $e, r = [new So("color", e.parseColor.bind(e)), new So("altColor", e.parseColor.bind(e)), new So("margin", e._parseMargin)]; return e._parseObject(t, n, r), n }, this.parseCropMark = function (t) { var n = new mn, r = [new So("color", e.parseColor.bind(e)), new So("leftNotes", e._setConvertedArray.bind(e, e.parseCropMarkText, (function (t) { n.leftNotes = t })), !0), new So("rightNotes", e._setConvertedArray.bind(e, e.parseCropMarkText, (function (t) { n.rightNotes = t })), !0), new So("topNotes", e._setConvertedArray.bind(e, e.parseCropMarkText, (function (t) { n.topNotes = t })), !0), new So("bottomNotes", e._setConvertedArray.bind(e, e.parseCropMarkText, (function (t) { n.bottomNotes = t })), !0)]; return e._parseObject(t, n, r), n }, this.parseCropMarkText = function (t) { var n = new bn; return e._parseObject(t, n, []), n }, this.parsePrintArea = function (t) { var n = new wn; return e._parseModelComponent(t, n, [new So("bounds", e.parseRectangleF.bind(e)), new So("safetyLines", (function (t) { return e.parseCollection(t, e.parseSafetyLine, n.safetyLines) }), !0), new So("cropMarks", (function (t) { return new rn(t.map(e.parseCropMark)) })), new So("slug", e._parseMargin), new So("bleed", e._parseMargin)]), n }, this._parseMargin = function (t) { return new Xe(null == t ? 0 : { left: t.left, top: t.top, right: t.right, bottom: t.bottom }) }, this.parseItem = function (t) { if (null == t) return null; var n = t.$type; delete t.$type; var r = [new So("pathBoundedTextPermissions", e.parsePathBoundedTextPermissions.bind(e)), new So("manipulationPermissions", e.parseManipulationPermissions.bind(e)), new So("frontendPermissions", e.parseFrontendPermissions.bind(e)), new So("visualizationPermissions", e.parseVisualizationPermissions.bind(e)), new So("violationSettings", e.parseViolationSettings), new So("itemPermissions", e.parseItemPermissions.bind(e)), new So("transform", e.parseTransform.bind(e)), new So("color", e.parseColor.bind(e)), new So("themeBinding", e.parseThemeBinding.bind(e)), new So("mask", e.parseMask.bind(e))], o = null, i = r.concat([new So("textPermissions", e.parseTextPermissions.bind(e)), new So("font", e.parseFontSettings.bind(e), !0), new So("stroke", e.parseStrokeSettings.bind(e)), new So("shadow", e.parseShadowSettings.bind(e))]); if (null == n) throw new v("Serialized data seems to be corrupted."); switch (n) { case On.type: o = e.parseSmartItem(t); break; case Xn.type: o = e.parseRectangleItem(t, r); break; case Jn.type: o = e.parseShapeItem(t, r); break; case Mr.type: o = e.parseLineItem(t, r); break; case Ar.type: o = e.parseDashedLineItem(t, r); break; case Rr.type: o = e.parseEllipseItem(t, r); break; case Dr.type: o = e.parseImageItem(t, r); break; case dr.type: o = e.parseBarcodeItem(t, r); break; case co.type: o = e.parsePlainTextItem(t, i); break; case mr.type: o = e.parseBoundedTextItem(t, i); break; case no.type: o = e.parsePathBoundedTextItem(t, i); break; case Tr.type: o = e.parseCurvedTextItem(t, i); break; case cr.type: o = e.parseAutoScaledTextItem(t, i); break; case ho.type: o = e.parseArchedTextItem(t, i); break; case uo.type: o = e.parsePlaceholderItem(t, r); break; case Cr.type: o = e.parseGroupItem(t, r); break; case Or.type: o = e.parseClipartItem(t, r); break; case Xr.type: o = e.parseLayoutItem(t, r); break; default: throw new w("Deserializing of item with type - " + n + " is not implemented") }return o }, this.parseEncodingOptions = function (t) { var n = new yr; return e._parseModelComponent(t, n, []), n }, this.parseLineItem = function (t, n) { var r = new Mr, o = Co(n, e._getLineConverters()); return e._parseModelComponent(t, r, o), r }, this.parseRotatedRectangle = function (t) { return new xe(t.centerX, t.centerY, t.width, t.height, t.angle) }, this.parseViolationSettings = function (t) { switch (delete t.version, t.type) { case Nn.type: return Object.assign(new Nn, t); case Hn.type: return Object.assign(new Hn, t); case Fr.type: return Object.assign(new Fr, t); case ir.type: return Object.assign(new ir, t); default: throw new w("Deserializing of item with type - " + t.type + " is not implemented") } }, this.parsePlaceholderPermissions = function (t) { return Object.assign(new ro, t) }, this.parseLayoutSettings = function (t) { var e; switch (t.type) { case to.type: e = new to; break; default: e = new Zr }return Object.assign(e, t) }, this.parseGroupItemPermissions = function (t) { return Object.assign(new _r, t) }, this.parseLinePermissions = function (t) { return Object.assign(new Br, t) }, this.parseBarcodePermissions = function (t) { return Object.assign(new pr, t) }, this._parseOverlayEffect = function (t) { if (null != t) return new ln({ color: null != t.color ? e.parseColor(t.color) : null, opacity: null != t.opacity ? t.opacity : null, blendMode: null != t.blendMode ? t.blendMode : null }) }, this._parseImageItemValue = function (t) { return new Dr.ImageItemValue(t.name, new Dr.ImageMetaData(t.value), e.parseRotatedRectangle(t.transformedRectangle)) }, this._parseTextItemValue = function (t) { return new sr.BaseTextValue(t.name, t.text) }, this._parseObject = function (t, n, r) { for (var o in t) if (t.hasOwnProperty(o)) { var i = r.find((function (t) { return t.property === o })), a = t[o]; if (null == i) { if (A.isObject(a)) { var s = a.$type; if (delete a.$type, A.isString(s)) { var l = A.find(e._additionalConverters, (function (t) { return t.type === s })); if (null != l) { n[o] = l.parseRawValue(a); continue } console.warn("Unknown type " + s) } } n[o] = a; continue } if (i.setByConverter) try { i.convert(a, n) } catch (t) { throw console.error("Error while parsing property " + o + " with converter ", i, t), t } else { if ("manipulationPermissions" === o && n instanceof Cr) { n.groupManipulationPermissions = i.convert(a); continue } n[o] = i.convert(a) } } }, this._additionalConverters = null != t ? t : [] } return t.prototype.parseProduct = function (t) { var e = this, n = new go, r = [new So("surfaces", (function (t) { return e.parseCollection(t, e.parseSurface, n.surfaces) }), !0), new So("watermarkConfig", this.parseWatermarkConfig.bind(this)), new So("defaultSafetyLines", (function (t) { return e.parseCollection(t, e.parseSafetyLine, n.defaultSafetyLines) }), !0), new So("defaultCropMarks", (function (t) { return e.parseCollection(t, e.parseCropMark, n.defaultCropMarks) }), !0), new So("defaultDesignLocation", this.parsePointF.bind(this))]; return this._parseModelComponent(t, n, r), n }, t.prototype.parseWatermarkConfig = function (t) { var e = this; if (null == t) return null; var n = new vo, r = new So("fontSettings", (function (t) { if (null == t) return null; var n = new sr.FontSettings(null); return e._parseObject(t, n, []), n })), o = new So("text", (function (t) { if (null == t) return null; var n = new _o; return e._parseObject(t, n, [r]), n })), i = new So("image", (function (t) { if (null == t) return null; var n = new mo; return e._parseObject(t, n, []), n })), a = new So("visibility", (function (t) { if (null == t) return null; var n = new bo; return e._parseObject(t, n, []), n })); return this._parseObject(t, n, [o, i, a]), n }, t.prototype.parseWatermark = function (t) { if (null == t) return null; var e = new Pn; return this._parseObject(t, e, []), e }, t.prototype.parseMockup = function (t) { var e = this, n = new Cn; return this._parseModelComponent(t, n, [new So("underContainers", (function (t) { return e.parseCollection(t, e.parseMockupContainer, n.underContainers) }), !0), new So("overContainers", (function (t) { return e.parseCollection(t, e.parseMockupContainer, n.overContainers) }), !0)]), n }, t.prototype.parseCollection = function (t, e, n) { null != t && n.setRange(t.map((function (t) { return e(t) }))) }, t.prototype.parseRectangleF = function (t) { return null == t ? null : new ge(t.left, t.top, t.width, t.height) }, t.prototype.parsePointF = function (t) { if (null == t) return null; var e = new de; return Object.assign(e, t), e }, t.prototype.parseSizeF = function (t) { if (null == t) return null; if (A.isString(t)) { var e = t.split(","); return new Oe(parseFloat(e[0].trim()), parseFloat(e[1].trim())) } return A.extend(new Oe, t) }, t.prototype.parsePath = function (t) { return null == t ? null : new Pe("string" == typeof t ? t : t.path) }, t.prototype.parsePaths = function (t) { var e = this; if (null == t || !A.isArray(t)) return null; var n = []; return A.toArray(t).forEach((function (t) { n.push(e.parsePath(t)) })), n }, t.prototype.parseSmartItem = function (t) { var e = new On; return this._parseModelComponent(t, e, []), e }, t.prototype.parsePlainTextItem = function (t, e) { var n = new co, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("baselineLocation", this.parsePointF.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseArchedTextItem = function (t, e) { var n = new ho, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("center", this.parsePointF.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseAutoScaledTextItem = function (t, e) { var n = new cr, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("textRectangle", this.parseRectangleF.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseBoundedTextItem = function (t, e) { var n = new mr, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("paragraphSettings", this.parseParagraphSettings.bind(this)), new So("textRectangle", this.parseRectangleF.bind(this)), new So("wrappingPath", this.parsePath.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype.parsePathBoundedTextItem = function (t, e) { var n = new no, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("pathBoundedTextPermissions", this.parsePathBoundedTextPermissions.bind(this)), new So("boundingPaths", this.parsePaths.bind(this)), new So("paragraphSettings", this.parseParagraphSettings.bind(this)), new So("wrappingPath", this.parsePath.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseCurvedTextItem = function (t, e) { var n = new Tr, r = e.concat(this._getShapeConverters(), this._getBaseTextItemConverters(n), [new So("textPath", this.parsePath.bind(this))]); return this._parseModelComponent(t, n, r), n }, t.prototype._getBaseTextItemConverters = function (t) { var e = this; return [new So("values", this._setConvertedArray.bind(this, this._parseTextItemValue, (function (e) { t.values = e })), !0), new So("placeholders", (function (n) { return e.parseCollection(n, e.parseInStringPlaceholder, t.placeholders) }), !0), new So("colorPalette", (function (n) { return e.parseCollection(n, e.parseColor, t.colorPalette) }), !0)] }, t.prototype.parseImageItem = function (t, e) { var n = new Dr, r = e.concat(this._getShapeConverters(), this._getImageConverters(n)); return this._parseModelComponent(t, n, r), n }, t.prototype.parseBarcodeItem = function (t, e) { var n = new dr, r = e.concat(this._getShapeConverters(), this._getImageConverters(n), [new So("barcodePermissions", this.parseBarcodePermissions.bind(this)), new So("color", this.parseColor.bind(this)), new So("barcodeOptions", this.parseEncodingOptions)]); return this._parseModelComponent(t, n, r), n }, t.prototype.parsePlaceholderItem = function (t, e) { var n = this, r = new uo, o = Co(e, this._getShapeConverters(), [new So("placeholderPermissions", this.parsePlaceholderPermissions), new So("contentPermissions", this.parseContentPermissions.bind(this)), new So("content", this.parseItem), new So("topFrames", i), new So("bottomFrames", i), new So("stubStorageMeta", (function (t) { return new Vr(t) })), new So("contentFillColor", this.parseColor.bind(this)), new So("contentOverlayEffect", this._parseOverlayEffect.bind(this))]); return this._parseModelComponent(t, r, o), r; function i(t) { return t.map(n.parseItem) } }, t.prototype.parseGroupItem = function (t, e) { var n = new Cr, r = Co(e, this._getShapeConverters(), this._getGroupConverters(n)); return this._parseModelComponent(t, n, r), n }, t.prototype.parseClipartItem = function (t, e) { var n = new Or, r = Co(e, this._getShapeConverters(), this._getGroupConverters(n), [new So("colorGroups", this._setConvertedArray.bind(this, this.parseColorGroup.bind(this), (function (t) { return n.colorGroups = t })), !0)]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseLayoutItem = function (t, e) { var n = new Xr, r = Co(e, this._getShapeConverters(), this._getGroupConverters(n), [new So("layoutSettings", this.parseLayoutSettings), new So("sourceRectangle", this.parseRotatedRectangle)]); return this._parseModelComponent(t, n, r), n }, t.prototype.parseContentPermissions = function (t, e) { var n = new Er; return n.barcodePermissions = this.parseBarcodePermissions(t.barcodePermissions), n.imagePermissions = this.parseImagePermissions(t.imagePermissions), n }, t.prototype.parseEllipseItem = function (t, e) { var n = new Rr, r = e.concat(this._getShapeConverters()); return this._parseModelComponent(t, n, r), n }, t.prototype.parseRectangleItem = function (t, e) { var n = new Xn, r = e.concat(this._getShapeConverters()); return this._parseModelComponent(t, n, r), n }, t.prototype.parseShapeItem = function (t, e) { var n = new Jn, r = e.concat(this._getShapeConverters()); return this._parseModelComponent(t, n, r), n }, t.prototype.parseDashedLineItem = function (t, e) { var n = new Ar, r = Co(e, this._getLineConverters(), this._getDashedLineConverters()); return this._parseModelComponent(t, n, r), n }, t.prototype.parseThemeBinding = function (t) { return null != t ? Ln.fromRaw(t) : null }, t.prototype.parseMask = function (t) { if (null == t) return null; var e = new Sn; return null != t.vectorMask && (e.vectorMask = this.parsePath(t.vectorMask)), e }, t.prototype.parseColor = function (t) { return null != t ? qe.createColor(t) : null }, t.prototype.parseTransform = function (t) { return new Se(t.scaleX, t.scaleY, t.translateX, t.translateY, t.angle) }, t.prototype.parseFontSettings = function (t, e) { var n = new sr.FontSettings(null); return Object.assign(n, t), e.font = n, e.font }, t.prototype.parseManipulationPermissions = function (t) { var e = Object.assign(new jn, t); return e.resizeGrips = Object.assign(new In(!1, !1), t.resizeGrips), e }, t.prototype.parseFrontendPermissions = function (t) { return Object.assign(new An, t) }, t.prototype.parseVisualizationPermissions = function (t) { return Object.assign(new kn, t) }, t.prototype.parseColorGroup = function (t) { return new Ir(this.parseColor(t.color), t.targets) }, t.prototype.parseItemPermissions = function (t) { var e = Object.assign(new Mn, t); return e.itemToolbarPermissions = Object.assign(new Bn(!1), t.itemToolbarPermissions), e }, t.prototype.parseTextPermissions = function (t) { return Object.assign(new Qn, t) }, t.prototype.parsePathBoundedTextPermissions = function (t) { return Object.assign(new eo, t) }, t.prototype.parseShapePermissions = function (t) { return Object.assign(new zn, t) }, t.prototype.parseImagePermissions = function (t) { return Object.assign(new kr, t) }, t.prototype.parseImageSource = function (t) { var e = null; return null != t.origin && (e = new Dr.ImageSource.Origin(t.origin)), void 0 !== t.origin && delete t.origin, Object.assign(new Dr.ImageSource(t.id, t.url, 0, !1, !0, e), t) }, t.prototype.parseParagraphSettings = function (t) { return new gr(t) }, t.prototype.parseStrokeSettings = function (t) { return $n._from_data(t) }, t.prototype.parseShadowSettings = function (t) { return Kn._from_data(t) }, t.prototype.parseInStringPlaceholder = function (t) { return new Wr(t.id, t.name, t.mask, t.value, t.values) }, t.prototype._setConvertedArray = function (t, e, n) { A.isArray(n) && e(A.map(n, (function (e) { return t(e) }))) }, t.prototype._getImageConverters = function (t) { return [new So("source", this.parseImageSource.bind(this)), new So("imagePermissions", this.parseImagePermissions.bind(this)), new So("values", this._setConvertedArray.bind(this, this._parseImageItemValue, (function (e) { t.values = e })), !0), new So("overlayEffect", this._parseOverlayEffect.bind(this))] }, t.prototype._getShapeConverters = function () { return [new So("fillColor", this.parseColor.bind(this)), new So("borderColor", this.parseColor.bind(this)), new So("altBorderColor", this.parseColor.bind(this)), new So("sourceRectangle", this.parseRectangleF.bind(this)), new So("sourcePath", this.parsePath.bind(this)), new So("shapePermissions", this.parseShapePermissions.bind(this))] }, t.prototype._getGroupConverters = function (t) { return [new So("items", this._setConvertedArray.bind(this, this.parseItem, (function (e) { return t.items.addRange(e) })), !0), new So("groupItemPermissions", this.parseGroupItemPermissions)] }, t.prototype._getLineConverters = function () { return [new So("color", this.parseColor.bind(this)), new So("sourcePoint0", this.parsePointF.bind(this)), new So("sourcePoint1", this.parsePointF.bind(this)), new So("linePermissions", this.parseLinePermissions)] }, t.prototype._getDashedLineConverters = function () { return [new So("altColor", this.parseColor.bind(this))] }, t.prototype._parseModelComponent = function (t, e, n) { if ("6.5.22" !== t.version) throw new v("Version of serialized model component (" + t.version + ") does not match the editor's version (6.5.22)."); n = n.concat([new So("tags", (function (t, e) { e._tags = t }), !0), new So("version", (function (t, e) { }), !0)]), this._parseObject(t, e, n) }, t }(), So = function () { return function (t, e, n) { this.property = t, this.convert = e, this.setByConverter = n || !1 } }(); function xo(t) { return Array.isArray(t) && t.every((function (t) { return "string" == typeof t })) } function Oo(t) { return null != t && "object" == typeof t } var Io = !1, jo = null, ko = null, Eo = null, To = [], Bo = ""; function Mo(t, e, n, r) { if (Io = t, Bo = n, t) { var o = Math.random(); ko = r || o.toString(), jo = e, window.addEventListener("error", Ao, !0), console.log("TraceLog enabled for " + Bo + " editorUrl: " + jo), Eo = setInterval((function () { return function () { try { if (0 == To.length) return; fetch(jo + "/api/frontendlog", { mode: "cors", method: "post", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ traceLogId: ko, scope: Bo, logs: To }) }), To = [] } catch (t) { console.error("Error in traceLog:", t) } }() }), 5e3) } else jo = null, window.removeEventListener("error", Ao), Eo && clearInterval(Eo) } function Ao(t) { return Ro({ "window.onerror": !0, error: p.parse(t) }), !1 } function Ro(t, e) { void 0 === e && (e = !1); try { if (!Io) return; if (null == jo || null == jo || "" == jo || "string" != typeof jo) return; var n = new Date, r = {}; if (Oo(t)) { for (var o in t) try { r[o] = JSON.stringify(t[o]) } catch (e) { try { r[o] = p.stringify(t[o]) } catch (t) { r[o] = "Unable to stringify: " + t } } if (e) { var i = new Error; r.__stackTrace = i.stack } r.__time = n } !function (t) { To.push(t) }(r) } catch (t) { console.error("Exception in traceLog", t) } } var Lo = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, No = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Fo = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(No(arguments[e])); return t }, zo = function () { function t(e) { this._targetFrame = e, this._disposed = !1, this._requestedMessages = Object.create(null), this._listeners = Object.create(null), this._id = ++t._idOfLastInstance, this._onMessageDelegate = this._onMessage.bind(this), addEventListener("message", this._onMessageDelegate), this.callProcedure("__subscribeRequest") } return t.prototype.dispose = function () { this._disposed || (removeEventListener("message", this._onMessageDelegate), this._disposed = !0) }, t.prototype.callProcedure = function (e) { for (var n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; if (Ro({ class: "Client", method: "callProcedure", name: e, arguments: n }), this._disposed) return console.error("Instance disposed!"), Promise.reject("Instance disposed!"); var o = ++t._idOfLastProcedureCall, i = new y; this._requestedMessages[o.toString()] = i; var a = { id: o, clientInstanceId: this._id, methodName: e, methodArgs: n }; return this._targetFrame.contentWindow.postMessage(p.stringify(a), "*"), t._idOfLastProcedureCall = o, i.promise }, t.prototype.subscribe = function (t, e) { this._disposed ? console.log("Instance disposed!") : (Array.isArray(this._listeners[t]) || (this._listeners[t] = []), this._listeners[t].push(e)) }, t.prototype._onMessage = function (t) { if (t.source === this._targetFrame.contentWindow) { var e = p.parse(t.data); switch (Ro({ class: "Client", method: "_onMessage", message: e }), e.type) { case u.Event: this._notifySubscribers(e); break; case u.ProcedureResponse: this._handleProcResponse(e); break; default: throw { unexpectedMessage: e } } } }, t.prototype._notifySubscribers = function (t) { var e, n, r, o; if (null != this._listeners[t.event]) { var i = []; if (null != t.result) { var a = function (t) { try { return (new Po).parseItem(JSON.parse(t)) } catch (e) { return t } }; try { for (var s = Lo(t.result), l = s.next(); !l.done; l = s.next()) { var u = l.value; Array.isArray(u) ? i.push(u.map((function (t) { return "string" == typeof t ? a(t) : t }))) : i.push("string" == typeof u ? a(u) : u) } } catch (t) { e = { error: t } } finally { try { l && !l.done && (n = s.return) && n.call(s) } finally { if (e) throw e.error } } } try { for (var c = Lo(this._listeners[t.event]), p = c.next(); !p.done; p = c.next()) { p.value.apply(void 0, Fo(i)) } } catch (t) { r = { error: t } } finally { try { p && !p.done && (o = c.return) && o.call(c) } finally { if (r) throw r.error } } } }, t.prototype._handleProcResponse = function (t) { var e = this._requestedMessages[t.id]; null != e ? (this._requestedMessages[t.id] = void 0, t.success ? e.resolve(t.result) : e.reject(t.result)) : console.warn("Recived unknown message!") }, t._idOfLastProcedureCall = -1, t._idOfLastInstance = -1, t }(), Do = function () { var t = function (e, n) { return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(e, n) }; return function (e, n) { function r() { this.constructor = e } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(); function Vo(t) { var e = new Error(t); return e.isIframeApiException = !0, e } function qo(t) { return !0 === t.isIframeApiException } var Uo = function (t) { function e(e) { var n = t.call(this, e.value) || this; return n.response = e, n } return Do(e, t), e }(v), Wo = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }; function Go(t) { return null == t || null == t.up && null == t.down } function Ho(t) { var e, n = JSON.parse(JSON.stringify(t)), r = n.surfaces; return e = r, !Array.isArray(e) && [e.designFolder, e.mockupFolder].some(ni) ? (r._type = "SurfacesFromFolder", n.surfaces = [r]) : !function (t) { return !Array.isArray(t) && ni(t.file) }(r) ? r.forEach((function (e, n) { var o, i, a = function t(e) { if (ni(e)) { return t({ designFile: e }) } null != e.containers && e.containers.forEach(Zo); if (ri(e)) { return t({ printAreas: [e] }) } if (function (t) { return Array.isArray(t.printAreas) && [t.width, t.height].every((function (t) { return void 0 === t })) }(e) || oi(e)) { var n = (oi(e), e); return null != n.mockup && ti(n), null != n.previewMockups && (n.previewMockups = n.previewMockups.map(ei)), null == n.printAreas && (n.printAreas = []), n.printAreas.forEach((function (t) { return Qo(t) })), n._type = oi(e) ? "SurfaceFromState" : "SurfaceTemplate", n } if (function (t) { return [t.width, t.height].every((function (t) { return "number" == typeof t })) }(e)) { var r = e; return null == r.printAreas && (r.printAreas = []), 0 === r.printAreas.length && (r.printAreas[0] = { bounds: { x: 0, y: 0, width: r.width, height: r.height } }), r.printAreas.forEach((function (t) { return Qo(t) })), r._type = "SurfaceDefinition", r } throw Vo("Wrong surface parameter") }(e); try { for (var s = Wo(a.printAreas), l = s.next(); !l.done; l = s.next()) { var u = l.value; null == u.safetyLines && null != t.defaultSafetyLines && (u.safetyLines = t.defaultSafetyLines), null == u.cropMarks && null != t.defaultCropMarks && (u.cropMarks = t.defaultCropMarks) } } catch (t) { o = { error: t } } finally { try { l && !l.done && (i = s.return) && i.call(s) } finally { if (o) throw o.error } } r[n] = a })) : (r._type = "SurfacesFromMultipageTemplate", n.surfaces = [r]), n } function Jo(t) { return { surfaces: [{ printAreas: t, mockup: null }] } } function Xo(t) { var e, n, r = []; try { for (var o = Wo(t), i = o.next(); !i.done; i = o.next()) { var a = i.value, s = { name: JSON.stringify({ origSurfaceId: a.surface.id }), mockup: a.mockup, printAreas: [], previewMockups: a.previewMockups }; r.push(s) } } catch (t) { e = { error: t } } finally { try { i && !i.done && (n = o.return) && n.call(o) } finally { if (e) throw e.error } } return { surfaces: r } } function Yo(t) { return $o([t]) } function $o(t) { if (Ko(t)) { var e = t; return "string" == typeof e.stateId ? [new Oa(e.stateId)] : [e.stateId] } return { surfaces: t } } function Ko(t) { return !Array.isArray(t) && t.stateId } function Qo(t) { if (null != t.containers && t.containers.length > 0 && t.containers.forEach(Zo), ri(t)) t._type = "PrintAreaTemplate"; else { if (null == t.bounds) throw Vo("Wrong surface parameter"); t._type = "PrintAreaDefinition" } } function Zo(t) { if (null != t.type) { var e = t.type.toLowerCase(); e !== Oi[Oi.SpotColor].toString().toLowerCase() ? e !== Oi[Oi.Texture].toString().toLowerCase() ? console.warn("Extra channel type '" + t.type + "' not supported.") : t._type = "TextureContainerDefinition" : t._type = "SpotColorContainerDefinition" } else console.warn("Extra channel must have type!") } function ti(t) { var e = t.mockup; null != e && (t.mockup = ei(e)), null != t.previewMockups && t.previewMockups.length > 0 && (t.previewMockups = t.previewMockups.map(ei)) } function ei(t) { return t && (t.name = function (t) { if (Go(t)) return null; if (null != t.name) return t.name; if (t.up && "string" == typeof t.up) return t.up; if (t.down && "string" == typeof t.down) return t.down; throw new C("normalizeMockupName: Invalid mockup format") }(t)), t } function ni(t) { return "string" == typeof t } function ri(t) { return "string" == typeof t.designFile } function oi(t) { return !Array.isArray(t) && ni(t.stateId) } var ii, ai = function () { var t = function (e, n) { return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(e, n) }; return function (e, n) { function r() { this.constructor = e } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), si = function (t) { function e(n) { var r = t.call(this, n.value) || this; return r.ajaxResponse = n, r.name = "AjaxResponseException", Object.setPrototypeOf(r, e.prototype), r } return ai(e, t), e.prototype.toJSON = function () { var e = t.prototype.toJSON.call(this); return e.ajaxResponse = this.ajaxResponse, e }, e }(v), li = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, ui = function (t) { return new Promise((function (e, n) { var r, o, i = new XMLHttpRequest; if (i.open(t.type, t.url, !0), i.setRequestHeader("Accept", "*/*"), null != t.headers) try { for (var a = li(t.headers), s = a.next(); !s.done; s = a.next()) { var l = s.value; i.setRequestHeader(l.name, l.value) } } catch (t) { r = { error: t } } finally { try { s && !s.done && (o = a.return) && o.call(a) } finally { if (r) throw r.error } } null != t.responseType && (i.responseType = t.responseType), i.send(t.data), i.onreadystatechange = function () { if (4 === i.readyState) { var t = i.status, r = { value: "arraybuffer" !== i.responseType ? i.responseText : "", status: t, contentType: i.getResponseHeader("content-type"), xhr: i }; t >= 200 && t < 300 ? e(r) : n(new si(r)) } } })) }, ci = function (t) { return ui({ url: t, type: hi.get, headers: [fi.json] }) }, pi = function (t, e) { return ui({ url: t, type: hi.post, headers: [fi.json], data: e }) }; !function (t) { t[t.Ok = 200] = "Ok", t[t.NoContent = 204] = "NoContent", t[t.NotFound = 404] = "NotFound", t[t.InternalServerError = 500] = "InternalServerError" }(ii || (ii = {})); var hi, fi, di = function (t) { this.response = t }; function yi(t) { var e = function () { return null == t.offsetParent }; return new Promise((function (t) { if (e()) var n = setInterval((function () { e() || (clearInterval(n), t()) }), 400); else t() })) } !function (t) { t.post = "POST", t.get = "GET", t.Delete = "DELETE" }(hi || (hi = {})), function (t) { t.isJsonContentType = function (t) { return 0 === t.trim().toLowerCase().indexOf("application/json") }, t.json = { name: "Content-Type", value: "application/json;charset=UTF-8" }, t.text = { name: "Content-Type", value: "text/plain" } }(fi || (fi = {})); var gi = yi, mi = function () { function t() { } return Object.defineProperty(t, "gecko", { get: function () { return -1 !== navigator.userAgent.indexOf("Firefox") }, enumerable: !0, configurable: !0 }), t }(), _i = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, bi = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, vi = function () { function t() { } return t.waitReady = function (t) { return _i(this, void 0, void 0, (function () { return bi(this, (function (e) { switch (e.label) { case 0: return mi.gecko ? [4, gi(t)] : [3, 2]; case 1: e.sent(), e.label = 2; case 2: return [2] } })) })) }, t }(), wi = function () { var t = function (e, n) { return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(e, n) }; return function (e, n) { function r() { this.constructor = e } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), Ci = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, Pi = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, Si = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, xi = function () { function t(e, n, r) { this._iframe = this._normalizeIframe(e), this._editorData = this._normalizeEditorData(n), this._editorUrl = this._normalizeUrl(r), this._config = this._editorData instanceof xa ? this._queryStringToConfigConverter(this._editorData) : this._editorData.config, t._existingLoaders.push(this), this._status = t.Status.Initialized } return t.prototype._normalizeIframe = function (t) { return t.scrolling = "no", t }, t.prototype._normalizeEditorData = function (t) { return t instanceof xa || null !== t.config || (t.config = void 0), t }, t.preload = function (e) { return Ci(this, void 0, void 0, (function () { var n, r; return Pi(this, (function (o) { switch (o.label) { case 0: return n = document.createElement("iframe"), null == (r = document.head || document.getElementsByTagName("head")[0]) && (r = document.getElementsByTagName("html")[0].appendChild(document.createElement("head"))), n.style.position = "absolute", n.style.top = "-1000px", n.style.left = "-1000px", n.style.width = "500px", n.style.height = "500px", n.style.visibility = "hidden", r.appendChild(n), [4, t._loadIframe(n, t._getIframeUrl(e))]; case 1: return o.sent(), n.parentNode.removeChild(n), [2] } })) })) }, t.prototype.start = function (e) { var n = this; try { this._status = t.Status.Started; var r, o = this._getInitData(e), i = this._cleanUpIframe().then((function () { return n._checkLoadStatus(), n._loadIframe(n._getIframeUrl()) })).then((function () { return n._checkLoadStatus(), n._iframeClient = new zo(n._iframe) })); return Promise.all([o, i, vi.waitReady(this._iframe)]).then((function (t) { return r = t[0] })).then((function () { return n._checkLoadStatus(), n._initEditor(r) })).then((function () { return new ta(n._iframe, n._iframeClient, n._editorUrl, n._config) })).catch((function (e) { if (e instanceof si && n._handleServerException(e, i), e instanceof t.LoadingStoppedException) return new Promise((function (t) { })); throw e })) } catch (t) { return Promise.reject(t) } }, t.prototype.dispose = function () { null != this._iframeClient && this._iframeClient.dispose(), this._status = t.Status.Disposed }, t.prototype._queryStringToConfigConverter = function (t) { var e = t.getDeserializedObject().filter((function (t) { return "theme" === t.key.toLowerCase() }))[0]; return null != e ? { theme: e.value } : {} }, t.prototype._getInitData = function (e) { var n = this._editorData; return n instanceof xa ? t.getInitDataByQueryString(this._editorUrl, n.value, e) : t.getInitData(this._editorUrl, n.productData, this._config, e) }, t.getInitData = function (t, e, n, r, o) { return void 0 === o && (o = !1), Ci(this, void 0, Promise, (function () { var i, a, s, l, u; return Pi(this, (function (c) { switch (c.label) { case 0: i = { userId: n.userId, tokenId: n.tokenId, userInfo: n.userInfo, loadConfigFromState: n.loadConfigFromState, configFromApi: n, hasExternalMockup: o, type: "RequestData" }, Array.isArray(e) ? i.states = e.map((function (t) { return t.value })) : i.productDefinition = Ho(e), a = { type: hi.post, url: t + "/api/EditorInit/RequestInitData", headers: [fi.text], data: JSON.stringify(i) }, c.label = 1; case 1: return c.trys.push([1, 3, , 4]), [4, ui(a)]; case 2: return (s = c.sent()).status !== ii.NoContent ? [2, s.value] : [3, 4]; case 3: throw l = c.sent(), console.error("RequestInitData error ", l), console.error("request.data", a.data), l; case 4: null != r && r(), i.type = "FirstRequestData", a = { type: hi.post, url: t + "/api/EditorInit/FirstRequestInitData", headers: [fi.text], data: JSON.stringify(i) }, c.label = 5; case 5: return c.trys.push([5, 7, , 8]), [4, ui(a)]; case 6: return [2, c.sent().value]; case 7: throw u = c.sent(), console.error("FirstRequestInitData error ", u), console.error("request.data", a.data), u; case 8: return [2] } })) })) }, t.getInitDataByQueryString = function (t, e, n) { var r = { queryString: e, type: "RequestDataByQueryString" }; return ui({ type: hi.post, url: t + "/api/EditorInit/RequestInitData", headers: [fi.text], data: JSON.stringify(r) }).then((function (r) { if (r.status === ii.NoContent) { null != n && n(); var o = { queryString: e, type: "FirstRequestDataByQueryString" }; return ui({ type: hi.post, url: t + "/api/EditorInit/FirstRequestInitData", headers: [fi.text], data: JSON.stringify(o) }) } return r })).then((function (t) { return t.value })) }, t.prototype._checkLoadStatus = function () { if (this._status !== t.Status.Started) throw new t.LoadingStoppedException("Loader disposed!") }, t.prototype._normalizeUrl = function (t) { return "/" === t[t.length - 1] ? t.substr(0, t.length - 1) : t }, t.prototype._cleanUpIframe = function () { var e = this; return t._existingLoaders.filter((function (t) { return t !== e && t._iframe === e._iframe })).forEach((function (t) { return t.dispose() })), "about:blank" !== this._iframe.src ? this._loadIframe("about:blank") : Promise.resolve() }, t.prototype._loadIframe = function (e) { return t._loadIframe(this._iframe, e) }, t._loadIframe = function (t, e) { return t.setAttribute("allow", "fullscreen *; clipboard-read; clipboard-write"), new Promise((function (n, r) { var o, i; t.addEventListener("load", (function () { return n() })); try { for (var a = Si(["abort", "error"]), s = a.next(); !s.done; s = a.next()) { var l = s.value; t.addEventListener(l, r) } } catch (t) { o = { error: t } } finally { try { s && !s.done && (i = a.return) && i.call(a) } finally { if (o) throw o.error } } t.src = e })) }, t.prototype._getIframeUrl = function (e) { return void 0 === e && (e = {}), t._getIframeUrl(this._editorUrl, this._config) }, t._getIframeUrl = function (t, e) { void 0 === e && (e = {}); var n, r = { iframeApi: "true" }; return null != e.customStyle && (r.customStyle = e.customStyle), null != e.theme && (r.theme = e.theme), t + "/page/iframe?" + (n = r, Object.keys(n).map((function (t) { return t + "=" + n[t] })).join("&")) }, t.prototype._initEditor = function (t) { var e = this; return this._iframeClient.callProcedure("setInitData", t, ko).then((function () { return e._iframeClient.callProcedure("waitEditorReady") })) }, t.prototype._handleServerException = function (t, e) { var n, r = null === (n = t.ajaxResponse.contentType) || void 0 === n ? void 0 : n.toLowerCase(); if (-1 !== r.indexOf("application/json") || -1 !== r.indexOf("text/plain")) return e.then((function (e) { throw e.callProcedure("notifyServerError", t.ajaxResponse).then((function () { return e.dispose() })), new Uo(t.ajaxResponse) })); throw null != t.ajaxResponse.value ? t.ajaxResponse.value : JSON.stringify("ex.ajaxResponse: " + JSON.stringify(t.ajaxResponse)) }, t._existingLoaders = [], t }(); !function (t) { !function (t) { t[t.Initialized = 0] = "Initialized", t[t.Started = 1] = "Started", t[t.Finished = 2] = "Finished", t[t.Disposed = 3] = "Disposed", t[t.Error = 4] = "Error" }(t.Status || (t.Status = {})); var e = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return wi(e, t), e }(v); t.LoadingStoppedException = e }(xi || (xi = {})); var Oi, Ii, ji, ki = function () { var t = function (e, n) { return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(e, n) }; return function (e, n) { function r() { this.constructor = e } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), Ei = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, Ti = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, Bi = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }; !function (t) { t[t.Texture = 0] = "Texture", t[t.SpotColor = 1] = "SpotColor" }(Oi || (Oi = {})), function (t) { t.Crop = "Crop", t.Trim = "Trim", t.Bleed = "Bleed" }(Ii || (Ii = {})), function (t) { t[t.Left = 0] = "Left", t[t.Center = 1] = "Center", t[t.Right = 2] = "Right" }(ji || (ji = {})); var Mi, Ai = function (t) { this.id = t.id, this.name = t.name }, Ri = function (t) { function e(e, n) { var r = t.call(this, e) || this; return r._context = n, r.surfaces = e.surfaces.map((function (t) { return new Vi(t, r, r._context) })), r.currentSurface = r.surfaces.filter((function (t) { return t.id === e.currentSurfaceId }))[0], r } return ki(e, t), e.prototype.swapSurfaces = function (t, e) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (n) { switch (n.label) { case 0: return [4, this._context.client.callProcedure("swapSurfaces", t.id, e.id)]; case 1: return n.sent(), [4, this._context.editor.getProduct()]; case 2: return [2, n.sent()] } })) })) }, e.prototype.setSurfaces = function (t) { var e = this, n = $o(t); return xi.getInitData(this._context.editorUrl, n, this._context.config).then((function (t) { return JSON.parse(t).product })).then((function (t) { return e._context.client.callProcedure("setSurfaces", t) })).then((function () { return e._context.editor.getProduct() })) }, e.prototype.addSurfaces = function (t, e) { var n = this, r = $o(t), o = Ko(t) ? t.surfaces : null; return xi.getInitData(this._context.editorUrl, r, this._context.config).then((function (t) { return JSON.parse(t).product })).then((function (t) { return n._context.client.callProcedure("addSurfaces", t, e, o) })).then((function () { return n._context.editor.getProduct() })) }, e.prototype.addSurface = function (t, e) { var n; if (Ko(t)) { var r = t; n = { stateId: r.stateId, surfaces: null != r.surface ? [r.surface] : ["0"] } } else n = [t]; return this.addSurfaces(n, e) }, e.prototype.removeSurface = function (t) { var e = this; return this._context.client.callProcedure("removeSurface", t.id).then((function () { return e._context.editor.getProduct() })) }, e.prototype.switchTo = function (t) { var e = this; return this._context.client.callProcedure("switchToSurface", t.id).then((function () { return e._context.editor.getProduct() })) }, e.prototype.getTags = function () { return this._context.client.callProcedure("getTags") }, e.prototype.setTags = function (t) { return this._context.client.callProcedure("setTags", t) }, e.prototype.setMockups = function (t, e) { return Ei(this, void 0, void 0, (function () { var n, r, o, i, a, s, l, u, c, p, h, f, d, y, g, m, _, b, v, w; return Ti(this, (function (C) { switch (C.label) { case 0: try { for (n = Bi(t), r = n.next(); !r.done; r = n.next())ti(s = r.value) } catch (t) { g = { error: t } } finally { try { r && !r.done && (m = n.return) && m.call(n) } finally { if (g) throw g.error } } o = !1; try { for (i = Bi(t), a = i.next(); !a.done; a = i.next()) { s = a.value, l = s.mockup, u = s.previewMockups || [], Go(l) || (o = !0); try { for (v = void 0, c = Bi(u), p = c.next(); !p.done; p = c.next())Go(p.value) || (o = !0) } catch (t) { v = { error: t } } finally { try { p && !p.done && (w = c.return) && w.call(c) } finally { if (v) throw v.error } } } } catch (t) { _ = { error: t } } finally { try { a && !a.done && (b = i.return) && b.call(i) } finally { if (_) throw _.error } } return h = null, o ? (f = { watermark: { visibility: { canvas: !1, proof: !1 } } }, this._context.config.userId && (f.userId = this._context.config.userId), this._context.config.tokenId && (f.tokenId = this._context.config.tokenId), [4, xi.getInitData(this._context.editorUrl, Xo(t), f)]) : [3, 2]; case 1: d = C.sent(), h = JSON.parse(d).product, C.label = 2; case 2: return y = { updateRevertData: null != e ? e.updateRevertData : null, addToHistory: null != e ? e.addToHistory : null, resetHistory: null != e ? e.resetHistory : null, transferProduct: h, surfacesToBeCleared: o ? null : t.map((function (t) { return t.surface.id })), updateSurfaceSize: null != e ? e.updateSurfaceSize : null }, [4, this._context.client.callProcedure("updateMockups", y)]; case 3: return C.sent(), [2, this._context.editor.getProduct()] } })) })) }, e.prototype.applyProductTheme = function (t) { return this._context.client.callProcedure("applyProductTheme", t) }, e.prototype.getAllItems = function (t) { return void 0 === t && (t = { includeMockup: !0 }), Ei(this, void 0, Promise, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("getAllItems", t)]; case 1: return [2, e.sent().map((function (t) { return new Gi(t) }))] } })) })) }, e.prototype.getProductModel = function () { return Ei(this, void 0, Promise, (function () { var t, e; return Ti(this, (function (n) { switch (n.label) { case 0: return e = (t = cn.getProductSerializer()).deserialize, [4, this._context.client.callProcedure("getProductModel")]; case 1: return [2, e.apply(t, [n.sent()])] } })) })) }, e.prototype.setProductModel = function (t) { return this._context.client.callProcedure("setProductModel", cn.getProductSerializer().serialize(t)) }, e.prototype.getItemRectangles = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("getRectangles", t)]; case 1: return [2, e.sent().map((function (t) { return new xe(t.centerX, t.centerY, t.width, t.height, t.angle) }))] } })) })) }, e.prototype.getItems = function (t, e) { return Ei(this, void 0, Promise, (function () { return Ti(this, (function (n) { switch (n.label) { case 0: return [4, this._context.client.callProcedure("getItems", t.toString(), e)]; case 1: return [2, n.sent().map((function (t) { return (new Po).parseItem(JSON.parse(t)) }))] } })) })) }, e.prototype.setItem = function (t) { return this._context.client.callProcedure("setItem", cn.getProductSerializer().serializeModelComponent(t)) }, e.prototype.getItemById = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this.getItems((function (t, e) { return t.id === e.id }), { id: t })]; case 1: return [2, e.sent()[0]] } })) })) }, e.prototype.getItemByName = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this.getItems((function (t, e) { return t.name === e.name }), { name: t })]; case 1: return [2, e.sent()[0]] } })) })) }, e.prototype.removeItems = function (t, e) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (n) { switch (n.label) { case 0: return [4, this._context.client.callProcedure("removeItems", t.toString(), e)]; case 1: return [2, n.sent()] } })) })) }, e.prototype.removeItemById = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this.removeItems((function (t, e) { return t.id === e.id }), { id: t })]; case 1: return e.sent(), [2] } })) })) }, e.prototype.removeItemByName = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this.removeItems((function (t, e) { return t.name === e.name }), { name: t })]; case 1: return e.sent(), [2] } })) })) }, e.prototype.getVariableItems = function () { return this._context.client.callProcedure("getVariableItems") }, Object.defineProperty(e.prototype, "currentSurfaceIndex", { get: function () { return this.surfaces.indexOf(this.currentSurface) }, enumerable: !0, configurable: !0 }), e.prototype.changeBackground = function (t, e) { return Ei(this, void 0, Promise, (function () { var n; return Ti(this, (function (r) { switch (r.label) { case 0: return n = { surfaceIds: t.map((function (t) { return t.id })), data: e instanceof Re ? e.toString() : e }, [4, this._context.client.callProcedure("changeBackground", n)]; case 1: return [2, r.sent()] } })) })) }, e.prototype.updateSurfaces = function (t) { return Ei(this, void 0, void 0, (function () { var e, n, r, o; return Ti(this, (function (i) { switch (i.label) { case 0: return e = "string" == typeof t.definition ? [new Oa(t.definition)] : t.definition, o = (r = JSON).parse, [4, xi.getInitData(this._context.editorUrl, e, this._context.config, null, !0)]; case 1: return n = o.apply(r, [i.sent()]).product, t.transferProductJson = n, [4, this._context.client.callProcedure("updateSurfaces", t)]; case 2: return i.sent(), [4, this._context.editor.getProduct()]; case 3: return [2, i.sent()] } })) })) }, e.prototype.getViolationData = function () { return Ei(this, void 0, Promise, (function () { return Ti(this, (function (t) { switch (t.label) { case 0: return [4, this._context.client.callProcedure("getViolationData")]; case 1: return [2, t.sent()] } })) })) }, e }(Ai); !function (t) { t.keepCurrentSurfaceLength = "keepCurrentSurfaceLength", t.changeSurfaceLength = "changeSurfaceLength" }(Mi || (Mi = {})); var Li, Ni, Fi, zi, Di, Vi = function (t) { function e(e, n, r) { var o = t.call(this, e) || this; return o._parentProduct = n, o._context = r, o.containers = [], o.width = e.width, o.height = e.height, o.mockup = new Wi(e.mockup), o.previewMockups = (e.previewMockups || []).map((function (t) { return new Wi(t) })), o.containers = (e.containers || []).map((function (t) { return new Ui(t, r) })), o.printAreas = (e.printAreas || []).map((function (t) { return new qi(t, o) })), o } return ki(e, t), e.prototype.setMockup = function (t, e, n) { return this._parentProduct.setMockups([{ surface: this, mockup: t, previewMockups: e }], n) }, e.prototype.changeBackground = function (t) { return Ei(this, void 0, Promise, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return [4, this._parentProduct.changeBackground([this], t)]; case 1: return [2, e.sent()[0]] } })) })) }, e.prototype.setPrintAreas = function (t, e) { var n = this, r = Jo(t); return xi.getInitData(this._context.editorUrl, r, this._context.config, null, !0).then((function (t) { return JSON.parse(t).product })).then((function (t) { return n._context.client.callProcedure("updatePrintAreas", n.id, t, e) })).then((function () { return n._context.editor.getProduct() })) }, e.prototype.getContainer = function (t) { return this.containers.filter((function (e) { return e.name === t }))[0] }, e.prototype.getContainers = function () { return this.containers }, e.prototype.addContainer = function (t) { return Ei(this, void 0, void 0, (function () { var e, n; return Ti(this, (function (r) { switch (r.label) { case 0: return null == t ? [2] : (e = new Ui(t, this._context), this.containers.push(e), t.type = e.type, n = e, [4, this._context.client.callProcedure("insertContainer", t)]); case 1: return n.id = r.sent(), [2, e] } })) })) }, e.prototype.insertContainer = function (t, e) { return Ei(this, void 0, void 0, (function () { var n, r, o; return Ti(this, (function (i) { switch (i.label) { case 0: if (n = "string" == typeof e ? parseInt(e) : e, !this.isIndexOfContainers(n) && n != this.containers.length) throw new C("insertContainer: index '" + e + "' is wrong. Value must be an integer number in containers range."); if (this.isIndexInRestrictedRange(n)) throw new C("insertContainer: index '" + n + "' is wrong. New container must be inserted after " + this.restrictedContainersEnumerationString + " containers."); return r = new Ui(t, this._context), t.type = r.type, this.containers.splice(n, 0, r), o = r, [4, this._context.client.callProcedure("insertContainer", t, n)]; case 1: return o.id = i.sent(), [2, r] } })) })) }, e.prototype.removeContainer = function (t) { var e = "string" == typeof t ? parseInt(t) : t; if (!this.isIndexOfContainers(e)) throw new C("removeContainer: index '" + e + "' is wrong. Value must be an integer number in containers range."); if (this.isIndexInRestrictedRange(e)) throw new C("removeContainer: index '" + e + "' is wrong. " + this.restrictedContainersEnumerationString + " containers cannot be removed."); this.containers.splice(e, 1), this._context.client.callProcedure("removeContainer", e) }, e.prototype.moveContainer = function (t, e) { var n = this; if (t !== e) { var r = !1, o = "string" == typeof t ? parseInt(t) : t, i = "string" == typeof e ? parseInt(e) : e; if ([o, i].forEach((function (t, e) { if (!n.isIndexOfContainers(t)) throw r = !0, new C("moveContainer: index '" + t + "' is wrong. Value must be an integer number in containers range."); if (n.isIndexInRestrictedRange(t)) throw r = !0, new C(0 === e ? "moveContainer: initial index '" + o + "' is wrong. " + n.restrictedContainersEnumerationString + " containers cannot be moved." : "moveContainer: destination index '" + i + "' is wrong. Containers cannot be moved before " + n.restrictedContainersEnumerationString + " containers.") })), !r) { var a = this.containers.splice(o, 1)[0]; return this.containers.splice(i, 0, a), this._context.client.callProcedure("moveContainer", o, i), this.containers[i] } } }, e.prototype.insertItem = function (t, e, n) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (r) { switch (r.label) { case 0: return [4, this._context.client.callProcedure("insertItem", cn.getProductSerializer().serializeModelComponent(t), e, n, this._parentProduct.surfaces.indexOf(this))]; case 1: return [2, r.sent()] } })) })) }, Object.defineProperty(e.prototype, "restrictedContainersEnumerationString", { get: function () { return "" + Ui.restrictedContainerNames.map((function (t, e) { return t + (e === Ui.restrictedContainerNames.length - 1 ? "" : ", ") })).join("") }, enumerable: !0, configurable: !0 }), e.prototype.isIndexOfContainers = function (t) { return "number" == typeof t && !isNaN(t) && t >= 0 && t < this.containers.length }, e.prototype.isIndexInRestrictedRange = function (t) { return t < Ui.restrictedContainerNames.length }, e }(Ai), qi = function (t) { function e(e, n) { var r = t.call(this, e) || this; return r._surface = n, r.containers = [], r } return ki(e, t), e.prototype.getContainer = function (t) { return this._surface.getContainer(t) }, e.prototype.getContainers = function () { return this._surface.getContainers() }, e.prototype.addContainer = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { return [2, this._surface.addContainer(t)] })) })) }, e.prototype.insertContainer = function (t, e) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (n) { return [2, this._surface.insertContainer(t, e)] })) })) }, e.prototype.removeContainer = function (t) { return this._surface.removeContainer(t) }, e.prototype.moveContainer = function (t, e) { return this._surface.moveContainer(t, e) }, e }(Ai), Ui = function (t) { function e(e, n) { var r = t.call(this, e) || this; r._context = n; var o = e.type.toString(); return o !== Oi.Texture.toString() && ("string" != typeof o || o.toLowerCase() !== Oi[Oi.Texture].toLowerCase() && "TextureContainer" !== o) || (r.texture = e.texture || e.previewTextureName, r.type = Oi.Texture), o !== Oi.SpotColor.toString() && ("string" != typeof o || o.toLowerCase() !== Oi[Oi.SpotColor].toLowerCase() && "SpotColorContainer" !== o) || (r.previewColor = e.previewColor.Preview || e.previewColor, r.type = Oi.SpotColor), r.translationKey = e.translationKey, r } return ki(e, t), e.prototype.update = function (t) { return Ei(this, void 0, void 0, (function () { return Ti(this, (function (e) { switch (e.label) { case 0: return null != this.previewColor && null != t.previewColor && (this.previewColor = t.previewColor), null != this.texture && null != t.texture && (this.texture = t.texture), null != t.name && (this.name = t.name), null != t.translationKey && (this.translationKey = t.translationKey), [4, this._context.client.callProcedure("updateContainer", this.id, t)]; case 1: return e.sent(), [2, this] } })) })) }, e.BG_CONTAINER_NAME = "Background", e.MAIN_CONTAINER_NAME = "Main", e.FG_CONTAINER_NAME = "Foreground", e.restrictedContainerNames = [e.BG_CONTAINER_NAME, e.MAIN_CONTAINER_NAME, e.FG_CONTAINER_NAME], e }(Ai), Wi = function (t) { function e(e) { return t.call(this, e) || this } return ki(e, t), e }(Ai), Gi = function (t) { function e(n) { var r = t.call(this, n) || this; return r.tags = {}, r.tags = n.tags, null != n.content && (r.content = new e(n.content)), r } return ki(e, t), e }(Ai), Hi = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, Ji = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, Xi = function () { function t(t) { this._postMessageClient = t } return t.prototype.execute = function (t, e, n) { return Hi(this, void 0, Promise, (function () { return Ji(this, (function (r) { return [2, this._postMessageClient.callProcedure("executeCommand", t, e, n)] })) })) }, t }(), Yi = function (t, e, n, r) { return new (n || (n = Promise))((function (o, i) { function a(t) { try { l(r.next(t)) } catch (t) { i(t) } } function s(t) { try { l(r.throw(t)) } catch (t) { i(t) } } function l(t) { var e; t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } l((r = r.apply(t, e || [])).next()) })) }, $i = function (t, e) { var n, r, o, i, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return i = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () { return this }), i; function s(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++, { value: i[1], done: !1 }; case 5: a.label++, r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (!(o = a.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = e.call(t, a) } catch (t) { i = [6, t], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } }, Ki = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, o, i = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = i.next()).done;)a.push(r.value) } catch (t) { o = { error: t } } finally { try { r && !r.done && (n = i.return) && n.call(i) } finally { if (o) throw o.error } } return a }, Qi = function () { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(Ki(arguments[e])); return t }, Zi = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") }, ta = function () { function t(t, e, n, r) { this._iframe = t, this._configuration = null, this._postMessageClient = e, this.commandManager = new Xi(e), this._context = { editorUrl: n, client: e, config: r, editor: this }, new f(this, this._iframe), this._iframe.allowFullscreen = !0 } return Object.defineProperty(t, "version", { get: function () { return "6.16.3" }, enumerable: !0, configurable: !0 }), t.prototype.getProofImages = function (t, e) { return this._postMessageClient.callProcedure("getProofImages", t, e) }, t.prototype.finishProductDesign = function (t, e) { return this._postMessageClient.callProcedure("finishProductDesign", t, e) }, t.prototype.saveProduct = function (t, e, n) { return this._postMessageClient.callProcedure("saveProduct", t, e, n) }, t.prototype.revertProduct = function (t) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (e) { switch (e.label) { case 0: return [4, vi.waitReady(this._iframe)]; case 1: return e.sent(), [2, this._postMessageClient.callProcedure("revertProduct", t)] } })) })) }, t.prototype.undo = function () { return this._postMessageClient.callProcedure("undo") }, t.prototype.redo = function () { return this._postMessageClient.callProcedure("redo") }, t.prototype.loadUserInfo = function (t) { return this._postMessageClient.callProcedure("loadUserInfo", t) }, t.prototype.validateUserInfo = function (t) { return this._postMessageClient.callProcedure("validateUserInfo", t) }, t.prototype.getUnchangedItems = function () { return this._postMessageClient.callProcedure("getUnchangedItems") }, t.prototype.subscribe = function (t, e) { this._postMessageClient.subscribe(t, e) }, t.prototype.getProduct = function () { var t = this; return this._postMessageClient.callProcedure("getRawProduct").then((function (e) { return new Ri(e, t._context) })) }, t.prototype.replaceInterpolationPlaceholders = function () { this._context.client.callProcedure("replaceInterpolationPlaceholders") }, Object.defineProperty(t.prototype, "configuration", { get: function () { return this._configuration || (this._configuration = new s(this._postMessageClient)), this._configuration }, enumerable: !0, configurable: !0 }), t.prototype.applyProductTheme = function (t) { return this._postMessageClient.callProcedure("applyProductTheme", t) }, t.prototype.eval = function (t) { for (var e, n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; return console.warn("It is highly recommended not to use the eval function!"), "string" == typeof t ? this._postMessageClient.callProcedure("evalCode", t) : (e = this._postMessageClient).callProcedure.apply(e, Qi(["evalFunc"], Qi([t.toString()], n))) }, t.prototype.dispose = function () { this._postMessageClient.dispose() }, t.prototype.getSelectedItems = function () { return Yi(this, void 0, Promise, (function () { return $i(this, (function (t) { switch (t.label) { case 0: return [4, this._context.client.callProcedure("getSelectedItems")]; case 1: return [2, t.sent().map((function (t) { return new Gi(t) }))] } })) })) }, t.prototype.selectItems = function (t) { return Yi(this, void 0, void 0, (function () { var e, n; return $i(this, (function (r) { return e = cn.getProductSerializer(), n = t.map((function (t) { return e.serializeModelComponent(t) })), this._context.client.callProcedure("selectItems", n), [2] })) })) }, t.prototype.clearSelection = function () { return Yi(this, void 0, void 0, (function () { return $i(this, (function (t) { return this._context.client.callProcedure("clearSelection"), [2] })) })) }, t.prototype.selectAllItems = function () { return Yi(this, void 0, void 0, (function () { return $i(this, (function (t) { return this._context.client.callProcedure("selectAllItems"), [2] })) })) }, t.prototype.setViewerSettings = function (t) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("setViewerSettings", t)]; case 1: return [2, e.sent()] } })) })) }, t.prototype.openGallery = function (t, e) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (n) { switch (n.label) { case 0: return [4, this._context.client.callProcedure("openAssetManager", t, e)]; case 1: return [2, n.sent()] } })) })) }, t.prototype.openGalleryForBackground = function (t) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("openAssetManagerForBg", t)]; case 1: return [2, e.sent()] } })) })) }, t.prototype.openGalleryForItem = function (t, e) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (n) { switch (n.label) { case 0: return [4, this._context.client.callProcedure("openAssetManagerForItem", t, e)]; case 1: return n.sent(), [2] } })) })) }, t.prototype.setThemeConfiguration = function (t) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("setThemeConfiguration", t)]; case 1: return e.sent(), [2] } })) })) }, t.prototype.updateConfiguration = function (t) { return Yi(this, void 0, void 0, (function () { return $i(this, (function (e) { switch (e.label) { case 0: return [4, this._context.client.callProcedure("updateConfiguration", t)]; case 1: return e.sent(), [2] } })) })) }, t.prototype._checkParams = function (t) { var e, n; try { for (var r = Zi(t), o = r.next(); !o.done; o = r.next()) { var i = o.value; if (typeof i.value !== i.type) return window.console && console.error("Wrong parameter: " + i.name), !1 } } catch (t) { e = { error: t } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (e) throw e.error } } return !0 }, t }(); function ea(t) { oa(t) && ra(t), function () { if (null != document.getElementById("cc-loadmask")) return; var t = document.createElement("link"); t.type = "text/css", t.rel = "stylesheet", t.id = "cc-loadmask", null == Fi ? n(14) : t.href = Fi + "LoadMask.less"; ia(document.head, t) }(), t.classList.add("masked-element"); var e = document.createElement("div"); e.classList.add("mask"), e.innerHTML = "<div class='loader-wraper icon-cc-logo'><div class='loader'></div></div><div class='masked-element-message'></div>", null == e.querySelector(".logo") && function (t) { if ("string" == typeof zi) { if (zi.startsWith("data:image") || zi.startsWith("http")) { var e = document.createElement("div"); return e.className = "logo", e.style.backgroundSize = "contain", e.style.backgroundImage = "url(" + zi + ")", e.style.backgroundRepeat = "no-repeat", e.style.backgroundPositionX = "50%", e.style.backgroundPositionY = "50%", null != document.documentElement.style.getPropertyValue("--de-brand-primary") && (e.style.color = "var(--de-brand-primary)"), e.style.color = "var()", void t.appendChild(e) } var n = (new DOMParser).parseFromString(zi, "image/svg+xml"); if ("svg" === n.documentElement.tagName.toLowerCase()) return n.documentElement.classList.add("logo"), null != document.documentElement.style.getPropertyValue("--de-brand-primary") && (n.documentElement.style.color = "var(--de-brand-primary)"), void t.appendChild(n.documentElement) } t.innerHTML += '<svg viewBox="0 0 32 32" class="logo" style="color:#0090FF" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 4H4V28H13V24.2494H7.7506V7.7506H13V4Z" fill="currentColor"/><path d="M19 28V24.2494H24.2494V7.7506H19V4H28V28H19Z" fill="currentColor"/></svg>' }(e.querySelector(".loader-wraper")), ia(t, e) } function na(t, e, n) { (void 0 === n && (n = !1), oa(t) || ea(t), t.querySelector(".masked-element-message").innerText = e, n) ? (t.querySelector(".mask").classList.add("warning"), null == zi && (t.querySelector(".loader-wraper").innerHTML = '<div class=\'loader\'></div><svg viewBox="0 0 32 32" class="logo" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 4H4V28H13V24.2494H7.7506V7.7506H13V4Z" fill="red"/><path d="M19 28V24.2494H24.2494V7.7506H19V4H28V28H19Z" fill="red"/></svg>')) : t.querySelector(".mask").classList.remove("warning") } function ra(t) { t.classList.remove("masked-element"); for (var e = t.querySelectorAll(".mask"), n = 0; n < e.length; n++)t.removeChild(e.item(n)) } function oa(t) { return t.classList.contains("masked-element") } function ia(t, e) { t.insertBefore(e, t.firstChild) } function aa(t, e, n, r) { var o, i, a; if (ca(), (n = function (t) { null == t && (t = {}); null == t.preloader && (t.preloader = {}); null == t.preloader.enabled && (t.preloader.enabled = !0); t.preloader.enabled && (null == t.preloader.errorMessage && (t.preloader.errorMessage = "Initialization error."), null == t.preloader.firstTimeMessage && (t.preloader.firstTimeMessage = "The product is being configured. It may take a while.")); return t }(n)).enableTrace && Mo(!0, Di, "iframeapi"), null != (i = null === (o = null == n ? void 0 : n.themeConfiguration) || void 0 === o ? void 0 : o.logo) && (zi = i), n.preloader.enabled && ea(t.parentElement), null != n.themeConfiguration && function (t) { if (null != (null == t ? void 0 : t.primaryColor)) { var e = t.primaryColor; document.documentElement.style.setProperty("--de-brand-primary", e); var n = null; try { var r = new Le(e); r.a *= .2, n = r.preview } catch (t) { console.error("EditorLoader: Cannot parse color: " + e) } null != n && document.documentElement.style.setProperty("--de-brand-primary-fade-80", n) } }(n.themeConfiguration), "string" == typeof e) a = [new Oa(e)]; else if (xo(e)) a = e.map((function (t) { return new Oa(t) })); else { if ("object" != typeof e || null === e) throw new v("Parameter product has unexpected type"); a = e } var s = new xi(t, { productData: a, config: n }, Di); return Ro({ method: "loadEditor", product: e, config: n }), s.start((function () { n.preloader.enabled && na(t.parentElement, n.preloader.firstTimeMessage), null != r && r() })).then((function (e) { return n.preloader.enabled && ra(t.parentElement), e })).catch((function (e) { throw n.preloader.enabled && na(t.parentElement, n.preloader.errorMessage, !0), e })) } function sa() { xi.preload(Di) } function la(t, e, n) { return ca(), new xi(t, new xa(e), Di).start(n) } function ua(t) { return new ta(t, new zo(t), "hostpage_api_unknown") } function ca() { if (null == Di) throw new Error('IFrame Api is unable to find location of Customer’s Canvas application. Please make sure you have added id="CcIframeApiScript" to the <script> tag loading IFrame Api:\n<head>\n   …\n    <script id="CcIframeApiScript" type="text/javascript" src="http://example.com/CustomersCanvas/Resources/SPEditor/Scripts/IFrame/IframeApi.js"><\/script>\n   …\n</head>\nFor more information please visit https://customerscanvas.com/docs/cc/IframeApi-introduction.htm') } Ni = ta || (ta = {}), (Li = Ni.ViolationState || (Ni.ViolationState = {}))[Li.None = 0] = "None", Li[Li.Good = 1] = "Good", Li[Li.Warning = 2] = "Warning", Li[Li.Bad = 3] = "Bad", window.CustomersCanvas && window.CustomersCanvas.IframeApi && (Di = window.CustomersCanvas.IframeApi.editorUrl), "string" != typeof Di && (Di = function () { var t = document.querySelector("script#CcIframeApiScript"), e = "/Resources/Generated/IframeApi.js".toLowerCase(); if (null == t) return null; var n = t.src.toLowerCase(), r = n.indexOf("?"); -1 !== r && (n = n.substring(0, r)); return n.replace(e, "") }()); var pa, ha, fa, da, ya, ga, ma, _a, ba, va, wa, Ca, Pa, Sa, xa = function () { function t(t) { this.value = t } return t.prototype.getDeserializedObject = function () { return this.value.split("&").map((function (t) { return t.split("=") })).map((function (t) { return { key: t[0], value: t[1] } })) }, t }(), Oa = function (t) { this.value = t }; !function (t) { t.Simple = "Simple", t.Advanced = "Advanced", t.SimpleOnly = "SimpleOnly" }(pa || (pa = {})), function (t) { t.Simple = "Simple", t.Advanced = "Advanced" }(ha || (ha = {})), function (t) { t.Disabled = "Disabled", t.Download = "Download", t.Post = "Post" }(fa || (fa = {})), function (t) { t.QrVCard = "QrVCard", t.QrPhone = "QrPhone", t.QrUrl = "QrUrl", t.LinearEan8 = "LinearEan8", t.LinearEan13 = "LinearEan13", t.LinearUpcA = "LinearUpcA", t.LinearUpcE = "LinearUpcE", t.LinearCode128 = "LinearCode128", t.DataMatrix = "DataMatrix" }(da || (da = {})), function (t) { t.Left = "Left", t.Right = "Right" }(ya || (ya = {})), function (t) { !function (t) { t.Single = "single", t.Multiple = "multiple" }(t.InStringPlaceholderModeType || (t.InStringPlaceholderModeType = {})) }(ga || (ga = {})), function (t) { t.Left = "Left", t.Center = "Center", t.Right = "Right", t.Justify = "Justify", t.LastLeft = "LastLeft", t.LastRight = "LastRight", t.LastCenter = "LastCenter" }(ma || (ma = {})), function (t) { t.InMemorySource = "InMemorySource" }(_a || (_a = {})), function (t) { t.Merged = "Merged", t.Design = "Design", t.Group = "Group" }(ba || (ba = {})), function (t) { t.Shape = "Shape", t.Vector = "Vector", t.Group = "Group" }(va || (va = {})), function (t) { t.Shape = "Shape", t.Vector = "Vector", t.Group = "Group" }(wa || (wa = {})), function (t) { !function (t) { t.Rgb = "rgb", t.Cmyk = "cmyk" }(t.ColorSpaceType || (t.ColorSpaceType = {})) }(Ca || (Ca = {})), function (t) { !function (t) { t.S = "s", t.M = "m", t.L = "l", t.XL = "xl", t.DS = "ds" }(t.ImageSizeType || (t.ImageSizeType = {})) }(Pa || (Pa = {})), function (t) { t.Left = "left", t.Right = "right", t.Top = "top", t.Bottom = "bottom", t.Center = "center" }(Sa || (Sa = {})); var Ia, ja, ka; !function (t) { t.from = function (t) { return { width: t.width, height: t.height } } }(Ia || (Ia = {})), function (t) { t[t.Fit = 0] = "Fit", t[t.Fill = 1] = "Fill", t[t.Arbitrary = 2] = "Arbitrary", t[t.Original = 3] = "Original" }(ja || (ja = {})), (ka || (ka = {})).VERSION = "6.16.3", function (t) { !function (t) { t.editorUrl = Di, t.loadEditor = aa, t.preload = sa, t.loadEditorByQueryString = la, t._createPreConfiguredEditor = ua, t._waitElementVisible = yi, t.QueryString = xa, t.StateId = Oa, t.Editor = ta, t.EditorLoader = xi, t.ServerException = Uo, t.FullWindowHandler = f, t.RuntimeConfiguration = r }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.BarcodeType = da, t.ColorSpace = Ca, t.FinishButtonMode = fa, t.FontListMode = ha, t.GallerySource = _a, t.InStringPlaceholderMode = ga, t.ImageSize = Pa, t.ModelMode = pa, t.ObjectInspectorPosition = ya, t.PsdActionMode = ba, t.SvgActionMode = va, t.TextAlignment = ma }(t.Configuration || (t.Configuration = {})) }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.create = Vo, t.isIframeApiException = qo }(t.Exception || (t.Exception = {})) }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.Container = Ui, t.ChannelContainerType = Oi, t.CropMarkTextAlignment = ji, t.Item = Gi, t.ModelComponent = Ai, t.PrintArea = qi, t.Product = Ri, t.Surface = Vi, t.SurfaceMockup = Wi, t.PdfBox = Ii }(t.ObjectModel || (t.ObjectModel = {})) }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { !function (t) { t.fromMockupsData = Xo, t.fromPrintAreas = Jo, t.fromSurface = Yo, t.fromSurfaces = $o, t.isEmptyMockup = Go, t.normalizeMockupTemplate = ti, t.prepareForServer = Ho }(t.Convert || (t.Convert = {})) }(t.ObjectModel || (t.ObjectModel = {})) }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.Client = zo, t.Events = c, t.MessageType = u }(t.PostMessage || (t.PostMessage = {})) }(t.IframeApi || (t.IframeApi = {})) }(ka || (ka = {})), function (t) { !function (t) { t.Json = p, t.Deferred = y, t.UserAgent = mi }(t.Utils || (t.Utils = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.getJson = ci, t.postJson = pi, t.request = ui, t.StatusCode = ii, t.RequestType = hi, t.ContentType = fi, t.Exception = di }(t.Ajax || (t.Ajax = {})) }(t.Utils || (t.Utils = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.isStringArray = xo, t.isObject = Oo }(t.Type || (t.Type = {})) }(t.Utils || (t.Utils = {})) }(ka || (ka = {})), function (t) { !function (t) { !function (t) { t.AutoScaledTextItem = cr, t.BarcodeData = fr, t.BarcodeFormat = lr, t.BarcodeItem = dr, t.BarcodePermissions = pr, t.BarcodeSubType = ur, t.BaseItem = xn, t.BaseTextItem = sr, t.BoundedTextItem = mr, t.ContentItem = Yn, t.ContentPermissions = Er, t.CurvedTextItem = Tr, t.DashedLineItem = Ar, t.EllipseItem = Rr, t.FitMode = Zn, t.FrontendPermissions = An, t.HorizontalContentAlignment = so, t.ImageItem = Dr, t.ImageMetaData = Vr, t.ImagePermissions = kr, t.Item = Fn, t.ItemPermissions = Mn, t.ItemToolbarPermissions = Bn, t.LineItem = Mr, t.LinePermissions = Br, t.ManipulationPermissions = jn, t.OverflowStrategy = er, t.ParagraphSettings = gr, t.PathBoundedTextItem = no, t.PathBoundedTextPermissions = eo, t.PlaceholderItem = uo, t.PlaceholderPermissions = ro, t.PlainTextItem = co, t.PolylineItem = po, t.RectangleItem = Xn, t.ResizeGripsPermissions = In, t.ResizeMode = lo, t.ShapeItem = Jn, t.ShapePermissions = zn, t.ShrinkMode = tr, t.SmartItem = On, t.TextAlignment = nr, t.TextPermissions = Qn, t.TextVerticalAlignment = rr, t.ThemeBinding = Ln, t.VerticalContentAlignment = ao, t.VisualizationPermissions = kn, t.Container = hn, t.CropMark = mn, t.CropMarkText = bn, t.CropMarkTextAlignment = _n, t.IGetAllItemsOptions = void 0, t.MockupContainer = fn, t.ModelComponent = Ae, t.PrintArea = wn, t.Product = go, t.RenderingType = pn, t.SafetyLine = $e, t.SpotColorContainer = yn, t.Surface = yo, t.SurfaceContainer = dn, t.SurfaceMockup = Cn, t.TextureContainer = gn, t.Uuid = O, t.Watermark = Pn, t.IPoint = void 0, t.Matrix = ye, t.Path = Pe, t.PathSegment = Ce, t.PointF = de, t.RectangleF = ge, t.RotatedRectangleF = xe, t.SizeF = Oe, t.Margin = Xe, t.ResizeRectangleType = ja, t.ColorFactory = qe, t.InStringPlaceholder = Wr }(t.ObjectModel || (t.ObjectModel = {})) }(t.DesignAtoms || (t.DesignAtoms = {})) }(ka || (ka = {})), window.CustomersCanvas = ka
}]);